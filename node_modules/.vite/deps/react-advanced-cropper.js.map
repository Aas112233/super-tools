{
  "version": 3,
  "sources": ["../../classnames/index.js", "../../tslib/tslib.es6.mjs", "../../advanced-cropper/utils/index.js", "../../advanced-cropper/constants/index.js", "../../advanced-cropper/service/utils.js", "../../advanced-cropper/service/helpers.js", "../../advanced-cropper/service/sizeRestrictions.js", "../../advanced-cropper/state/copyState.js", "../../advanced-cropper/types/index.js", "../../advanced-cropper/service/approximateSize.js", "../../advanced-cropper/service/fitVisibleArea.js", "../../advanced-cropper/algorithms/moveCoordinatesAlgorithm.js", "../../advanced-cropper/state/setCoordinates.js", "../../advanced-cropper/service/fitCoordinates.js", "../../advanced-cropper/state/setVisibleArea.js", "../../advanced-cropper/state/createState.js", "../../advanced-cropper/state/moveCoordinates.js", "../../advanced-cropper/algorithms/resizeCoordinatesAlgorithm.js", "../../advanced-cropper/state/resizeCoordinates.js", "../../advanced-cropper/state/setBoundary.js", "../../advanced-cropper/algorithms/rotateImageAlgorithm.js", "../../advanced-cropper/algorithms/flipImageAlgorithm.js", "../../advanced-cropper/algorithms/transformImageAlgorithm.js", "../../advanced-cropper/state/transformImage.js", "../../advanced-cropper/state/reconcileState.js", "../../advanced-cropper/service/normalize.js", "../../advanced-cropper/service/imageTransforms.js", "../../advanced-cropper/service/interactions.js", "../../advanced-cropper/service/isEqualState.js", "../../advanced-cropper/defaults/defaultPositionRestrictions.js", "../../advanced-cropper/defaults/defaultVisibleArea.js", "../../advanced-cropper/defaults/defaultSize.js", "../../advanced-cropper/defaults/defaultSizeRestrictions.js", "../../advanced-cropper/defaults/defaultPosition.js", "../../advanced-cropper/defaults/defaultAreaPositionRestrictions.js", "../../advanced-cropper/defaults/defaultAreaSizeRestrictions.js", "../../advanced-cropper/defaults/defaultBoundary.js", "../../advanced-cropper/defaults/defaultStencilConstraints.js", "../../advanced-cropper/defaults/index.js", "../../advanced-cropper/instance/AbstractCropperInstance.js", "../../advanced-cropper/animation/index.js", "../../advanced-cropper/canvas/index.js", "../../advanced-cropper/boundary/index.js", "../../advanced-cropper/image/index.js", "../../advanced-cropper/extensions/stencil-size/index.js", "../../react-advanced-cropper/src/deprecated/hybridAutoZoom.ts", "../../react-advanced-cropper/src/service/utils.ts", "../../react-advanced-cropper/src/hooks/useDeprecationWarning.ts", "../../react-advanced-cropper/src/service/cropper.ts", "../../react-advanced-cropper/src/hooks/useFirstMountState.ts", "../../react-advanced-cropper/src/hooks/useUpdateEffect.ts", "../../react-advanced-cropper/src/hooks/useStateWithCallback.ts", "../../react-advanced-cropper/src/instance/CropperInstance.ts", "../../react-advanced-cropper/src/hooks/useForceRerender.ts", "../../react-advanced-cropper/src/hooks/usePersistentFunction.ts", "../../react-advanced-cropper/src/hooks/useCropperInstance.ts", "../../react-advanced-cropper/src/hooks/useCropperImage.ts", "../../react-advanced-cropper/src/hooks/useWindowResize.ts", "../../react-advanced-cropper/src/hooks/useCropperAutoReconcile.ts", "../../react-advanced-cropper/src/hooks/useAbstractCropper.ts", "../../react-advanced-cropper/src/components/service/StretchableBoundary.tsx", "../../react-advanced-cropper/src/components/service/CropperFade.tsx", "../../react-advanced-cropper/src/components/service/CropperWrapper.tsx", "../../react-advanced-cropper/src/service/events.ts", "../../react-advanced-cropper/src/components/service/CropperBackgroundImage.tsx", "../../react-advanced-cropper/src/components/service/CropperCanvas.tsx", "../../react-advanced-cropper/src/components/service/DraggableElement.tsx", "../../react-advanced-cropper/src/components/service/LineWrapper.tsx", "../../react-advanced-cropper/src/components/lines/SimpleLine.tsx", "../../react-advanced-cropper/src/components/service/HandlerWrapper.tsx", "../../react-advanced-cropper/src/components/handlers/SimpleHandler.tsx", "../../react-advanced-cropper/src/components/service/BoundingBox.tsx", "../../react-advanced-cropper/src/components/service/StencilOverlay.tsx", "../../react-advanced-cropper/src/hooks/useTransition.ts", "../../react-advanced-cropper/src/components/service/ArtificialTransition.tsx", "../../react-advanced-cropper/src/components/service/StencilWrapper.tsx", "../../react-advanced-cropper/src/components/service/StencilGrid.tsx", "../../react-advanced-cropper/src/components/stencils/RectangleStencil.tsx", "../../react-advanced-cropper/src/hooks/useRotateImageOptions.ts", "../../react-advanced-cropper/src/hooks/useScaleImageOptions.ts", "../../react-advanced-cropper/src/hooks/useMoveImageOptions.ts", "../../react-advanced-cropper/src/components/service/TransformableImage.tsx", "../../react-advanced-cropper/src/components/service/CropperBackgroundWrapper.tsx", "../../react-advanced-cropper/src/components/AbstractCropper.tsx", "../../react-advanced-cropper/src/service/constants.ts", "../../react-advanced-cropper/src/hooks/useAbstractCropperProps.ts", "../../react-advanced-cropper/src/components/croppers/FixedCropper.tsx", "../../react-advanced-cropper/src/components/croppers/Cropper.tsx", "../../react-advanced-cropper/src/components/stencils/CircleStencil.tsx", "../../react-advanced-cropper/src/components/service/CropperSource.tsx", "../../react-advanced-cropper/src/components/helpers/CropperPreviewWrapper.tsx", "../../react-advanced-cropper/src/components/helpers/CropperPreviewBackground.tsx", "../../react-advanced-cropper/src/components/helpers/CropperPreview.tsx", "../../react-advanced-cropper/src/service/react.ts"],
  "sourcesContent": ["/*!\r\n\tCopyright (c) 2018 Jed Watson.\r\n\tLicensed under the MIT License (MIT), see\r\n\thttp://jedwatson.github.io/classnames\r\n*/\r\n/* global define */\r\n\r\n(function () {\r\n\t'use strict';\r\n\r\n\tvar hasOwn = {}.hasOwnProperty;\r\n\r\n\tfunction classNames () {\r\n\t\tvar classes = '';\r\n\r\n\t\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\t\tvar arg = arguments[i];\r\n\t\t\tif (arg) {\r\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes;\r\n\t}\r\n\r\n\tfunction parseValue (arg) {\r\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\r\n\t\t\treturn arg;\r\n\t\t}\r\n\r\n\t\tif (typeof arg !== 'object') {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tif (Array.isArray(arg)) {\r\n\t\t\treturn classNames.apply(null, arg);\r\n\t\t}\r\n\r\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\r\n\t\t\treturn arg.toString();\r\n\t\t}\r\n\r\n\t\tvar classes = '';\r\n\r\n\t\tfor (var key in arg) {\r\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\r\n\t\t\t\tclasses = appendClass(classes, key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes;\r\n\t}\r\n\r\n\tfunction appendClass (value, newClass) {\r\n\t\tif (!newClass) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\r\n\t\tif (value) {\r\n\t\t\treturn value + ' ' + newClass;\r\n\t\t}\r\n\t\r\n\t\treturn value + newClass;\r\n\t}\r\n\r\n\tif (typeof module !== 'undefined' && module.exports) {\r\n\t\tclassNames.default = classNames;\r\n\t\tmodule.exports = classNames;\r\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\r\n\t\t// register as 'classnames', consistent with npm package name\r\n\t\tdefine('classnames', [], function () {\r\n\t\t\treturn classNames;\r\n\t\t});\r\n\t} else {\r\n\t\twindow.classNames = classNames;\r\n\t}\r\n}());\r\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n  extendStatics = Object.setPrototypeOf ||\r\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n  return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n  if (typeof b !== \"function\" && b !== null)\r\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n  extendStatics(d, b);\r\n  function __() { this.constructor = d; }\r\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n  __assign = Object.assign || function __assign(t) {\r\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n          s = arguments[i];\r\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n      }\r\n      return t;\r\n  }\r\n  return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n  var t = {};\r\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n      t[p] = s[p];\r\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n              t[p[i]] = s[p[i]];\r\n      }\r\n  return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n  return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n  var _, done = false;\r\n  for (var i = decorators.length - 1; i >= 0; i--) {\r\n      var context = {};\r\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n      if (kind === \"accessor\") {\r\n          if (result === void 0) continue;\r\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n          if (_ = accept(result.get)) descriptor.get = _;\r\n          if (_ = accept(result.set)) descriptor.set = _;\r\n          if (_ = accept(result.init)) initializers.unshift(_);\r\n      }\r\n      else if (_ = accept(result)) {\r\n          if (kind === \"field\") initializers.unshift(_);\r\n          else descriptor[key] = _;\r\n      }\r\n  }\r\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n  done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n  var useValue = arguments.length > 2;\r\n  for (var i = 0; i < initializers.length; i++) {\r\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n  }\r\n  return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n  return new (P || (P = Promise))(function (resolve, reject) {\r\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n  });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n  function verb(n) { return function (v) { return step([n, v]); }; }\r\n  function step(op) {\r\n      if (f) throw new TypeError(\"Generator is already executing.\");\r\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n          if (y = 0, t) op = [op[0] & 2, t.value];\r\n          switch (op[0]) {\r\n              case 0: case 1: t = op; break;\r\n              case 4: _.label++; return { value: op[1], done: false };\r\n              case 5: _.label++; y = op[1]; op = [0]; continue;\r\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n              default:\r\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                  if (t[2]) _.ops.pop();\r\n                  _.trys.pop(); continue;\r\n          }\r\n          op = body.call(thisArg, _);\r\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n  }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n  if (k2 === undefined) k2 = k;\r\n  var desc = Object.getOwnPropertyDescriptor(m, k);\r\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n  }\r\n  Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n  if (k2 === undefined) k2 = k;\r\n  o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n  if (m) return m.call(o);\r\n  if (o && typeof o.length === \"number\") return {\r\n      next: function () {\r\n          if (o && i >= o.length) o = void 0;\r\n          return { value: o && o[i++], done: !o };\r\n      }\r\n  };\r\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n  if (!m) return o;\r\n  var i = m.call(o), r, ar = [], e;\r\n  try {\r\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n  }\r\n  catch (error) { e = { error: error }; }\r\n  finally {\r\n      try {\r\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n      }\r\n      finally { if (e) throw e.error; }\r\n  }\r\n  return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n  for (var ar = [], i = 0; i < arguments.length; i++)\r\n      ar = ar.concat(__read(arguments[i]));\r\n  return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n          r[k] = a[j];\r\n  return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n      if (ar || !(i in from)) {\r\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n          ar[i] = from[i];\r\n      }\r\n  }\r\n  return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n  function fulfill(value) { resume(\"next\", value); }\r\n  function reject(value) { resume(\"throw\", value); }\r\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n  var i, p;\r\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n  var m = o[Symbol.asyncIterator], i;\r\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n  return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n  o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n  ownKeys = Object.getOwnPropertyNames || function (o) {\r\n    var ar = [];\r\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n    return ar;\r\n  };\r\n  return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n  if (mod && mod.__esModule) return mod;\r\n  var result = {};\r\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n  __setModuleDefault(result, mod);\r\n  return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n  return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n  if (value !== null && value !== void 0) {\r\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n    var dispose, inner;\r\n    if (async) {\r\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n      dispose = value[Symbol.asyncDispose];\r\n    }\r\n    if (dispose === void 0) {\r\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n      dispose = value[Symbol.dispose];\r\n      if (async) inner = dispose;\r\n    }\r\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n    env.stack.push({ value: value, dispose: dispose, async: async });\r\n  }\r\n  else if (async) {\r\n    env.stack.push({ async: true });\r\n  }\r\n  return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n  var e = new Error(message);\r\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n  function fail(e) {\r\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n    env.hasError = true;\r\n  }\r\n  var r, s = 0;\r\n  function next() {\r\n    while (r = env.stack.pop()) {\r\n      try {\r\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n        if (r.dispose) {\r\n          var result = r.dispose.call(r.value);\r\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n        }\r\n        else s |= 1;\r\n      }\r\n      catch (e) {\r\n        fail(e);\r\n      }\r\n    }\r\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n    if (env.hasError) throw env.error;\r\n  }\r\n  return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n      });\r\n  }\r\n  return path;\r\n}\r\n\r\nexport default {\r\n  __extends,\r\n  __assign,\r\n  __rest,\r\n  __decorate,\r\n  __param,\r\n  __esDecorate,\r\n  __runInitializers,\r\n  __propKey,\r\n  __setFunctionName,\r\n  __metadata,\r\n  __awaiter,\r\n  __generator,\r\n  __createBinding,\r\n  __exportStar,\r\n  __values,\r\n  __read,\r\n  __spread,\r\n  __spreadArrays,\r\n  __spreadArray,\r\n  __await,\r\n  __asyncGenerator,\r\n  __asyncDelegator,\r\n  __asyncValues,\r\n  __makeTemplateObject,\r\n  __importStar,\r\n  __importDefault,\r\n  __classPrivateFieldGet,\r\n  __classPrivateFieldSet,\r\n  __classPrivateFieldIn,\r\n  __addDisposableResource,\r\n  __disposeResources,\r\n  __rewriteRelativeImportExtension,\r\n};\r\n", "function getDirectionNames(hDirection, vDirection) {\r\n    var camelCase, snakeCase;\r\n    if (hDirection && vDirection) {\r\n        camelCase = \"\" + hDirection + vDirection[0].toUpperCase() + vDirection.slice(1);\r\n        snakeCase = hDirection + \"-\" + vDirection;\r\n    }\r\n    else {\r\n        camelCase = hDirection || vDirection;\r\n        snakeCase = hDirection || vDirection;\r\n    }\r\n    return { camelCase: camelCase, snakeCase: snakeCase };\r\n}\r\nfunction isBlob(url) {\r\n    return /^blob:/.test(url);\r\n}\r\nfunction isDataUrl(url) {\r\n    return /^data:/.test(url);\r\n}\r\nfunction isLocal(url) {\r\n    return isBlob(url) || isDataUrl(url);\r\n}\r\nfunction isCrossOriginURL(url) {\r\n    if (isLocal(url)) {\r\n        return false;\r\n    }\r\n    var pageLocation = window.location;\r\n    var URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\r\n    var urlMatch = URL_HOST_PATTERN.exec(url) || [];\r\n    var urlparts = {\r\n        protocol: urlMatch[1] || '',\r\n        host: urlMatch[2] || '',\r\n        port: urlMatch[3] || '',\r\n    };\r\n    var defaultPort = function (protocol) {\r\n        if (protocol === 'http') {\r\n            return 80;\r\n        }\r\n        else {\r\n            return 433;\r\n        }\r\n    };\r\n    var portOf = function (location) {\r\n        return location.port || defaultPort((location.protocol || pageLocation.protocol));\r\n    };\r\n    return !((!urlparts.protocol && !urlparts.host && !urlparts.port) ||\r\n        Boolean(urlparts.protocol &&\r\n            urlparts.protocol == pageLocation.protocol &&\r\n            urlparts.host &&\r\n            urlparts.host == pageLocation.host &&\r\n            urlparts.host &&\r\n            portOf(urlparts) == portOf(pageLocation)));\r\n}\r\nfunction isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\nfunction isFunction(value) {\r\n    return typeof value === 'function';\r\n}\r\nfunction isUndefined(obj) {\r\n    return obj === undefined;\r\n}\r\nvar isObject = function (term) {\r\n    return term !== null && typeof term === 'object';\r\n};\r\n// TODO: add the typing\r\nfunction getOptions(options, defaultScheme, falseScheme) {\r\n    if (falseScheme === void 0) { falseScheme = {}; }\r\n    var result = {};\r\n    if (isObject(options)) {\r\n        Object.keys(defaultScheme).forEach(function (key) {\r\n            if (isUndefined(options[key])) {\r\n                result[key] = defaultScheme[key];\r\n            }\r\n            else if (isObject(defaultScheme[key])) {\r\n                if (isObject(options[key])) {\r\n                    result[key] = getOptions(options[key], defaultScheme[key], falseScheme[key]);\r\n                }\r\n                else {\r\n                    result[key] = options[key] ? defaultScheme[key] : falseScheme[key];\r\n                }\r\n            }\r\n            else if (defaultScheme[key] === true || defaultScheme[key] === false) {\r\n                result[key] = Boolean(options[key]);\r\n            }\r\n            else {\r\n                result[key] = options[key];\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    else {\r\n        if (options) {\r\n            return defaultScheme;\r\n        }\r\n        else {\r\n            return falseScheme;\r\n        }\r\n    }\r\n}\r\nfunction parseNumber(number) {\r\n    var parsedNumber = Number(number);\r\n    if (Number.isNaN(parsedNumber)) {\r\n        return number;\r\n    }\r\n    else {\r\n        return parsedNumber;\r\n    }\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction isNumber(value) {\r\n    return typeof value === 'number';\r\n}\r\nfunction isString(value) {\r\n    return typeof value === 'string';\r\n}\r\nfunction isNaN(value) {\r\n    return value !== value;\r\n}\r\nfunction isNumeric(value) {\r\n    return ((isNumber(value) && !isNaN(value)) ||\r\n        (isString(value) && !Number.isNaN(parseFloat(value)) && isFinite(parseFloat(value))));\r\n}\r\nfunction distance(firstPoint, secondPoint) {\r\n    return Math.sqrt(Math.pow(firstPoint.left - secondPoint.left, 2) + Math.pow(firstPoint.top - secondPoint.top, 2));\r\n}\r\nfunction isRoughlyEqual(a, b, tolerance) {\r\n    if (tolerance === void 0) { tolerance = 1e-3; }\r\n    return Math.abs(b - a) < tolerance;\r\n}\r\nfunction isGreater(a, b, tolerance) {\r\n    return isRoughlyEqual(a, b, tolerance) ? false : a > b;\r\n}\r\nfunction isLower(a, b, tolerance) {\r\n    return isRoughlyEqual(a, b, tolerance) ? false : a < b;\r\n}\r\nfunction isArrayBufferLike(value) {\r\n    return value instanceof ArrayBuffer;\r\n}\r\nfunction getCloserAngle(reference, angle) {\r\n    var turnsCount = Math.floor(reference / 360);\r\n    var firstCandidate = turnsCount * 360 + angle;\r\n    var secondCandidate = (turnsCount + 1) * 360 + angle;\r\n    if (Math.abs(firstCandidate - reference) < Math.abs(secondCandidate - reference)) {\r\n        return firstCandidate;\r\n    }\r\n    else {\r\n        return secondCandidate;\r\n    }\r\n}\r\nfunction sign(value) {\r\n    var number = +value;\r\n    if (number === 0 || isNaN(number)) {\r\n        return number;\r\n    }\r\n    return number > 0 ? 1 : -1;\r\n}\r\nfunction promiseTimeout(timeout) {\r\n    return new Promise(function (resolve) {\r\n        setTimeout(function () {\r\n            resolve();\r\n        }, timeout);\r\n    });\r\n}\r\n// Not performant, small function to reduce the code amount\r\nfunction deepClone(obj) {\r\n    if (!isObject(obj)) {\r\n        return obj;\r\n    }\r\n    var result = {};\r\n    if (Array.isArray(obj)) {\r\n        result = obj.map(function (item) { return deepClone(item); });\r\n    }\r\n    else {\r\n        Object.keys(obj).forEach(function (key) {\r\n            return (result[key] = deepClone(obj[key]));\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction deepCompare(a, b, tolerance) {\r\n    if (tolerance === void 0) { tolerance = 1e-3; }\r\n    if (isNumber(a) && isNumber(b) && isRoughlyEqual(a, b, tolerance))\r\n        return true;\r\n    if (a === b)\r\n        return true;\r\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\r\n        if (a.constructor !== b.constructor)\r\n            return false;\r\n        var length_1, i = void 0;\r\n        if (Array.isArray(a)) {\r\n            length_1 = a.length;\r\n            if (length_1 != b.length)\r\n                return false;\r\n            for (i = length_1; i-- !== 0;)\r\n                if (!deepCompare(a[i], b[i], tolerance))\r\n                    return false;\r\n            return true;\r\n        }\r\n        if (a.valueOf !== Object.prototype.valueOf)\r\n            return a.valueOf() === b.valueOf();\r\n        if (a.toString !== Object.prototype.toString)\r\n            return a.toString() === b.toString();\r\n        var keys = Object.keys(a);\r\n        length_1 = keys.length;\r\n        if (length_1 !== Object.keys(b).length)\r\n            return false;\r\n        for (i = length_1; i-- !== 0;)\r\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\r\n                return false;\r\n        for (i = length_1; i-- !== 0;) {\r\n            var key = keys[i];\r\n            if (!deepCompare(a[key], b[key], tolerance))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    return a !== a && b !== b;\r\n}\r\nfunction isWheelEvent(event) {\r\n    return 'deltaX' in event;\r\n}\r\nfunction isTouchEvent(event) {\r\n    return 'touches' in event;\r\n}\r\nfunction isMouseEvent(event) {\r\n    return 'buttons' in event;\r\n}\r\nfunction emptyCoordinates() {\r\n    return {\r\n        left: 0,\r\n        top: 0,\r\n        width: 0,\r\n        height: 0,\r\n    };\r\n}\r\nfunction isCardinalDirection(value) {\r\n    return value === 'west' || value === 'south' || value === 'north' || value === 'east';\r\n}\r\nfunction isOrdinalDirection(value) {\r\n    return (isCardinalDirection(value) ||\r\n        value === 'westNorth' ||\r\n        value === 'westSouth' ||\r\n        value === 'eastNorth' ||\r\n        value === 'eastSouth');\r\n}\r\nfunction debounce(callback, delay) {\r\n    var timestamp;\r\n    var timeout;\r\n    function later() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var last = Date.now() - timestamp;\r\n        var delayValue = isFunction(delay) ? delay() : delay || 0;\r\n        if (last < delayValue && last >= 0) {\r\n            timeout = setTimeout(function () { return later.apply(void 0, args); }, delayValue - last);\r\n        }\r\n        else {\r\n            callback.apply(void 0, args);\r\n        }\r\n    }\r\n    function result() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        timestamp = Date.now();\r\n        timeout = setTimeout(function () { return later.apply(void 0, args); }, isFunction(delay) ? delay() : delay || 0);\r\n    }\r\n    result.clear = function () {\r\n        clearTimeout(timeout);\r\n    };\r\n    return result;\r\n}\r\n\r\nexport { debounce, deepClone, deepCompare, distance, emptyCoordinates, getCloserAngle, getDirectionNames, getOptions, isArray, isArrayBufferLike, isBlob, isBoolean, isCardinalDirection, isCrossOriginURL, isDataUrl, isFunction, isGreater, isLocal, isLower, isMouseEvent, isNaN, isNumber, isNumeric, isObject, isOrdinalDirection, isRoughlyEqual, isString, isTouchEvent, isUndefined, isWheelEvent, parseNumber, promiseTimeout, sign };\r\n", "var ALL_DIRECTIONS = ['left', 'right', 'top', 'bottom'];\r\nvar HORIZONTAL_DIRECTIONS = ['left', 'right'];\r\nvar VERTICAL_DIRECTIONS = ['top', 'bottom'];\r\n\r\nexport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS };\r\n", "import { __assign } from 'tslib';\r\nimport { ALL_DIRECTIONS } from '../constants/index.js';\r\nimport { isLower, isGreater, isNumber, isNumeric, isUndefined, isFunction } from '../utils/index.js';\r\n\r\nfunction diff(firstObject, secondObject) {\r\n    return {\r\n        left: firstObject.left - secondObject.left,\r\n        top: firstObject.top - secondObject.top,\r\n    };\r\n}\r\nfunction getCenter(object) {\r\n    return {\r\n        left: object.left + object.width / 2,\r\n        top: object.top + object.height / 2,\r\n    };\r\n}\r\nfunction getOppositeSide(side) {\r\n    return {\r\n        left: 'right',\r\n        top: 'bottom',\r\n        right: 'left',\r\n        bottom: 'top',\r\n    }[side];\r\n}\r\nfunction sizeDistance(a, b) {\r\n    return Math.pow(a.width - b.width, 2) + Math.pow(a.height - b.height, 2);\r\n}\r\nfunction applyDirections(coordinates, directions) {\r\n    return {\r\n        left: coordinates.left - directions.left,\r\n        top: coordinates.top - directions.top,\r\n        width: coordinates.width + directions.left + directions.right,\r\n        height: coordinates.height + directions.top + directions.bottom,\r\n    };\r\n}\r\nfunction inverseMove(directions) {\r\n    return {\r\n        left: -directions.left,\r\n        top: -directions.top,\r\n    };\r\n}\r\nfunction applyMove(object, move) {\r\n    return __assign(__assign({}, object), { left: object.left + move.left, top: object.top + move.top });\r\n}\r\nfunction coordinatesToPositionRestrictions(coordinates) {\r\n    return {\r\n        left: coordinates.left,\r\n        top: coordinates.top,\r\n        right: coordinates.left + coordinates.width,\r\n        bottom: coordinates.top + coordinates.height,\r\n    };\r\n}\r\nfunction applyScale(object, factor, center, progress) {\r\n    if (factor !== 1) {\r\n        if ('left' in object || 'top' in object) {\r\n            if (center) {\r\n                var currentCenter = getCenter(object);\r\n                return {\r\n                    width: object.width * factor,\r\n                    height: object.height * factor,\r\n                    left: object.left +\r\n                        (object.width * (1 - factor)) / 2 +\r\n                        (center.left - currentCenter.left) * (progress || 1 - factor),\r\n                    top: object.top +\r\n                        (object.height * (1 - factor)) / 2 +\r\n                        (center.top - currentCenter.top) * (progress || 1 - factor),\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    width: object.width * factor,\r\n                    height: object.height * factor,\r\n                    left: object.left + (object.width * (1 - factor)) / 2,\r\n                    top: object.top + (object.height * (1 - factor)) / 2,\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            return {\r\n                width: object.width * factor,\r\n                height: object.height * factor,\r\n            };\r\n        }\r\n    }\r\n    else {\r\n        return object;\r\n    }\r\n}\r\nfunction ratio(object) {\r\n    return object.width / object.height;\r\n}\r\nfunction maxScale(size, restrictions) {\r\n    return Math.min(restrictions.maxWidth ? restrictions.maxWidth / size.width : Infinity, restrictions.maxHeight ? restrictions.maxHeight / size.height : Infinity);\r\n}\r\nfunction minScale(size, restrictions) {\r\n    return Math.max(restrictions.minWidth ? restrictions.minWidth / size.width : 0, restrictions.minHeight ? restrictions.minHeight / size.height : 0);\r\n}\r\nfunction getBrokenRatio(currentAspectRatio, aspectRatio) {\r\n    var ratioBroken;\r\n    if (aspectRatio.minimum && isLower(currentAspectRatio, aspectRatio.minimum)) {\r\n        ratioBroken = aspectRatio.minimum;\r\n    }\r\n    else if (aspectRatio.maximum && isGreater(currentAspectRatio, aspectRatio.maximum)) {\r\n        ratioBroken = aspectRatio.maximum;\r\n    }\r\n    return ratioBroken;\r\n}\r\nfunction fitToSizeRestrictions(coordinates, sizeRestrictions) {\r\n    var aspectRatio = ratio(coordinates);\r\n    var scale = 1;\r\n    if (sizeRestrictions.minWidth > 0 && sizeRestrictions.minHeight > 0) {\r\n        if (aspectRatio > sizeRestrictions.minWidth / sizeRestrictions.minHeight) {\r\n            if (coordinates.height < sizeRestrictions.minHeight) {\r\n                scale = sizeRestrictions.minHeight / coordinates.height;\r\n            }\r\n        }\r\n        else {\r\n            if (coordinates.width < sizeRestrictions.minWidth) {\r\n                scale = sizeRestrictions.minWidth / coordinates.width;\r\n            }\r\n        }\r\n    }\r\n    else if (sizeRestrictions.minWidth > 0) {\r\n        if (coordinates.width < sizeRestrictions.minWidth) {\r\n            scale = sizeRestrictions.minWidth / coordinates.width;\r\n        }\r\n    }\r\n    else if (sizeRestrictions.minHeight > 0) {\r\n        if (coordinates.height < sizeRestrictions.minHeight) {\r\n            scale = sizeRestrictions.minHeight / coordinates.height;\r\n        }\r\n    }\r\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\r\n        if (aspectRatio > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\r\n            if (coordinates.width > sizeRestrictions.maxWidth) {\r\n                scale = sizeRestrictions.maxWidth / coordinates.width;\r\n            }\r\n        }\r\n        else {\r\n            if (coordinates.height > sizeRestrictions.maxHeight) {\r\n                scale = sizeRestrictions.maxHeight / coordinates.height;\r\n            }\r\n        }\r\n    }\r\n    else if (sizeRestrictions.maxWidth < Infinity) {\r\n        if (coordinates.width > sizeRestrictions.maxWidth) {\r\n            scale = sizeRestrictions.maxWidth / coordinates.width;\r\n        }\r\n    }\r\n    else if (sizeRestrictions.maxHeight < Infinity) {\r\n        if (coordinates.height > sizeRestrictions.maxHeight) {\r\n            scale = sizeRestrictions.maxHeight / coordinates.height;\r\n        }\r\n    }\r\n    return scale;\r\n}\r\nfunction getIntersections(object, positionRestrictions) {\r\n    var intersections = {\r\n        left: 0,\r\n        top: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n    };\r\n    ALL_DIRECTIONS.forEach(function (direction) {\r\n        var areaLimit = positionRestrictions[direction];\r\n        var objectLimit = coordinatesToPositionRestrictions(object)[direction];\r\n        if (areaLimit !== undefined && objectLimit !== undefined) {\r\n            if (direction === 'left' || direction === 'top') {\r\n                intersections[direction] = Math.max(0, areaLimit - objectLimit);\r\n            }\r\n            else {\r\n                intersections[direction] = Math.max(0, objectLimit - areaLimit);\r\n            }\r\n        }\r\n        else {\r\n            intersections[direction] = 0;\r\n        }\r\n    });\r\n    return intersections;\r\n}\r\nfunction resizeToSizeRestrictions(coordinates, sizeRestrictions) {\r\n    return applyScale(coordinates, fitToSizeRestrictions(coordinates, sizeRestrictions));\r\n}\r\nfunction rotateSize(size, angle) {\r\n    var radians = (angle * Math.PI) / 180;\r\n    return {\r\n        width: Math.abs(size.width * Math.cos(radians)) + Math.abs(size.height * Math.sin(radians)),\r\n        height: Math.abs(size.width * Math.sin(radians)) + Math.abs(size.height * Math.cos(radians)),\r\n    };\r\n}\r\nfunction rotatePoint(point, angle, anchor) {\r\n    var radians = (angle * Math.PI) / 180;\r\n    if (anchor) {\r\n        return {\r\n            left: (point.left - anchor.left) * Math.cos(radians) -\r\n                (point.top - anchor.top) * Math.sin(radians) +\r\n                anchor.left,\r\n            top: (point.left - anchor.left) * Math.sin(radians) +\r\n                (point.top - anchor.top) * Math.cos(radians) +\r\n                anchor.top,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            left: point.left * Math.cos(radians) - point.top * Math.sin(radians),\r\n            top: point.left * Math.sin(radians) + point.top * Math.cos(radians),\r\n        };\r\n    }\r\n}\r\nfunction positionToSizeRestrictions(positionRestrictions) {\r\n    return {\r\n        minWidth: 0,\r\n        minHeight: 0,\r\n        maxWidth: positionRestrictions.right !== undefined && positionRestrictions.left !== undefined\r\n            ? positionRestrictions.right - positionRestrictions.left\r\n            : Infinity,\r\n        maxHeight: positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined\r\n            ? positionRestrictions.bottom - positionRestrictions.top\r\n            : Infinity,\r\n    };\r\n}\r\nfunction mergePositionRestrictions(a, b) {\r\n    var restrictions = {};\r\n    ALL_DIRECTIONS.forEach(function (direction) {\r\n        var firstDirection = a[direction];\r\n        var secondDirection = b[direction];\r\n        if (firstDirection !== undefined && secondDirection !== undefined) {\r\n            if (direction === 'left' || direction === 'top') {\r\n                restrictions[direction] = Math.max(firstDirection, secondDirection);\r\n            }\r\n            else {\r\n                restrictions[direction] = Math.min(firstDirection, secondDirection);\r\n            }\r\n        }\r\n        else if (secondDirection !== undefined) {\r\n            restrictions[direction] = secondDirection;\r\n        }\r\n        else if (firstDirection !== undefined) {\r\n            restrictions[direction] = firstDirection;\r\n        }\r\n    });\r\n    return restrictions;\r\n}\r\nfunction fitToPositionRestrictions(coordinates, positionRestrictions) {\r\n    var directions = {\r\n        left: 0,\r\n        top: 0,\r\n    };\r\n    var intersection = getIntersections(coordinates, positionRestrictions);\r\n    if (intersection.left && intersection.left > 0) {\r\n        directions.left = intersection.left;\r\n    }\r\n    else if (intersection.right && intersection.right > 0) {\r\n        directions.left = -intersection.right;\r\n    }\r\n    if (intersection.top && intersection.top > 0) {\r\n        directions.top = intersection.top;\r\n    }\r\n    else if (intersection.bottom && intersection.bottom > 0) {\r\n        directions.top = -intersection.bottom;\r\n    }\r\n    return directions;\r\n}\r\nfunction moveToPositionRestrictions(coordinates, positionRestrictions) {\r\n    return applyMove(coordinates, fitToPositionRestrictions(coordinates, positionRestrictions));\r\n}\r\nfunction aspectRatioIntersection(main, subset) {\r\n    if (!subset) {\r\n        return main;\r\n    }\r\n    else if (!main) {\r\n        return subset;\r\n    }\r\n    else {\r\n        return {\r\n            minimum: Math.min(main.maximum, Math.max(main.minimum, subset.minimum)),\r\n            maximum: Math.max(main.minimum, Math.min(main.maximum, subset.maximum)),\r\n        };\r\n    }\r\n}\r\nfunction createAspectRatio(aspectRatio) {\r\n    if (aspectRatio === void 0) { aspectRatio = {}; }\r\n    if (isNumber(aspectRatio)) {\r\n        return {\r\n            minimum: aspectRatio,\r\n            maximum: aspectRatio,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            minimum: isNumeric(aspectRatio.minimum) ? aspectRatio.minimum : 0,\r\n            maximum: isNumeric(aspectRatio.maximum) ? aspectRatio.maximum : Infinity,\r\n        };\r\n    }\r\n}\r\nfunction getTransitionStyle(transitions) {\r\n    return transitions ? transitions.timingFunction + \" \" + (transitions.active ? transitions.duration : 0) + \"ms\" : 'none';\r\n}\r\nfunction isConsistentSize(size, restrictions) {\r\n    return ((isUndefined(restrictions.maxWidth) || !isGreater(size.width, restrictions.maxWidth)) &&\r\n        (isUndefined(restrictions.maxHeight) || !isGreater(size.height, restrictions.maxHeight)) &&\r\n        (isUndefined(restrictions.minHeight) || !isLower(size.height, restrictions.minHeight)) &&\r\n        (isUndefined(restrictions.minWidth) || !isLower(size.width, restrictions.minWidth)));\r\n}\r\nfunction isConsistentPosition(coordinates, restrictions) {\r\n    return ((isUndefined(restrictions.left) || !isLower(coordinates.left, restrictions.left)) &&\r\n        (isUndefined(restrictions.top) || !isLower(coordinates.top, restrictions.top)) &&\r\n        (isUndefined(restrictions.right) || !isGreater(coordinates.left + coordinates.width, restrictions.right)) &&\r\n        (isUndefined(restrictions.bottom) || !isGreater(coordinates.top + coordinates.height, restrictions.bottom)));\r\n}\r\nfunction getCloserSize(candidates, reference, sizeRestrictions, aspectRatio) {\r\n    var traverse = function (ignoreMinimum) {\r\n        return candidates.reduce(function (minimum, size) {\r\n            var _a = isFunction(sizeRestrictions)\r\n                ? sizeRestrictions(size)\r\n                : sizeRestrictions, maxHeight = _a.maxHeight, maxWidth = _a.maxWidth, minWidth = _a.minWidth, minHeight = _a.minHeight;\r\n            var preparedAspectRatio = createAspectRatio(isFunction(aspectRatio) ? aspectRatio(size) : aspectRatio);\r\n            var preparedSizeRestrictions = ignoreMinimum\r\n                ? { maxWidth: maxWidth, maxHeight: maxHeight }\r\n                : { maxWidth: maxWidth, maxHeight: maxHeight, minWidth: minWidth, minHeight: minHeight };\r\n            if (isConsistentSize(size, preparedSizeRestrictions) &&\r\n                !getBrokenRatio(ratio(size), preparedAspectRatio) &&\r\n                size.width &&\r\n                size.height) {\r\n                return !minimum || isLower(sizeDistance(size, reference), sizeDistance(minimum, reference))\r\n                    ? size\r\n                    : minimum;\r\n            }\r\n            else {\r\n                return minimum;\r\n            }\r\n        }, null);\r\n    };\r\n    return traverse() || traverse(true);\r\n}\r\n\r\nexport { applyDirections, applyMove, applyScale, aspectRatioIntersection, coordinatesToPositionRestrictions, createAspectRatio, diff, fitToPositionRestrictions, fitToSizeRestrictions, getBrokenRatio, getCenter, getCloserSize, getIntersections, getOppositeSide, getTransitionStyle, inverseMove, isConsistentPosition, isConsistentSize, maxScale, mergePositionRestrictions, minScale, moveToPositionRestrictions, positionToSizeRestrictions, ratio, resizeToSizeRestrictions, rotatePoint, rotateSize, sizeDistance };\r\n", "import { __assign } from 'tslib';\r\nimport { isFunction, emptyCoordinates, isNumber, isBoolean } from '../utils/index.js';\r\nimport { createAspectRatio, rotateSize, moveToPositionRestrictions, getBrokenRatio, ratio, isConsistentSize, isConsistentPosition } from './utils.js';\r\nimport { calculateAreaSizeRestrictions, calculateSizeRestrictions } from './sizeRestrictions.js';\r\n\r\nfunction isInitializedState(state) {\r\n    return Boolean(state && state.visibleArea && state.coordinates);\r\n}\r\nfunction getAreaSizeRestrictions(state, settings) {\r\n    return calculateAreaSizeRestrictions(state, settings);\r\n}\r\nfunction getAreaPositionRestrictions(state, settings) {\r\n    return isFunction(settings.areaPositionRestrictions)\r\n        ? settings.areaPositionRestrictions(state, settings)\r\n        : settings.areaPositionRestrictions;\r\n}\r\nfunction getSizeRestrictions(state, settings) {\r\n    return calculateSizeRestrictions(state, settings);\r\n}\r\nfunction getPositionRestrictions(state, settings) {\r\n    return isFunction(settings.positionRestrictions)\r\n        ? settings.positionRestrictions(state, settings)\r\n        : settings.positionRestrictions;\r\n}\r\nfunction getCoefficient(state) {\r\n    return state.visibleArea ? state.visibleArea.width / state.boundary.width : 0;\r\n}\r\nfunction getStencilCoordinates(state) {\r\n    if (isInitializedState(state)) {\r\n        var _a = state.coordinates, width = _a.width, height = _a.height, left = _a.left, top_1 = _a.top;\r\n        var coefficient = getCoefficient(state);\r\n        return {\r\n            width: width / coefficient,\r\n            height: height / coefficient,\r\n            left: (left - state.visibleArea.left) / coefficient,\r\n            top: (top_1 - state.visibleArea.top) / coefficient,\r\n        };\r\n    }\r\n    else {\r\n        return emptyCoordinates();\r\n    }\r\n}\r\nfunction getAspectRatio(state, settings) {\r\n    return createAspectRatio(isFunction(settings.aspectRatio) ? settings.aspectRatio(state, settings) : settings.aspectRatio);\r\n}\r\nfunction getDefaultCoordinates(state, settings) {\r\n    return isFunction(settings.defaultCoordinates)\r\n        ? settings.defaultCoordinates(state, settings)\r\n        : settings.defaultCoordinates;\r\n}\r\nfunction getDefaultVisibleArea(state, settings) {\r\n    return isFunction(settings.defaultVisibleArea)\r\n        ? settings.defaultVisibleArea(state, settings)\r\n        : settings.defaultVisibleArea;\r\n}\r\nfunction getDefaultTransforms(state, settings) {\r\n    var transforms = __assign(__assign({}, state.transforms), { flip: __assign({}, state.transforms.flip) });\r\n    if (settings.defaultTransforms) {\r\n        var defaultTransforms = isFunction(settings.defaultTransforms)\r\n            ? settings.defaultTransforms(state, settings)\r\n            : settings.defaultTransforms;\r\n        if (isNumber(defaultTransforms.rotate)) {\r\n            transforms.rotate = defaultTransforms.rotate;\r\n        }\r\n        if (defaultTransforms.flip) {\r\n            if (isBoolean(defaultTransforms.flip.horizontal)) {\r\n                transforms.flip.horizontal = defaultTransforms.flip.horizontal;\r\n            }\r\n            if (isBoolean(defaultTransforms.flip.vertical)) {\r\n                transforms.flip.vertical = defaultTransforms.flip.vertical;\r\n            }\r\n        }\r\n    }\r\n    return transforms;\r\n}\r\nfunction getTransformedImageSize(state) {\r\n    if (state.imageSize && state.imageSize.width && state.imageSize.height) {\r\n        return rotateSize(state.imageSize, state.transforms.rotate);\r\n    }\r\n    else {\r\n        return {\r\n            width: 0,\r\n            height: 0,\r\n        };\r\n    }\r\n}\r\nfunction getMinimumSize(state) {\r\n    // The magic number is the approximation of the handler size\r\n    // Temporary solution that should be improved in the future\r\n    return state.coordinates\r\n        ? Math.min(state.coordinates.width, state.coordinates.height, 20 * getCoefficient(state))\r\n        : 1;\r\n}\r\nfunction getRoundedCoordinates(state, settings) {\r\n    if (isInitializedState(state)) {\r\n        var sizeRestrictions = getSizeRestrictions(state, settings);\r\n        var positionRestrictions = getPositionRestrictions(state, settings);\r\n        var roundCoordinates = {\r\n            width: Math.round(state.coordinates.width),\r\n            height: Math.round(state.coordinates.height),\r\n            left: Math.round(state.coordinates.left),\r\n            top: Math.round(state.coordinates.top),\r\n        };\r\n        if (roundCoordinates.width > sizeRestrictions.maxWidth) {\r\n            roundCoordinates.width = Math.floor(state.coordinates.width);\r\n        }\r\n        else if (roundCoordinates.width < sizeRestrictions.minWidth) {\r\n            roundCoordinates.width = Math.ceil(state.coordinates.width);\r\n        }\r\n        if (roundCoordinates.height > sizeRestrictions.maxHeight) {\r\n            roundCoordinates.height = Math.floor(state.coordinates.height);\r\n        }\r\n        else if (roundCoordinates.height < sizeRestrictions.minHeight) {\r\n            roundCoordinates.height = Math.ceil(state.coordinates.height);\r\n        }\r\n        return moveToPositionRestrictions(roundCoordinates, positionRestrictions);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nfunction isConsistentState(state, settings) {\r\n    if (isInitializedState(state)) {\r\n        return (!getBrokenRatio(ratio(state.coordinates), getAspectRatio(state, settings)) &&\r\n            isConsistentSize(state.visibleArea, getAreaSizeRestrictions(state, settings)) &&\r\n            isConsistentSize(state.coordinates, getSizeRestrictions(state, settings)) &&\r\n            isConsistentPosition(state.visibleArea, getAreaPositionRestrictions(state, settings)) &&\r\n            isConsistentPosition(state.coordinates, getPositionRestrictions(state, settings)));\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport { getAreaPositionRestrictions, getAreaSizeRestrictions, getAspectRatio, getCoefficient, getDefaultCoordinates, getDefaultTransforms, getDefaultVisibleArea, getMinimumSize, getPositionRestrictions, getRoundedCoordinates, getSizeRestrictions, getStencilCoordinates, getTransformedImageSize, isConsistentState, isInitializedState };\r\n", "import { __assign } from 'tslib';\r\nimport { isFunction, isNumeric, parseNumber } from '../utils/index.js';\r\nimport { ratio } from './utils.js';\r\nimport { getPositionRestrictions } from './helpers.js';\r\n\r\nfunction reconcileSizeRestrictions(sizeRestrictions) {\r\n    var restrictions = __assign({}, sizeRestrictions);\r\n    // Process the border cases when minimum height / width larger than maximum height / width\r\n    if (restrictions.minWidth > restrictions.maxWidth) {\r\n        restrictions.minWidth = restrictions.maxWidth;\r\n    }\r\n    if (restrictions.minHeight > restrictions.maxHeight) {\r\n        restrictions.minHeight = restrictions.maxHeight;\r\n    }\r\n    return restrictions;\r\n}\r\nfunction mergeSizeRestrictions(a, b) {\r\n    var first = a;\r\n    var second = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity }, b);\r\n    return reconcileSizeRestrictions({\r\n        maxHeight: Math.min(first.maxHeight, second.maxHeight),\r\n        minHeight: Math.max(first.minHeight, second.minHeight),\r\n        maxWidth: Math.min(first.maxWidth, second.maxWidth),\r\n        minWidth: Math.max(first.minWidth, second.minWidth),\r\n    });\r\n}\r\nfunction calculateSizeRestrictions(state, settings) {\r\n    var sizeRestrictions = isFunction(settings.sizeRestrictions)\r\n        ? settings.sizeRestrictions(state, settings)\r\n        : settings.sizeRestrictions;\r\n    var positionRestrictions = getPositionRestrictions(state, settings);\r\n    // User can forget to set some of restrictions, so we should initialize them by default values\r\n    var restrictions = {\r\n        minWidth: isNumeric(sizeRestrictions.minWidth) ? parseNumber(sizeRestrictions.minWidth) : 0,\r\n        minHeight: isNumeric(sizeRestrictions.minHeight) ? parseNumber(sizeRestrictions.minHeight) : 0,\r\n        maxWidth: isNumeric(sizeRestrictions.maxWidth) ? parseNumber(sizeRestrictions.maxWidth) : Infinity,\r\n        maxHeight: isNumeric(sizeRestrictions.maxHeight) ? parseNumber(sizeRestrictions.maxHeight) : Infinity,\r\n    };\r\n    // The situation, when stencil can't be positioned in cropper due to positionRestrictions should be avoided\r\n    if (positionRestrictions.left !== undefined && positionRestrictions.right !== undefined) {\r\n        restrictions.maxWidth = Math.min(restrictions.maxWidth, positionRestrictions.right - positionRestrictions.left);\r\n    }\r\n    if (positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined) {\r\n        restrictions.maxHeight = Math.min(restrictions.maxHeight, positionRestrictions.bottom - positionRestrictions.top);\r\n    }\r\n    return reconcileSizeRestrictions(restrictions);\r\n}\r\nfunction calculateAreaSizeRestrictions(state, settings) {\r\n    var sizeRestrictions = isFunction(settings.areaSizeRestrictions)\r\n        ? settings.areaSizeRestrictions(state, settings)\r\n        : settings.areaSizeRestrictions;\r\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\r\n        if (ratio(state.boundary) > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\r\n            sizeRestrictions.maxHeight = sizeRestrictions.maxWidth / ratio(state.boundary);\r\n        }\r\n        else {\r\n            sizeRestrictions.maxWidth = sizeRestrictions.maxHeight * ratio(state.boundary);\r\n        }\r\n    }\r\n    return reconcileSizeRestrictions(sizeRestrictions);\r\n}\r\n\r\nexport { calculateAreaSizeRestrictions, calculateSizeRestrictions, mergeSizeRestrictions, reconcileSizeRestrictions };\r\n", "import { deepClone } from '../utils/index.js';\r\n\r\nfunction copyState(state) {\r\n    return deepClone(state);\r\n}\r\n\r\nexport { copyState };\r\n", "var ImageRestriction;\r\n(function (ImageRestriction) {\r\n    ImageRestriction[\"fillArea\"] = \"fillArea\";\r\n    ImageRestriction[\"fitArea\"] = \"fitArea\";\r\n    ImageRestriction[\"stencil\"] = \"stencil\";\r\n    ImageRestriction[\"none\"] = \"none\";\r\n})(ImageRestriction || (ImageRestriction = {}));\r\nvar Priority;\r\n(function (Priority) {\r\n    Priority[\"coordinates\"] = \"coordinates\";\r\n    Priority[\"visibleArea\"] = \"visibleArea\";\r\n})(Priority || (Priority = {}));\r\n\r\nexport { ImageRestriction, Priority };\r\n", "import { getCloserSize, createAspectRatio, resizeToSizeRestrictions } from './utils.js';\r\n\r\n// Limitations:\r\n// 1. Assume that maximum width and height always larger than minimum width and height\r\n// 2. Assume that aspectRatio.minimum < aspectRatio.maximum\r\n// If you break this limitations function could return null!\r\nfunction approximateSize(params) {\r\n    var width = params.width, height = params.height;\r\n    var sizeRestrictions = params.sizeRestrictions || {\r\n        minWidth: 0,\r\n        minHeight: 0,\r\n        maxWidth: Infinity,\r\n        maxHeight: Infinity,\r\n    };\r\n    var aspectRatio = createAspectRatio(params.aspectRatio);\r\n    var coordinates = {\r\n        width: Math.max(sizeRestrictions.minWidth, Math.min(sizeRestrictions.maxWidth, width)),\r\n        height: Math.max(sizeRestrictions.minHeight, Math.min(sizeRestrictions.maxHeight, height)),\r\n    };\r\n    var candidates = [coordinates];\r\n    if (aspectRatio) {\r\n        [aspectRatio.minimum, aspectRatio.maximum].forEach(function (ratio) {\r\n            if (ratio) {\r\n                candidates.push({ width: coordinates.width, height: coordinates.width / ratio }, { width: coordinates.height * ratio, height: coordinates.height });\r\n            }\r\n        });\r\n    }\r\n    // Resize the candidates as much as possible to prevent breaking minimum size\r\n    candidates = candidates.map(function (candidate) { return resizeToSizeRestrictions(candidate, sizeRestrictions); });\r\n    // TODO: fix the type of return value\r\n    return getCloserSize(candidates, { width: width, height: height }, sizeRestrictions, aspectRatio);\r\n}\r\n\r\nexport { approximateSize };\r\n", "import { __assign } from 'tslib';\r\nimport { ratio, applyMove, diff, getCenter, moveToPositionRestrictions } from './utils.js';\r\nimport { getAreaSizeRestrictions, getAreaPositionRestrictions } from './helpers.js';\r\nimport { copyState } from '../state/copyState.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { approximateSize } from './approximateSize.js';\r\n\r\nfunction fitVisibleArea(state, settings) {\r\n    var result = copyState(state);\r\n    if (state.visibleArea) {\r\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\r\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\r\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\r\n            width: state.visibleArea.width,\r\n            height: state.visibleArea.height,\r\n            aspectRatio: {\r\n                minimum: ratio(result.boundary),\r\n                maximum: ratio(result.boundary),\r\n            },\r\n            sizeRestrictions: areaSizeRestrictions,\r\n        }));\r\n        // Return the visible area to previous center\r\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\r\n        // Fit the visible area to positions restrictions\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n    }\r\n    return result;\r\n}\r\n\r\nexport { fitVisibleArea };\r\n", "import 'tslib';\r\nimport { moveToPositionRestrictions, applyMove } from '../service/utils.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction moveCoordinatesAlgorithm(coordinates, directions, positionRestrictions) {\r\n    var movedCoordinates = applyMove(coordinates, directions);\r\n    return positionRestrictions ? moveToPositionRestrictions(movedCoordinates, positionRestrictions) : movedCoordinates;\r\n}\r\n\r\nexport { moveCoordinatesAlgorithm };\r\n", "import { __assign } from 'tslib';\r\nimport { emptyCoordinates, isUndefined } from '../utils/index.js';\r\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions, applyScale, maxScale, applyMove, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\r\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions } from '../service/helpers.js';\r\nimport { copyState } from './copyState.js';\r\nimport '../types/index.js';\r\nimport { approximateSize } from '../service/approximateSize.js';\r\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\r\nimport { moveCoordinatesAlgorithm } from '../algorithms/moveCoordinatesAlgorithm.js';\r\n\r\nvar SetCoordinatesMode;\r\n(function (SetCoordinatesMode) {\r\n    SetCoordinatesMode[\"limit\"] = \"limit\";\r\n    SetCoordinatesMode[\"zoom\"] = \"zoom\";\r\n    SetCoordinatesMode[\"unsafe\"] = \"unsafe\";\r\n})(SetCoordinatesMode || (SetCoordinatesMode = {}));\r\nfunction setCoordinates(state, settings, transform, \r\n// If you set mode to `false`, the coordinates can leave the visible area\r\nmode) {\r\n    if (mode === void 0) { mode = true; }\r\n    var currentMode = mode === false ? SetCoordinatesMode.unsafe : mode === true ? SetCoordinatesMode.zoom : mode;\r\n    var aspectRatio = getAspectRatio(state, settings);\r\n    var sizeRestrictions = getSizeRestrictions(state, settings);\r\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\r\n        sizeRestrictions = __assign(__assign({}, sizeRestrictions), { minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth), minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight), maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth), maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight) });\r\n    }\r\n    var positionRestrictions = getPositionRestrictions(state, settings);\r\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\r\n        positionRestrictions = mergePositionRestrictions(positionRestrictions, coordinatesToPositionRestrictions(state.visibleArea));\r\n    }\r\n    var move = function (prevCoordinates, newCoordinates) {\r\n        return moveCoordinatesAlgorithm(prevCoordinates, {\r\n            left: newCoordinates.left - (prevCoordinates.left || 0),\r\n            top: newCoordinates.top - (prevCoordinates.top || 0),\r\n        }, positionRestrictions);\r\n    };\r\n    var resize = function (prevCoordinates, newCoordinates) {\r\n        var coordinates = __assign(__assign(__assign({}, prevCoordinates), approximateSize({\r\n            width: newCoordinates.width,\r\n            height: newCoordinates.height,\r\n            sizeRestrictions: sizeRestrictions,\r\n            aspectRatio: aspectRatio,\r\n        })), { left: 0, top: 0 });\r\n        return move(coordinates, {\r\n            left: prevCoordinates.left || 0,\r\n            top: prevCoordinates.top || 0,\r\n        });\r\n    };\r\n    var coordinates = state.coordinates ? __assign({}, state.coordinates) : emptyCoordinates();\r\n    var transforms = Array.isArray(transform) ? transform : [transform];\r\n    transforms.forEach(function (transform) {\r\n        var changes;\r\n        if (typeof transform === 'function') {\r\n            changes = transform(__assign(__assign({}, state), { coordinates: coordinates }), settings);\r\n        }\r\n        else {\r\n            changes = transform;\r\n        }\r\n        if (changes) {\r\n            if (!isUndefined(changes.width) || !isUndefined(changes.height)) {\r\n                coordinates = resize(coordinates, __assign(__assign({}, coordinates), changes));\r\n            }\r\n            if (!isUndefined(changes.left) || !isUndefined(changes.top)) {\r\n                coordinates = move(coordinates, __assign(__assign({}, coordinates), changes));\r\n            }\r\n        }\r\n    });\r\n    var result = __assign(__assign({}, copyState(state)), { coordinates: coordinates });\r\n    if (result.visibleArea && currentMode === SetCoordinatesMode.zoom) {\r\n        var widthIntersections = Math.max(0, result.coordinates.width - result.visibleArea.width);\r\n        var heightIntersections = Math.max(0, result.coordinates.height - result.visibleArea.height);\r\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\r\n        var scale = widthIntersections > heightIntersections\r\n            ? result.coordinates.width / result.visibleArea.width\r\n            : result.coordinates.height / result.visibleArea.height;\r\n        if (scale > 1) {\r\n            result.visibleArea = applyScale(result.visibleArea, Math.min(scale, maxScale(result.visibleArea, areaSizeRestrictions)));\r\n        }\r\n        result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\r\n        return fitVisibleArea(result, settings);\r\n    }\r\n    else {\r\n        return result;\r\n    }\r\n}\r\n\r\nexport { SetCoordinatesMode, setCoordinates };\r\n", "import { __assign } from 'tslib';\r\nimport { applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from './utils.js';\r\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions } from './helpers.js';\r\nimport { copyState } from '../state/copyState.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { approximateSize } from './approximateSize.js';\r\n\r\nfunction fitCoordinates(state, settings) {\r\n    if (state.coordinates) {\r\n        var result = copyState(state);\r\n        var aspectRatio = getAspectRatio(state, settings);\r\n        var sizeRestrictions = getSizeRestrictions(state, settings);\r\n        // Fit the size of coordinates to existing size restrictions and visible area\r\n        result.coordinates = __assign(__assign({}, state.coordinates), approximateSize({\r\n            width: state.coordinates.width,\r\n            height: state.coordinates.height,\r\n            aspectRatio: aspectRatio,\r\n            sizeRestrictions: state.visibleArea\r\n                ? {\r\n                    maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth),\r\n                    maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight),\r\n                    minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight),\r\n                    minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth),\r\n                }\r\n                : sizeRestrictions,\r\n        }));\r\n        // Return the coordinates to the previous center\r\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\r\n        // Fit the coordinates to position restrictions and visible area\r\n        result.coordinates = moveToPositionRestrictions(result.coordinates, state.visibleArea\r\n            ? mergePositionRestrictions(coordinatesToPositionRestrictions(state.visibleArea), getPositionRestrictions(result, settings))\r\n            : getPositionRestrictions(result, settings));\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { fitCoordinates };\r\n", "import { __assign } from 'tslib';\r\nimport { copyState } from './copyState.js';\r\nimport { fitCoordinates } from '../service/fitCoordinates.js';\r\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\r\n\r\nfunction setVisibleArea(state, settings, visibleArea, \r\n// If you set safe to `false`, the coordinates will be able to leave the visible area\r\nsafe) {\r\n    if (safe === void 0) { safe = true; }\r\n    var result = __assign(__assign({}, copyState(state)), { visibleArea: visibleArea });\r\n    // There is no possibility to break visible area limitations.\r\n    result = fitVisibleArea(result, settings);\r\n    if (safe) {\r\n        result = fitCoordinates(result, settings);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport { setVisibleArea };\r\n", "import 'tslib';\r\nimport { getDefaultTransforms, getDefaultVisibleArea, getDefaultCoordinates } from '../service/helpers.js';\r\nimport { Priority } from '../types/index.js';\r\nimport { setCoordinates, SetCoordinatesMode } from './setCoordinates.js';\r\nimport { setVisibleArea } from './setVisibleArea.js';\r\n\r\nfunction createState(options, settings) {\r\n    var _a, _b, _c, _d, _e;\r\n    var boundary = options.boundary, image = options.image;\r\n    var state = {\r\n        boundary: {\r\n            width: boundary.width,\r\n            height: boundary.height,\r\n        },\r\n        imageSize: {\r\n            width: image.width,\r\n            height: image.height,\r\n        },\r\n        transforms: {\r\n            rotate: ((_a = image.transforms) === null || _a === void 0 ? void 0 : _a.rotate) || 0,\r\n            flip: {\r\n                horizontal: ((_c = (_b = image.transforms) === null || _b === void 0 ? void 0 : _b.flip) === null || _c === void 0 ? void 0 : _c.horizontal) || false,\r\n                vertical: ((_e = (_d = image.transforms) === null || _d === void 0 ? void 0 : _d.flip) === null || _e === void 0 ? void 0 : _e.vertical) || false,\r\n            },\r\n        },\r\n        visibleArea: null,\r\n        coordinates: null,\r\n    };\r\n    if (settings.defaultTransforms) {\r\n        state.transforms = getDefaultTransforms(state, settings);\r\n    }\r\n    if (settings.priority === Priority.visibleArea) {\r\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), false);\r\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.limit);\r\n    }\r\n    else {\r\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.unsafe);\r\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), true);\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { createState };\r\n", "import 'tslib';\r\nimport { applyMove, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\r\nimport { isInitializedState, getPositionRestrictions } from '../service/helpers.js';\r\nimport { copyState } from './copyState.js';\r\nimport '../types/index.js';\r\nimport './setCoordinates.js';\r\n\r\nfunction moveCoordinates(state, settings, directions) {\r\n    if (isInitializedState(state)) {\r\n        var result = copyState(state);\r\n        result.coordinates = applyMove(result.coordinates, directions);\r\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { moveCoordinates };\r\n", "import { __assign } from 'tslib';\r\nimport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS } from '../constants/index.js';\r\nimport { isGreater, isRoughlyEqual } from '../utils/index.js';\r\nimport { moveToPositionRestrictions, applyDirections, getIntersections, getOppositeSide, ratio, getBrokenRatio, applyMove, diff } from '../service/utils.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { moveCoordinatesAlgorithm } from './moveCoordinatesAlgorithm.js';\r\n\r\nfunction fitDirections(_a) {\r\n    var coordinates = _a.coordinates, directions = _a.directions, positionRestrictions = _a.positionRestrictions, sizeRestrictions = _a.sizeRestrictions, preserveRatio = _a.preserveRatio, allowedDirections = _a.allowedDirections, _b = _a.compensate, compensate = _b === void 0 ? true : _b;\r\n    var fittedDirections = __assign({}, directions);\r\n    var currentWidth = applyDirections(coordinates, fittedDirections).width;\r\n    var currentHeight = applyDirections(coordinates, fittedDirections).height;\r\n    // Prevent strange resizes when the width or height of stencil becomes smaller than 0\r\n    if (currentWidth < 0) {\r\n        if (fittedDirections.left < 0 && fittedDirections.right < 0) {\r\n            fittedDirections.left =\r\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.left / fittedDirections.right);\r\n            fittedDirections.right =\r\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.right / fittedDirections.left);\r\n        }\r\n        else if (fittedDirections.left < 0) {\r\n            fittedDirections.left = -(coordinates.width - sizeRestrictions.minWidth);\r\n        }\r\n        else if (fittedDirections.right < 0) {\r\n            fittedDirections.right = -(coordinates.width - sizeRestrictions.minWidth);\r\n        }\r\n    }\r\n    if (currentHeight < 0) {\r\n        if (fittedDirections.top < 0 && fittedDirections.bottom < 0) {\r\n            fittedDirections.top =\r\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.top / fittedDirections.bottom);\r\n            fittedDirections.bottom =\r\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.bottom / fittedDirections.top);\r\n        }\r\n        else if (fittedDirections.top < 0) {\r\n            fittedDirections.top = -(coordinates.height - sizeRestrictions.minHeight);\r\n        }\r\n        else if (fittedDirections.bottom < 0) {\r\n            fittedDirections.bottom = -(coordinates.height - sizeRestrictions.minHeight);\r\n        }\r\n    }\r\n    // Prevent breaking limits\r\n    var breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\r\n    var canBeCompensated = ALL_DIRECTIONS.every(function (direction) {\r\n        return !isGreater(breaks[getOppositeSide(direction)], 0) || allowedDirections[direction];\r\n    });\r\n    if (compensate && canBeCompensated) {\r\n        if (breaks.left && breaks.left > 0 && breaks.right === 0) {\r\n            fittedDirections.right += breaks.left;\r\n            fittedDirections.left -= breaks.left;\r\n        }\r\n        else if (breaks.right && breaks.right > 0 && breaks.left === 0) {\r\n            fittedDirections.left += breaks.right;\r\n            fittedDirections.right -= breaks.right;\r\n        }\r\n        if (breaks.top && breaks.top > 0 && breaks.bottom === 0) {\r\n            fittedDirections.bottom += breaks.top;\r\n            fittedDirections.top -= breaks.top;\r\n        }\r\n        else if (breaks.bottom && breaks.bottom > 0 && breaks.top === 0) {\r\n            fittedDirections.top += breaks.bottom;\r\n            fittedDirections.bottom -= breaks.bottom;\r\n        }\r\n        breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\r\n    }\r\n    var maxResize = {\r\n        width: Infinity,\r\n        height: Infinity,\r\n        left: Infinity,\r\n        right: Infinity,\r\n        top: Infinity,\r\n        bottom: Infinity,\r\n    };\r\n    ALL_DIRECTIONS.forEach(function (direction) {\r\n        var intersection = breaks[direction];\r\n        if (intersection && fittedDirections[direction]) {\r\n            maxResize[direction] = Math.max(0, 1 - intersection / fittedDirections[direction]);\r\n        }\r\n    });\r\n    if (preserveRatio) {\r\n        var multiplier_1 = Math.min.apply(Math, ALL_DIRECTIONS.map(function (direction) { return maxResize[direction]; }));\r\n        if (multiplier_1 !== Infinity) {\r\n            ALL_DIRECTIONS.forEach(function (direction) {\r\n                fittedDirections[direction] *= multiplier_1;\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        ALL_DIRECTIONS.forEach(function (direction) {\r\n            if (maxResize[direction] !== Infinity) {\r\n                fittedDirections[direction] *= maxResize[direction];\r\n            }\r\n        });\r\n    }\r\n    currentWidth = applyDirections(coordinates, fittedDirections).width;\r\n    currentHeight = applyDirections(coordinates, fittedDirections).height;\r\n    if (fittedDirections.right + fittedDirections.left) {\r\n        if (currentWidth > sizeRestrictions.maxWidth) {\r\n            maxResize.width =\r\n                (sizeRestrictions.maxWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\r\n        }\r\n        else if (currentWidth < sizeRestrictions.minWidth) {\r\n            maxResize.width =\r\n                (sizeRestrictions.minWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\r\n        }\r\n    }\r\n    if (fittedDirections.bottom + fittedDirections.top) {\r\n        if (currentHeight > sizeRestrictions.maxHeight) {\r\n            maxResize.height =\r\n                (sizeRestrictions.maxHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\r\n        }\r\n        else if (currentHeight < sizeRestrictions.minHeight) {\r\n            maxResize.height =\r\n                (sizeRestrictions.minHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\r\n        }\r\n    }\r\n    if (preserveRatio) {\r\n        var multiplier_2 = Math.min(maxResize.width, maxResize.height);\r\n        if (multiplier_2 !== Infinity) {\r\n            ALL_DIRECTIONS.forEach(function (direction) {\r\n                fittedDirections[direction] *= multiplier_2;\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        if (maxResize.width !== Infinity) {\r\n            HORIZONTAL_DIRECTIONS.forEach(function (direction) {\r\n                fittedDirections[direction] *= maxResize.width;\r\n            });\r\n        }\r\n        if (maxResize.height !== Infinity) {\r\n            VERTICAL_DIRECTIONS.forEach(function (direction) {\r\n                fittedDirections[direction] *= maxResize.height;\r\n            });\r\n        }\r\n    }\r\n    return fittedDirections;\r\n}\r\nfunction distributeOverlap(overlap, first, second) {\r\n    if (isRoughlyEqual(first + second, 0)) {\r\n        return overlap / 2;\r\n    }\r\n    else if (isRoughlyEqual(first, 0)) {\r\n        return 0;\r\n    }\r\n    else if (isRoughlyEqual(second, 0)) {\r\n        return overlap;\r\n    }\r\n    else {\r\n        return overlap * Math.abs(first / (first + second));\r\n    }\r\n}\r\nfunction resizeCoordinatesAlgorithm(coordinates, directions, options, limitations) {\r\n    var aspectRatio = limitations.aspectRatio, positionRestrictions = limitations.positionRestrictions, sizeRestrictions = limitations.sizeRestrictions;\r\n    var actualCoordinates = __assign({}, coordinates);\r\n    directions = __assign({}, directions);\r\n    var allowedDirections = options.allowedDirections || {\r\n        left: true,\r\n        right: true,\r\n        bottom: true,\r\n        top: true,\r\n    };\r\n    // It's possible that coordinates can be smaller than minimum width or minimum height. In this case\r\n    // corresponding resize should be blocked\r\n    if (coordinates.width < sizeRestrictions.minWidth) {\r\n        directions.left = 0;\r\n        directions.right = 0;\r\n    }\r\n    if (coordinates.height < sizeRestrictions.minHeight) {\r\n        directions.top = 0;\r\n        directions.bottom = 0;\r\n    }\r\n    ALL_DIRECTIONS.forEach(function (direction) {\r\n        if (!allowedDirections[direction]) {\r\n            directions[direction] = 0;\r\n        }\r\n    });\r\n    // 1. First step: determine the safe and desired area\r\n    directions = fitDirections({\r\n        coordinates: actualCoordinates,\r\n        directions: directions,\r\n        sizeRestrictions: sizeRestrictions,\r\n        positionRestrictions: positionRestrictions,\r\n        allowedDirections: allowedDirections,\r\n    });\r\n    // 2. Second step: fix desired box to correspondent to aspect ratio\r\n    var currentWidth = applyDirections(actualCoordinates, directions).width;\r\n    var currentHeight = applyDirections(actualCoordinates, directions).height;\r\n    // Checks ratio:\r\n    var ratioBroken = options.preserveAspectRatio\r\n        ? ratio(actualCoordinates)\r\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\r\n    if (ratioBroken) {\r\n        var respectDirection = options.respectDirection;\r\n        if (respectDirection !== 'width' && respectDirection !== 'height') {\r\n            if (actualCoordinates.width >= actualCoordinates.height || ratioBroken === 1) {\r\n                respectDirection = 'width';\r\n            }\r\n            else {\r\n                respectDirection = 'height';\r\n            }\r\n        }\r\n        if (respectDirection === 'width') {\r\n            var overlapHeight = currentWidth / ratioBroken - actualCoordinates.height;\r\n            if (allowedDirections.top && allowedDirections.bottom) {\r\n                var top_1 = directions.top, bottom = directions.bottom;\r\n                directions.bottom = distributeOverlap(overlapHeight, bottom, top_1);\r\n                directions.top = distributeOverlap(overlapHeight, top_1, bottom);\r\n            }\r\n            else if (allowedDirections.bottom) {\r\n                directions.bottom = overlapHeight;\r\n            }\r\n            else if (allowedDirections.top) {\r\n                directions.top = overlapHeight;\r\n            }\r\n            else if (allowedDirections.right) {\r\n                directions.right = 0;\r\n            }\r\n            else if (allowedDirections.left) {\r\n                directions.left = 0;\r\n            }\r\n        }\r\n        else if (respectDirection === 'height') {\r\n            var overlapWidth = actualCoordinates.width - currentHeight * ratioBroken;\r\n            if (allowedDirections.left && allowedDirections.right) {\r\n                var left = directions.left, right = directions.right;\r\n                directions.left = -distributeOverlap(overlapWidth, left, right);\r\n                directions.right = -distributeOverlap(overlapWidth, right, left);\r\n            }\r\n            else if (allowedDirections.left) {\r\n                directions.left = -overlapWidth;\r\n            }\r\n            else if (allowedDirections.right) {\r\n                directions.right = -overlapWidth;\r\n            }\r\n            else if (allowedDirections.top) {\r\n                directions.top = 0;\r\n            }\r\n            else if (allowedDirections.bottom) {\r\n                directions.bottom = 0;\r\n            }\r\n        }\r\n        // 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\r\n        directions = fitDirections({\r\n            directions: directions,\r\n            coordinates: actualCoordinates,\r\n            sizeRestrictions: sizeRestrictions,\r\n            positionRestrictions: positionRestrictions,\r\n            preserveRatio: true,\r\n            compensate: options.compensate,\r\n            allowedDirections: allowedDirections,\r\n        });\r\n    }\r\n    // 4. Check if ratio broken (temporary):\r\n    currentWidth = applyDirections(actualCoordinates, directions).width;\r\n    currentHeight = applyDirections(actualCoordinates, directions).height;\r\n    ratioBroken = options.preserveAspectRatio\r\n        ? ratio(actualCoordinates)\r\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\r\n    if (ratioBroken && isGreater(Math.abs(ratioBroken - currentWidth / currentHeight), 0)) {\r\n        ALL_DIRECTIONS.forEach(function (direction) {\r\n            directions[direction] = 0;\r\n        });\r\n    }\r\n    return moveCoordinatesAlgorithm({\r\n        width: coordinates.width + directions.right + directions.left,\r\n        height: coordinates.height + directions.top + directions.bottom,\r\n        left: coordinates.left,\r\n        top: coordinates.top,\r\n    }, {\r\n        left: -directions.left,\r\n        top: -directions.top,\r\n    }, positionRestrictions);\r\n}\r\nfunction anchorToMassPoint(coordinates, anchor) {\r\n    var plainAnchor = anchor.toLowerCase();\r\n    return {\r\n        left: coordinates.left +\r\n            coordinates.width * (plainAnchor.indexOf('west') !== -1 ? 1 : plainAnchor.indexOf('east') !== -1 ? 0 : 0.5),\r\n        top: coordinates.top +\r\n            coordinates.height *\r\n                (plainAnchor.indexOf('north') !== -1 ? 1 : plainAnchor.indexOf('south') !== -1 ? 0 : 0.5),\r\n    };\r\n}\r\nfunction anchorToAllowedDirections(anchor) {\r\n    var plainAnchor = anchor.toLowerCase();\r\n    return {\r\n        left: plainAnchor.indexOf('east') === -1,\r\n        top: plainAnchor.indexOf('south') === -1,\r\n        right: plainAnchor.indexOf('west') === -1,\r\n        bottom: plainAnchor.indexOf('north') === -1,\r\n    };\r\n}\r\nfunction anchorMoveToResizeDirections(anchor, directions) {\r\n    var plainAnchor = anchor.toLowerCase();\r\n    var normalizedDirections = {\r\n        left: plainAnchor.indexOf('west') === -1 ? directions.left : -directions.left,\r\n        top:  -directions.top,\r\n        right: directions.left,\r\n        bottom: directions.top,\r\n    };\r\n    if (['north', 'south', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\r\n        normalizedDirections.top = 0;\r\n        normalizedDirections.bottom = 0;\r\n    }\r\n    if (['west', 'east', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\r\n        normalizedDirections.left = 0;\r\n        normalizedDirections.right = 0;\r\n    }\r\n    var allowedDirections = anchorToAllowedDirections(anchor);\r\n    ALL_DIRECTIONS.forEach(function (direction) {\r\n        if (!allowedDirections[direction]) {\r\n            normalizedDirections[direction] = 0;\r\n        }\r\n    });\r\n    return normalizedDirections;\r\n}\r\nfunction anchoredResizeCoordinatesAlgorithm(coordinates, anchor, directions, options, limitations) {\r\n    var reference = options.reference;\r\n    var resizeDirections = anchorMoveToResizeDirections(anchor, directions);\r\n    var allowedDirections = anchorToAllowedDirections(anchor);\r\n    var result = resizeCoordinatesAlgorithm(coordinates, resizeDirections, __assign(__assign({}, options), { allowedDirections: allowedDirections }), limitations);\r\n    if (reference) {\r\n        // Move the result to anchor\r\n        result = applyMove(result, diff(anchorToMassPoint(reference, anchor), anchorToMassPoint(result, anchor)));\r\n    }\r\n    return moveToPositionRestrictions(result, limitations.positionRestrictions);\r\n}\r\n\r\nexport { anchorMoveToResizeDirections, anchorToAllowedDirections, anchoredResizeCoordinatesAlgorithm, fitDirections, resizeCoordinatesAlgorithm };\r\n", "import { __assign } from 'tslib';\r\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\r\nimport { getMinimumSize, getSizeRestrictions, isInitializedState, getPositionRestrictions, getAspectRatio } from '../service/helpers.js';\r\nimport { copyState } from './copyState.js';\r\nimport '../types/index.js';\r\nimport './setCoordinates.js';\r\nimport { anchoredResizeCoordinatesAlgorithm } from '../algorithms/resizeCoordinatesAlgorithm.js';\r\n\r\nfunction resizeCoordinates(state, settings, anchor, directions, options) {\r\n    var minimumSize = getMinimumSize(state);\r\n    var sizeRestrictions = getSizeRestrictions(state, settings);\r\n    return isInitializedState(state)\r\n        ? __assign(__assign({}, copyState(state)), { coordinates: anchoredResizeCoordinatesAlgorithm(state.coordinates, anchor, directions, options, {\r\n                positionRestrictions: mergePositionRestrictions(getPositionRestrictions(state, settings), coordinatesToPositionRestrictions(state.visibleArea)),\r\n                sizeRestrictions: {\r\n                    maxWidth: Math.min(sizeRestrictions.maxWidth, state.visibleArea.width),\r\n                    maxHeight: Math.min(sizeRestrictions.maxHeight, state.visibleArea.height),\r\n                    minWidth: Math.max(Math.min(sizeRestrictions.minWidth, state.visibleArea.width), minimumSize),\r\n                    minHeight: Math.max(Math.min(sizeRestrictions.minHeight, state.visibleArea.height), minimumSize),\r\n                },\r\n                aspectRatio: getAspectRatio(state, settings),\r\n            }) }) : state;\r\n}\r\n\r\nexport { resizeCoordinates };\r\n", "import { __assign } from 'tslib';\r\nimport { ratio, applyScale, resizeToSizeRestrictions, inverseMove, fitToPositionRestrictions, coordinatesToPositionRestrictions, applyMove, moveToPositionRestrictions } from '../service/utils.js';\r\nimport { getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\r\nimport { copyState } from './copyState.js';\r\nimport '../types/index.js';\r\nimport './setCoordinates.js';\r\nimport { fitCoordinates } from '../service/fitCoordinates.js';\r\n\r\nfunction setBoundary(state, settings, boundary) {\r\n    var result = __assign(__assign({}, copyState(state)), { boundary: boundary });\r\n    if (result.visibleArea && result.coordinates && state.visibleArea) {\r\n        // Scale visible area size to fit new boundary:\r\n        result.visibleArea.height = result.visibleArea.width / ratio(boundary);\r\n        result.visibleArea.top += (state.visibleArea.height - result.visibleArea.height) / 2;\r\n        // Scale visible area to prevent overlap coordinates (and its minimum size)\r\n        var sizeRestrictions = getSizeRestrictions(result, settings);\r\n        if (Math.max(sizeRestrictions.minHeight, result.coordinates.height) - result.visibleArea.height > 0 ||\r\n            Math.max(sizeRestrictions.minWidth, result.coordinates.width) - result.visibleArea.width > 0) {\r\n            result.visibleArea = applyScale(result.visibleArea, Math.max(Math.max(sizeRestrictions.minHeight, result.coordinates.height) / result.visibleArea.height, Math.max(sizeRestrictions.minWidth, result.coordinates.width) / result.visibleArea.width));\r\n        }\r\n        // Scale visible area to prevent overlap area restrictions\r\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\r\n        // Move visible are to prevent moving of the coordinates:\r\n        var move = inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea)));\r\n        if (result.visibleArea.width < result.coordinates.width) {\r\n            move.left = 0;\r\n        }\r\n        if (result.visibleArea.height < result.coordinates.height) {\r\n            move.top = 0;\r\n        }\r\n        result.visibleArea = applyMove(result.visibleArea, move);\r\n        // Move visible area to prevent overlap the area restrictions\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n        result = fitCoordinates(result, settings);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport { setBoundary };\r\n", "import { __assign } from 'tslib';\r\nimport { isNumber } from '../utils/index.js';\r\nimport { rotatePoint, getCenter, diff, resizeToSizeRestrictions, moveToPositionRestrictions, applyMove } from '../service/utils.js';\r\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\r\nimport { isInitializedState, getTransformedImageSize, getSizeRestrictions, getAspectRatio, getAreaSizeRestrictions, getPositionRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\r\nimport { copyState } from '../state/copyState.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { approximateSize } from '../service/approximateSize.js';\r\n\r\nfunction rotateImageAlgorithm(state, settings, rotate) {\r\n    if (isInitializedState(state)) {\r\n        var result = copyState(state);\r\n        var angle = isNumber(rotate) ? rotate : rotate.angle;\r\n        var imageCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, getTransformedImageSize(state))), angle);\r\n        result.transforms.rotate += angle;\r\n        result.coordinates = __assign(__assign({}, approximateSize({\r\n            sizeRestrictions: getSizeRestrictions(result, settings),\r\n            aspectRatio: getAspectRatio(result, settings),\r\n            width: result.coordinates.width,\r\n            height: result.coordinates.height,\r\n        })), rotatePoint(getCenter(result.coordinates), angle));\r\n        var center = !isNumber(rotate) && rotate.center ? rotate.center : getCenter(state.coordinates);\r\n        var shift = diff(getCenter(state.coordinates), rotatePoint(getCenter(state.coordinates), angle, center));\r\n        var imageSize = getTransformedImageSize(result);\r\n        result.coordinates.left -= imageCenter.left - imageSize.width / 2 + result.coordinates.width / 2 - shift.left;\r\n        result.coordinates.top -= imageCenter.top - imageSize.height / 2 + result.coordinates.height / 2 - shift.top;\r\n        // Check that visible area doesn't break the area restrictions:\r\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, mergeSizeRestrictions(getAreaSizeRestrictions(result, settings), {\r\n            minWidth: result.coordinates.width,\r\n            minHeight: result.coordinates.height,\r\n        }));\r\n        result.coordinates = moveToPositionRestrictions(result.coordinates, getPositionRestrictions(result, settings));\r\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(state.coordinates)));\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { rotateImageAlgorithm };\r\n", "import 'tslib';\r\nimport { rotatePoint, getCenter, applyMove, diff, moveToPositionRestrictions } from '../service/utils.js';\r\nimport { isInitializedState, getTransformedImageSize, getAreaPositionRestrictions } from '../service/helpers.js';\r\nimport { copyState } from '../state/copyState.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction flipImageAlgorithm(state, settings, horizontal, vertical) {\r\n    if (isInitializedState(state)) {\r\n        var result = copyState(state);\r\n        var rotate = state.transforms.rotate;\r\n        var imageSize = getTransformedImageSize(state);\r\n        var changed = {\r\n            horizontal: horizontal,\r\n            vertical: vertical,\r\n        };\r\n        if (changed.horizontal || changed.vertical) {\r\n            var imageCenter = rotatePoint({\r\n                left: imageSize.width / 2,\r\n                top: imageSize.height / 2,\r\n            }, -rotate);\r\n            var oldCenter = rotatePoint(getCenter(result.coordinates), -rotate);\r\n            var newCenter = rotatePoint({\r\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\r\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\r\n            }, rotate);\r\n            result.coordinates = applyMove(result.coordinates, diff(newCenter, getCenter(result.coordinates)));\r\n            oldCenter = rotatePoint(getCenter(result.visibleArea), -rotate);\r\n            newCenter = rotatePoint({\r\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\r\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\r\n            }, rotate);\r\n            result.visibleArea = applyMove(result.visibleArea, diff(newCenter, getCenter(result.visibleArea)));\r\n            result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n        }\r\n        if (changed.horizontal) {\r\n            result.transforms.flip.horizontal = !state.transforms.flip.horizontal;\r\n        }\r\n        if (changed.vertical) {\r\n            result.transforms.flip.vertical = !state.transforms.flip.vertical;\r\n        }\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { flipImageAlgorithm };\r\n", "import 'tslib';\r\nimport { isNumber, isRoughlyEqual } from '../utils/index.js';\r\nimport { applyMove, maxScale, positionToSizeRestrictions, minScale, applyScale, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions, getCenter, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\r\nimport { isInitializedState, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\r\nimport { copyState } from '../state/copyState.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction transformImageAlgorithm(state, settings, transform) {\r\n    var _a;\r\n    var _b = transform.scale, scale = _b === void 0 ? 1 : _b, _c = transform.move, move = _c === void 0 ? {} : _c;\r\n    if (isInitializedState(state)) {\r\n        var result = copyState(state);\r\n        // It's reversed because zooming in the image is actually zooming out visible area\r\n        var scaleFactor = 1 / (isNumber(scale) ? scale : scale.factor);\r\n        var scaleCenter = !isNumber(scale) ? scale.center : undefined;\r\n        var isAllowedScale = !isRoughlyEqual(scaleFactor, 1);\r\n        var areaScale = 1;\r\n        var stencilScale = 1;\r\n        result.visibleArea = applyMove(result.visibleArea, {\r\n            left: move.left || 0,\r\n            top: move.top || 0,\r\n        });\r\n        var sizeRestrictions = getSizeRestrictions(result, settings);\r\n        var positionRestrictions = getPositionRestrictions(result, settings);\r\n        var areaSizeRestrictions = getAreaSizeRestrictions(result, settings);\r\n        var scaleRestrictions = {\r\n            stencil: {\r\n                minimum: Math.max(sizeRestrictions.minWidth ? sizeRestrictions.minWidth / result.coordinates.width : 0, sizeRestrictions.minHeight ? sizeRestrictions.minHeight / result.coordinates.height : 0),\r\n                maximum: Math.min(sizeRestrictions.maxWidth ? sizeRestrictions.maxWidth / result.coordinates.width : Infinity, sizeRestrictions.maxHeight ? sizeRestrictions.maxHeight / result.coordinates.height : Infinity, maxScale(result.coordinates, positionToSizeRestrictions(positionRestrictions))),\r\n            },\r\n            area: {\r\n                maximum: maxScale(result.visibleArea, areaSizeRestrictions),\r\n                minimum: minScale(result.visibleArea, areaSizeRestrictions),\r\n            },\r\n        };\r\n        // If there is scaling then begin scale\r\n        if (scaleFactor && isAllowedScale) {\r\n            // Determine scale factor\r\n            if (scaleFactor < 1) {\r\n                stencilScale = Math.max(scaleFactor, Math.max(scaleRestrictions.area.minimum, scaleRestrictions.stencil.minimum));\r\n                if (stencilScale > 1) {\r\n                    stencilScale = 1;\r\n                }\r\n            }\r\n            else if (scaleFactor > 1) {\r\n                stencilScale = Math.min(scaleFactor, Math.min(scaleRestrictions.area.maximum, scaleRestrictions.stencil.maximum));\r\n                if (stencilScale < 1) {\r\n                    stencilScale = 1;\r\n                }\r\n            }\r\n        }\r\n        if (stencilScale) {\r\n            // Resize stencil with area as much as possible\r\n            result.visibleArea = applyScale(result.visibleArea, stencilScale, scaleCenter);\r\n        }\r\n        var relativeCoordinates = {\r\n            left: state.coordinates.left - state.visibleArea.left,\r\n            right: state.visibleArea.width + state.visibleArea.left - (state.coordinates.width + state.coordinates.left),\r\n            top: state.coordinates.top - state.visibleArea.top,\r\n            bottom: state.visibleArea.height + state.visibleArea.top - (state.coordinates.height + state.coordinates.top),\r\n        };\r\n        // Move the area to fit to the coordinates limits:\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, {\r\n            left: positionRestrictions.left !== undefined\r\n                ? positionRestrictions.left - relativeCoordinates.left * stencilScale\r\n                : undefined,\r\n            top: positionRestrictions.top !== undefined\r\n                ? positionRestrictions.top - relativeCoordinates.top * stencilScale\r\n                : undefined,\r\n            bottom: positionRestrictions.bottom !== undefined\r\n                ? positionRestrictions.bottom + relativeCoordinates.bottom * stencilScale\r\n                : undefined,\r\n            right: positionRestrictions.right !== undefined\r\n                ? positionRestrictions.right + relativeCoordinates.right * stencilScale\r\n                : undefined,\r\n        });\r\n        // But the more important to fit are to the area restrictions, so we should fit it to that restrictions:\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n        // Set the same coordinates of stencil inside visible area\r\n        result.coordinates.width = result.coordinates.width * stencilScale;\r\n        result.coordinates.height = result.coordinates.height * stencilScale;\r\n        result.coordinates.left = result.visibleArea.left + relativeCoordinates.left * stencilScale;\r\n        result.coordinates.top = result.visibleArea.top + relativeCoordinates.top * stencilScale;\r\n        // Move the coordinates to prevent the intersection with visible area and position restrictions\r\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), positionRestrictions));\r\n        // Resize only area if stencil can't be resized and stencil resize is disabled\r\n        if (isAllowedScale && scaleFactor && ((_a = settings.transformImage) === null || _a === void 0 ? void 0 : _a.adjustStencil)) {\r\n            if (scaleFactor > 1) {\r\n                areaScale = Math.min(scaleRestrictions.area.maximum, scaleFactor) / stencilScale;\r\n            }\r\n            else if (scaleFactor < 1) {\r\n                areaScale = Math.max(result.coordinates.height / result.visibleArea.height, result.coordinates.width / result.visibleArea.width, scaleFactor / stencilScale);\r\n            }\r\n            if (areaScale !== 1) {\r\n                result.visibleArea = applyScale(result.visibleArea, areaScale, scaleFactor > 1 ? scaleCenter : getCenter(result.coordinates));\r\n                // Move to prevent the breaking of the area restrictions:\r\n                result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n                // Move to prevent the intersection with coordinates:\r\n                result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { transformImageAlgorithm };\r\n", "import 'tslib';\r\nimport '../types/index.js';\r\nimport './setCoordinates.js';\r\nimport { rotateImageAlgorithm } from '../algorithms/rotateImageAlgorithm.js';\r\nimport { flipImageAlgorithm } from '../algorithms/flipImageAlgorithm.js';\r\nimport { transformImageAlgorithm } from '../algorithms/transformImageAlgorithm.js';\r\n\r\nfunction transformImage(state, settings, transform) {\r\n    if (transform.rotate) {\r\n        state = rotateImageAlgorithm(state, settings, transform.rotate);\r\n    }\r\n    if (transform.flip) {\r\n        state = flipImageAlgorithm(state, settings, transform.flip.horizontal, transform.flip.vertical);\r\n    }\r\n    if (transform.move || transform.scale) {\r\n        state = transformImageAlgorithm(state, settings, transform);\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { transformImage };\r\n", "import { __assign } from 'tslib';\r\nimport { getBrokenRatio, ratio, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\r\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\r\nimport { isInitializedState, getAspectRatio, getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions, getPositionRestrictions } from '../service/helpers.js';\r\nimport { copyState } from './copyState.js';\r\nimport '../types/index.js';\r\nimport './setCoordinates.js';\r\nimport { approximateSize } from '../service/approximateSize.js';\r\n\r\nfunction reconcileState(state, settings) {\r\n    if (isInitializedState(state)) {\r\n        var result = copyState(state);\r\n        var aspectRatio = getAspectRatio(state, settings);\r\n        var sizeRestrictions = getSizeRestrictions(state, settings);\r\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\r\n        // Fit the size of coordinates to existing size restrictions and visible area\r\n        var brokenRatio = getBrokenRatio(ratio(state.coordinates), aspectRatio);\r\n        var desiredSize = brokenRatio\r\n            ? {\r\n                height: state.coordinates.height,\r\n                width: state.coordinates.height * brokenRatio,\r\n            }\r\n            : state.coordinates;\r\n        result.coordinates = __assign(__assign({}, result.coordinates), approximateSize({\r\n            width: desiredSize.width,\r\n            height: desiredSize.height,\r\n            aspectRatio: aspectRatio,\r\n            sizeRestrictions: mergeSizeRestrictions(areaSizeRestrictions, sizeRestrictions),\r\n        }));\r\n        // Return the coordinates to the previous center\r\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\r\n        var scaleModifier = Math.max(result.coordinates.width / result.visibleArea.width, result.coordinates.height / result.visibleArea.height, 1);\r\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\r\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\r\n            width: state.visibleArea.width * scaleModifier,\r\n            height: state.visibleArea.height * scaleModifier,\r\n            aspectRatio: {\r\n                minimum: ratio(result.boundary),\r\n                maximum: ratio(result.boundary),\r\n            },\r\n            sizeRestrictions: areaSizeRestrictions,\r\n        }));\r\n        // Return the visible area to previous center\r\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\r\n        // Fit the visible area to positions restrictions\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n        // Fit the coordinates to position restrictions and visible area\r\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { reconcileState };\r\n", "import { isNumber } from '../utils/index.js';\r\nimport { getCoefficient } from './helpers.js';\r\n\r\nfunction normalizeResizeDirections(state, directions) {\r\n    var coefficient = getCoefficient(state);\r\n    return {\r\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\r\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\r\n        right: isNumber(directions.right) ? directions.right * coefficient : 0,\r\n        bottom: isNumber(directions.bottom) ? directions.bottom * coefficient : 0,\r\n    };\r\n}\r\nfunction normalizeCenter(state, center) {\r\n    var coefficient = getCoefficient(state);\r\n    if (state.visibleArea) {\r\n        return {\r\n            left: center.left * coefficient + state.visibleArea.left,\r\n            top: center.top * coefficient + state.visibleArea.top,\r\n        };\r\n    }\r\n    return center;\r\n}\r\nfunction normalizeFlip(state, flip) {\r\n    if (state) {\r\n        var normalizedAngle = Math.abs(state.transforms.rotate % 180);\r\n        if (normalizedAngle <= 45 || normalizedAngle >= 135) {\r\n            return flip;\r\n        }\r\n        else {\r\n            return {\r\n                horizontal: flip.vertical,\r\n                vertical: flip.horizontal,\r\n            };\r\n        }\r\n    }\r\n    return flip;\r\n}\r\nfunction fillMoveDirections(directions) {\r\n    return {\r\n        left: isNumber(directions.left) ? directions.left : 0,\r\n        top: isNumber(directions.top) ? directions.top : 0,\r\n    };\r\n}\r\nfunction fillResizeDirections(directions) {\r\n    return {\r\n        left: isNumber(directions.left) ? directions.left : 0,\r\n        top: isNumber(directions.top) ? directions.top : 0,\r\n        right: isNumber(directions.right) ? directions.right : 0,\r\n        bottom: isNumber(directions.bottom) ? directions.bottom : 0,\r\n    };\r\n}\r\nfunction normalizeMoveDirections(state, directions) {\r\n    var coefficient = getCoefficient(state);\r\n    return {\r\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\r\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\r\n    };\r\n}\r\nfunction normalizeImageTransform(state, transform) {\r\n    if (transform.scale) {\r\n        transform.scale = {\r\n            factor: isNumber(transform.scale) ? transform.scale : transform.scale.factor,\r\n            center: !isNumber(transform.scale) && transform.scale.center\r\n                ? normalizeCenter(state, transform.scale.center)\r\n                : undefined,\r\n        };\r\n    }\r\n    if (transform.rotate) {\r\n        transform.rotate = {\r\n            angle: isNumber(transform.rotate) ? transform.rotate : transform.rotate.angle,\r\n            center: !isNumber(transform.rotate) && transform.rotate.center\r\n                ? normalizeCenter(state, transform.rotate.center)\r\n                : undefined,\r\n        };\r\n    }\r\n    if (transform.move) {\r\n        transform.move = normalizeMoveDirections(state, transform.move);\r\n    }\r\n    return transform;\r\n}\r\n\r\nexport { fillMoveDirections, fillResizeDirections, normalizeCenter, normalizeFlip, normalizeImageTransform, normalizeMoveDirections, normalizeResizeDirections };\r\n", "import { isRoughlyEqual, sign, distance } from '../utils/index.js';\r\n\r\nfunction calculateGeometricProperties(touches, container) {\r\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\r\n    var centerMass = { left: 0, top: 0 };\r\n    var spread = 0;\r\n    touches.forEach(function (touch) {\r\n        centerMass.left += (touch.clientX - left) / touches.length;\r\n        centerMass.top += (touch.clientY - top) / touches.length;\r\n    });\r\n    touches.forEach(function (touch) {\r\n        spread += distance({ left: centerMass.left, top: centerMass.top }, { left: touch.clientX - left, top: touch.clientY - top });\r\n    });\r\n    return { centerMass: centerMass, spread: spread, count: touches.length };\r\n}\r\nfunction touchesToImageTransform(touches, previousTouches, container, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var move, scale, rotate;\r\n    if (previousTouches.length === 1 && touches.length === 1) {\r\n        if (options.move) {\r\n            move = {\r\n                left: previousTouches[0].clientX - touches[0].clientX,\r\n                top: previousTouches[0].clientY - touches[0].clientY,\r\n            };\r\n        }\r\n    }\r\n    else if (touches.length > 1) {\r\n        var previousProperties = calculateGeometricProperties(previousTouches, container);\r\n        var properties = calculateGeometricProperties(touches, container);\r\n        if (options.rotate && previousTouches.length === 2 && touches.length === 2) {\r\n            var diffs = {\r\n                left: [\r\n                    touches[0].clientX - touches[1].clientX,\r\n                    previousTouches[0].clientX - previousTouches[1].clientX,\r\n                ],\r\n                top: [touches[0].clientY - touches[1].clientY, previousTouches[0].clientY - previousTouches[1].clientY],\r\n            };\r\n            var y = diffs.left[0] * diffs.top[1] - diffs.left[1] * diffs.top[0];\r\n            var x = diffs.left[0] * diffs.left[1] + diffs.top[0] * diffs.top[1];\r\n            if (!isRoughlyEqual(x, 0) && !isRoughlyEqual(y, 0)) {\r\n                var radians = Math.atan2(y, x);\r\n                var angle = -(radians * 180) / Math.PI;\r\n                rotate = {\r\n                    center: properties.centerMass,\r\n                    angle: angle,\r\n                };\r\n            }\r\n        }\r\n        if (options.move) {\r\n            move = {\r\n                left: previousProperties.centerMass.left - properties.centerMass.left,\r\n                top: previousProperties.centerMass.top - properties.centerMass.top,\r\n            };\r\n        }\r\n        if (options.scale) {\r\n            scale = {\r\n                factor: properties.spread / previousProperties.spread,\r\n                center: properties.centerMass,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        move: move,\r\n        scale: scale,\r\n        rotate: rotate,\r\n    };\r\n}\r\nfunction wheelEventToImageTransform(event, container, ratio) {\r\n    if (ratio === void 0) { ratio = 0.1; }\r\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\r\n    var factor = 1 - ratio * sign((event.deltaY || event.detail || event.wheelDelta));\r\n    var center = {\r\n        left: event.clientX - left,\r\n        top: event.clientY - top,\r\n    };\r\n    return { scale: { factor: factor, center: center } };\r\n}\r\n\r\nexport { touchesToImageTransform, wheelEventToImageTransform };\r\n", "function hasInteractions(interactions) {\r\n    return (interactions.moveCoordinates ||\r\n        interactions.resizeCoordinates ||\r\n        interactions.transformImage.move ||\r\n        interactions.transformImage.rotate ||\r\n        interactions.transformImage.flip ||\r\n        interactions.transformImage.scale);\r\n}\r\nfunction getEmptyInteractions() {\r\n    return {\r\n        moveCoordinates: false,\r\n        resizeCoordinates: false,\r\n        transformImage: {\r\n            rotate: false,\r\n            move: false,\r\n            scale: false,\r\n            flip: false,\r\n        },\r\n    };\r\n}\r\n\r\nexport { getEmptyInteractions, hasInteractions };\r\n", "import { deepCompare } from '../utils/index.js';\r\n\r\nfunction isEqualState(a, b) {\r\n    return deepCompare(a, b);\r\n}\r\n\r\nexport { isEqualState };\r\n", "import 'tslib';\r\nimport { getTransformedImageSize } from '../service/helpers.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction defaultPositionRestrictions(state, settings) {\r\n    var imageSize = getTransformedImageSize(state);\r\n    var limits = {};\r\n    if (settings.imageRestriction && settings.imageRestriction !== 'none') {\r\n        limits = {\r\n            left: 0,\r\n            top: 0,\r\n            right: imageSize.width,\r\n            bottom: imageSize.height,\r\n        };\r\n    }\r\n    return limits;\r\n}\r\n\r\nexport { defaultPositionRestrictions };\r\n", "import { __assign } from 'tslib';\r\nimport { ratio, resizeToSizeRestrictions, getIntersections, coordinatesToPositionRestrictions, moveToPositionRestrictions } from '../service/utils.js';\r\nimport { getTransformedImageSize, getAreaSizeRestrictions } from '../service/helpers.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction defaultVisibleArea(state, settings) {\r\n    var coordinates = state.coordinates, boundary = state.boundary;\r\n    var imageSize = getTransformedImageSize(state);\r\n    var boundaryRatio = ratio(boundary);\r\n    if (coordinates) {\r\n        // Visible area will try to fit reference:\r\n        var reference = {\r\n            height: Math.max(coordinates.height, imageSize.height),\r\n            width: Math.max(coordinates.width, imageSize.width),\r\n        };\r\n        var visibleArea = {\r\n            left: 0,\r\n            top: 0,\r\n            width: ratio(reference) > boundaryRatio ? reference.width : reference.height * boundaryRatio,\r\n            height: ratio(reference) > boundaryRatio ? reference.width / boundaryRatio : reference.height,\r\n        };\r\n        // Visible area should correspond its restrictions:\r\n        visibleArea = resizeToSizeRestrictions(visibleArea, getAreaSizeRestrictions(state, settings));\r\n        // Visible area will try to center stencil:\r\n        visibleArea.left = coordinates.left + coordinates.width / 2 - visibleArea.width / 2;\r\n        visibleArea.top = coordinates.top + coordinates.height / 2 - visibleArea.height / 2;\r\n        // TODO: Controversial behavior:\r\n        // If the coordinates are beyond image visible area will be allowed to be beyond image alike:\r\n        var coordinatesIntersection = getIntersections(coordinates, coordinatesToPositionRestrictions(__assign({ left: 0, top: 0 }, imageSize)));\r\n        var restrictions = {};\r\n        if (!coordinatesIntersection.left && !coordinatesIntersection.right && visibleArea.width <= imageSize.width) {\r\n            restrictions.left = 0;\r\n            restrictions.right = imageSize.width;\r\n        }\r\n        if (!coordinatesIntersection.top && !coordinatesIntersection.bottom && visibleArea.height <= imageSize.height) {\r\n            restrictions.top = 0;\r\n            restrictions.bottom = imageSize.height;\r\n        }\r\n        return moveToPositionRestrictions(visibleArea, restrictions);\r\n    }\r\n    else {\r\n        var imageRatio = ratio(imageSize);\r\n        var areaProperties = {\r\n            height: imageRatio < boundaryRatio ? imageSize.height : imageSize.width / boundaryRatio,\r\n            width: imageRatio < boundaryRatio ? imageSize.height * boundaryRatio : imageSize.width,\r\n        };\r\n        return {\r\n            left: imageSize.width / 2 - areaProperties.width / 2,\r\n            top: imageSize.height / 2 - areaProperties.height / 2,\r\n            width: areaProperties.width,\r\n            height: areaProperties.height,\r\n        };\r\n    }\r\n}\r\n\r\nexport { defaultVisibleArea };\r\n", "import { __assign } from 'tslib';\r\nimport { positionToSizeRestrictions, ratio } from '../service/utils.js';\r\nimport { getSizeRestrictions, getAspectRatio, getPositionRestrictions } from '../service/helpers.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { approximateSize } from '../service/approximateSize.js';\r\n\r\nfunction defaultSize(state, settings) {\r\n    var imageSize = state.imageSize, visibleArea = state.visibleArea;\r\n    var sizeRestrictions = getSizeRestrictions(state, settings);\r\n    var aspectRatio = getAspectRatio(state, settings);\r\n    var area;\r\n    if (visibleArea) {\r\n        area = visibleArea;\r\n    }\r\n    else {\r\n        var sizeRestrictions_1 = positionToSizeRestrictions(getPositionRestrictions(state, settings));\r\n        area = {\r\n            width: Math.max(sizeRestrictions_1.minWidth, Math.min(sizeRestrictions_1.maxWidth, imageSize.width)),\r\n            height: Math.max(sizeRestrictions_1.minHeight, Math.min(sizeRestrictions_1.maxHeight, imageSize.height)),\r\n        };\r\n    }\r\n    var optimalRatio = Math.min(aspectRatio.maximum || Infinity, Math.max(aspectRatio.minimum || 0, ratio(area)));\r\n    var size = area.width < area.height\r\n        ? {\r\n            width: area.width * 0.8,\r\n            height: (area.width * 0.8) / optimalRatio,\r\n        }\r\n        : {\r\n            height: area.height * 0.8,\r\n            width: area.height * 0.8 * optimalRatio,\r\n        };\r\n    return approximateSize(__assign(__assign({}, size), { aspectRatio: aspectRatio, sizeRestrictions: sizeRestrictions }));\r\n}\r\n\r\nexport { defaultSize };\r\n", "import { isNumeric, parseNumber } from '../utils/index.js';\r\n\r\nfunction retrieveSizeRestrictions(settings) {\r\n    return {\r\n        minWidth: isNumeric(settings.minWidth) ? parseNumber(settings.minWidth) : 0,\r\n        minHeight: isNumeric(settings.minHeight) ? parseNumber(settings.minHeight) : 0,\r\n        maxWidth: isNumeric(settings.maxWidth) ? parseNumber(settings.maxWidth) : Infinity,\r\n        maxHeight: isNumeric(settings.maxHeight) ? parseNumber(settings.maxHeight) : Infinity,\r\n    };\r\n}\r\nfunction pixelsRestrictions(state, settings) {\r\n    return retrieveSizeRestrictions(settings);\r\n}\r\n\r\nexport { pixelsRestrictions, retrieveSizeRestrictions };\r\n", "import 'tslib';\r\nimport { getTransformedImageSize } from '../service/helpers.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction defaultPosition(state) {\r\n    var visibleArea = state.visibleArea, coordinates = state.coordinates;\r\n    var area = visibleArea || getTransformedImageSize(state);\r\n    return {\r\n        left: (visibleArea ? visibleArea.left : 0) + area.width / 2 - (coordinates ? coordinates.width / 2 : 0),\r\n        top: (visibleArea ? visibleArea.top : 0) + area.height / 2 - (coordinates ? coordinates.height / 2 : 0),\r\n    };\r\n}\r\n\r\nexport { defaultPosition };\r\n", "import 'tslib';\r\nimport { ratio } from '../service/utils.js';\r\nimport { getTransformedImageSize } from '../service/helpers.js';\r\nimport { ImageRestriction } from '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction defaultAreaPositionRestrictions(state, settings) {\r\n    var visibleArea = state.visibleArea, boundary = state.boundary;\r\n    var imageRestriction = settings.imageRestriction;\r\n    var imageSize = getTransformedImageSize(state);\r\n    var restrictions = {};\r\n    if (imageRestriction === ImageRestriction.fillArea) {\r\n        restrictions = {\r\n            left: 0,\r\n            top: 0,\r\n            right: imageSize.width,\r\n            bottom: imageSize.height,\r\n        };\r\n    }\r\n    else if (imageRestriction === ImageRestriction.fitArea) {\r\n        if (ratio(boundary) > ratio(imageSize)) {\r\n            restrictions = {\r\n                top: 0,\r\n                bottom: imageSize.height,\r\n            };\r\n            if (visibleArea) {\r\n                if (visibleArea.width > imageSize.width) {\r\n                    restrictions.left = -(visibleArea.width - imageSize.width) / 2;\r\n                    restrictions.right = imageSize.width - restrictions.left;\r\n                }\r\n                else {\r\n                    restrictions.left = 0;\r\n                    restrictions.right = imageSize.width;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            restrictions = {\r\n                left: 0,\r\n                right: imageSize.width,\r\n            };\r\n            if (visibleArea) {\r\n                if (visibleArea.height > imageSize.height) {\r\n                    restrictions.top = -(visibleArea.height - imageSize.height) / 2;\r\n                    restrictions.bottom = imageSize.height - restrictions.top;\r\n                }\r\n                else {\r\n                    restrictions.top = 0;\r\n                    restrictions.bottom = imageSize.height;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return restrictions;\r\n}\r\n\r\nexport { defaultAreaPositionRestrictions };\r\n", "import 'tslib';\r\nimport { ratio } from '../service/utils.js';\r\nimport { getTransformedImageSize } from '../service/helpers.js';\r\nimport { ImageRestriction } from '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction defaultAreaSizeRestrictions(state, settings) {\r\n    var boundary = state.boundary;\r\n    var imageRestriction = settings.imageRestriction;\r\n    var imageSize = getTransformedImageSize(state);\r\n    var restrictions = {\r\n        minWidth: 0,\r\n        minHeight: 0,\r\n        maxWidth: Infinity,\r\n        maxHeight: Infinity,\r\n    };\r\n    if (imageRestriction === ImageRestriction.fillArea) {\r\n        restrictions.maxWidth = imageSize.width;\r\n        restrictions.maxHeight = imageSize.height;\r\n    }\r\n    else if (imageRestriction === ImageRestriction.fitArea) {\r\n        if (ratio(boundary) > ratio(imageSize)) {\r\n            restrictions.maxHeight = imageSize.height;\r\n            restrictions.maxWidth = imageSize.height * ratio(boundary);\r\n        }\r\n        else {\r\n            restrictions.maxWidth = imageSize.width;\r\n            restrictions.maxHeight = imageSize.width / ratio(boundary);\r\n        }\r\n    }\r\n    return restrictions;\r\n}\r\n\r\nexport { defaultAreaSizeRestrictions };\r\n", "function fitBoundary(boundary, size) {\r\n    var areaHeight = boundary.clientHeight;\r\n    var areaWidth = boundary.clientWidth;\r\n    var currentHeight = areaHeight;\r\n    var currentWidth = (size.width * areaHeight) / size.height;\r\n    if (currentWidth > areaWidth) {\r\n        currentWidth = areaWidth;\r\n        currentHeight = (size.height * areaWidth) / size.width;\r\n    }\r\n    return {\r\n        width: currentWidth,\r\n        height: currentHeight,\r\n    };\r\n}\r\nfunction fillBoundary(boundary) {\r\n    var _a = boundary.getBoundingClientRect(), width = _a.width, height = _a.height;\r\n    return {\r\n        width: width,\r\n        height: height,\r\n    };\r\n}\r\n\r\nexport { fillBoundary, fitBoundary };\r\n", "import 'tslib';\r\nimport { isFunction } from '../utils/index.js';\r\nimport { createAspectRatio } from '../service/utils.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nfunction defaultStencilConstraints(rawSettings, stencilProps) {\r\n    if (!rawSettings.aspectRatio) {\r\n        return {\r\n            aspectRatio: createAspectRatio(isFunction(stencilProps.aspectRatio) ? stencilProps.aspectRatio() : stencilProps.aspectRatio),\r\n        };\r\n    }\r\n    return {};\r\n}\r\n\r\nexport { defaultStencilConstraints };\r\n", "import { __assign } from 'tslib';\r\nimport { isFunction } from '../utils/index.js';\r\nimport { mergePositionRestrictions, createAspectRatio } from '../service/utils.js';\r\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\r\nexport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\r\nimport { defaultVisibleArea } from './defaultVisibleArea.js';\r\nexport { defaultVisibleArea } from './defaultVisibleArea.js';\r\nimport { defaultSize } from './defaultSize.js';\r\nexport { defaultSize } from './defaultSize.js';\r\nimport { pixelsRestrictions } from './defaultSizeRestrictions.js';\r\nexport { pixelsRestrictions, retrieveSizeRestrictions } from './defaultSizeRestrictions.js';\r\nimport { defaultPosition } from './defaultPosition.js';\r\nexport { defaultPosition } from './defaultPosition.js';\r\nimport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\r\nexport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\r\nimport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\r\nexport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\r\nexport { fillBoundary, fitBoundary } from './defaultBoundary.js';\r\nexport { defaultStencilConstraints } from './defaultStencilConstraints.js';\r\n\r\nfunction withDefaultSizeRestrictions(sizeRestrictions) {\r\n    return function (state, basicSettings) {\r\n        var value = isFunction(sizeRestrictions) ? sizeRestrictions(state, basicSettings) : sizeRestrictions;\r\n        return mergeSizeRestrictions(pixelsRestrictions(state, basicSettings), value);\r\n    };\r\n}\r\nfunction withDefaultPositionRestrictions(positionRestrictions) {\r\n    return function (state, basicSettings) {\r\n        var value = isFunction(positionRestrictions)\r\n            ? positionRestrictions(state, basicSettings)\r\n            : positionRestrictions;\r\n        return mergePositionRestrictions(defaultPositionRestrictions(state, basicSettings), value);\r\n    };\r\n}\r\nfunction withDefaultAreaPositionRestrictions(areaPositionRestrictions) {\r\n    return function (state, basicSettings) {\r\n        var value = isFunction(areaPositionRestrictions)\r\n            ? areaPositionRestrictions(state, basicSettings)\r\n            : areaPositionRestrictions;\r\n        return mergePositionRestrictions(defaultAreaPositionRestrictions(state, basicSettings), value);\r\n    };\r\n}\r\nfunction withDefaultAreaSizeRestrictions(areaSizeRestrictions) {\r\n    return function (state, basicSettings) {\r\n        var value = isFunction(areaSizeRestrictions)\r\n            ? areaSizeRestrictions(state, basicSettings)\r\n            : areaSizeRestrictions;\r\n        return mergeSizeRestrictions(defaultAreaSizeRestrictions(state, basicSettings), value);\r\n    };\r\n}\r\nfunction createDefaultSettings(params) {\r\n    return __assign(__assign({}, params), { sizeRestrictions: function (state, basicSettings) {\r\n            var restrictions;\r\n            if (params.sizeRestrictions) {\r\n                restrictions = isFunction(params.sizeRestrictions)\r\n                    ? params.sizeRestrictions(state, basicSettings)\r\n                    : params.sizeRestrictions;\r\n            }\r\n            else {\r\n                restrictions = pixelsRestrictions(state, basicSettings);\r\n            }\r\n            return restrictions;\r\n        }, areaPositionRestrictions: function (state, basicSettings) {\r\n            if (params.areaPositionRestrictions) {\r\n                return isFunction(params.areaPositionRestrictions)\r\n                    ? params.areaPositionRestrictions(state, basicSettings)\r\n                    : params.areaPositionRestrictions;\r\n            }\r\n            else {\r\n                return defaultAreaPositionRestrictions(state, basicSettings);\r\n            }\r\n        }, areaSizeRestrictions: function (state, basicSettings) {\r\n            if (params.areaSizeRestrictions) {\r\n                return isFunction(params.areaSizeRestrictions)\r\n                    ? params.areaSizeRestrictions(state, basicSettings)\r\n                    : params.areaSizeRestrictions;\r\n            }\r\n            else {\r\n                return defaultAreaSizeRestrictions(state, basicSettings);\r\n            }\r\n        }, positionRestrictions: function (state, basicSettings) {\r\n            if (params.positionRestrictions) {\r\n                return isFunction(params.positionRestrictions)\r\n                    ? params.positionRestrictions(state, basicSettings)\r\n                    : params.positionRestrictions;\r\n            }\r\n            else {\r\n                return defaultPositionRestrictions(state, basicSettings);\r\n            }\r\n        }, defaultCoordinates: function (state, basicSettings) {\r\n            if (params.defaultCoordinates) {\r\n                return isFunction(params.defaultCoordinates)\r\n                    ? params.defaultCoordinates(state, basicSettings)\r\n                    : params.defaultCoordinates;\r\n            }\r\n            else {\r\n                var defaultSizeAlgorithm = params.defaultSize;\r\n                if (!defaultSizeAlgorithm) {\r\n                    defaultSizeAlgorithm = defaultSize;\r\n                }\r\n                var size = isFunction(defaultSizeAlgorithm)\r\n                    ? defaultSizeAlgorithm(state, basicSettings)\r\n                    : defaultSizeAlgorithm;\r\n                var defaultPositionAlgorithm_1 = params.defaultPosition || defaultPosition;\r\n                return [\r\n                    size,\r\n                    function (state) { return (__assign({}, (isFunction(defaultPositionAlgorithm_1)\r\n                        ? defaultPositionAlgorithm_1(state, basicSettings)\r\n                        : defaultPositionAlgorithm_1))); },\r\n                ];\r\n            }\r\n        }, defaultVisibleArea: function (state, basicSettings) {\r\n            if (params.defaultVisibleArea) {\r\n                return isFunction(params.defaultVisibleArea)\r\n                    ? params.defaultVisibleArea(state, basicSettings)\r\n                    : params.defaultVisibleArea;\r\n            }\r\n            else {\r\n                return defaultVisibleArea(state, basicSettings);\r\n            }\r\n        }, aspectRatio: function (state, basicSettings) {\r\n            return createAspectRatio(isFunction(params.aspectRatio) ? params.aspectRatio(state, basicSettings) : params.aspectRatio);\r\n        } });\r\n}\r\n\r\nexport { createDefaultSettings, withDefaultAreaPositionRestrictions, withDefaultAreaSizeRestrictions, withDefaultPositionRestrictions, withDefaultSizeRestrictions };\r\n", "import { __assign, __rest, __spreadArrays } from 'tslib';\r\nimport { getOptions, deepClone, debounce, isArray, isFunction, deepCompare, isUndefined, isObject } from '../utils/index.js';\r\nimport { getCoefficient, isConsistentState, getStencilCoordinates, getRoundedCoordinates } from '../service/helpers.js';\r\nimport { copyState } from '../state/copyState.js';\r\nimport { setCoordinates, SetCoordinatesMode } from '../state/setCoordinates.js';\r\nimport { setVisibleArea } from '../state/setVisibleArea.js';\r\nimport { createState } from '../state/createState.js';\r\nimport { moveCoordinates } from '../state/moveCoordinates.js';\r\nimport { resizeCoordinates } from '../state/resizeCoordinates.js';\r\nimport { setBoundary } from '../state/setBoundary.js';\r\nimport { transformImage } from '../state/transformImage.js';\r\nimport { reconcileState } from '../state/reconcileState.js';\r\nimport { normalizeImageTransform, normalizeFlip, normalizeMoveDirections, fillMoveDirections, normalizeResizeDirections, fillResizeDirections } from '../service/normalize.js';\r\nimport { hasInteractions } from '../service/interactions.js';\r\n\r\nfunction runCallback(callback, getInstance) {\r\n    if (callback && getInstance) {\r\n        var instance = getInstance();\r\n        if (instance) {\r\n            callback(instance);\r\n        }\r\n    }\r\n}\r\nfunction runCallbacks(callbacks, getInstance) {\r\n    callbacks.forEach(function (callback) {\r\n        runCallback(callback, getInstance);\r\n    });\r\n}\r\nvar AbstractCropperInstance = /** @class */ (function () {\r\n    function AbstractCropperInstance() {\r\n        var _this = this;\r\n        this.getTransitions = function () {\r\n            var data = _this.getData();\r\n            var transitions = _this.getProps().transitions;\r\n            return __assign(__assign({}, getOptions(transitions, {\r\n                timingFunction: 'ease-in-out',\r\n                duration: 350,\r\n            })), { active: data.transitions });\r\n        };\r\n        this.getInteractions = function () {\r\n            var interactions = _this.getData().interactions;\r\n            return deepClone(interactions);\r\n        };\r\n        this.hasInteractions = function () {\r\n            var interactions = _this.getData().interactions;\r\n            return hasInteractions(interactions);\r\n        };\r\n        this.startTransitions = function () {\r\n            var _a = _this.getProps(), onTransitionsStart = _a.onTransitionsStart, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\r\n            var _b = _this.getData(), transitions = _b.transitions, data = __rest(_b, [\"transitions\"]);\r\n            _this.setData(__assign(__assign({}, data), { transitions: true }));\r\n            if (!transitions) {\r\n                runCallbacks([onTransitionsStart, onUpdate], getInstance);\r\n            }\r\n            _this.endTransitions();\r\n        };\r\n        this.endTransitions = debounce(function () {\r\n            var _a = _this.getProps(), onTransitionsEnd = _a.onTransitionsEnd, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\r\n            _this.setData(__assign(__assign({}, _this.getData()), { transitions: false }));\r\n            runCallbacks([onTransitionsEnd, onUpdate], getInstance);\r\n        }, function () {\r\n            return _this.getTransitions().duration;\r\n        });\r\n        this.applyPostProcess = function (action, state) {\r\n            var _a = _this.getProps(), settings = _a.settings, postProcess = _a.postProcess;\r\n            var name = action.name, _b = action.interaction, interaction = _b === void 0 ? false : _b, _c = action.transitions, transitions = _c === void 0 ? false : _c, _d = action.immediately, immediately = _d === void 0 ? false : _d;\r\n            var preparedAction = {\r\n                name: name,\r\n                interaction: interaction,\r\n                transitions: transitions,\r\n                immediately: immediately,\r\n            };\r\n            if (isArray(postProcess)) {\r\n                return postProcess.reduce(function (processedState, p) { return p(processedState, settings, preparedAction); }, state);\r\n            }\r\n            else if (isFunction(postProcess)) {\r\n                return postProcess(state, settings, preparedAction);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n        };\r\n        this.updateState = function (modifier, options, callbacks) {\r\n            if (options === void 0) { options = {}; }\r\n            if (callbacks === void 0) { callbacks = []; }\r\n            var _a = options.transitions, transitions = _a === void 0 ? false : _a;\r\n            var _b = _this.getProps(), onTransitionsStart = _b.onTransitionsStart, getInstance = _b.getInstance, onChange = _b.onChange, onUpdate = _b.onUpdate, settings = _b.settings;\r\n            var previousData = _this.getData();\r\n            var state = isFunction(modifier) ? modifier(previousData.state, settings) : modifier;\r\n            var tolerance = state ? 1e-3 * getCoefficient(state) : 1e-3;\r\n            var somethingChanged = !deepCompare(previousData.state, state, tolerance);\r\n            var affectTransitionProperties = [\r\n                'coordinates',\r\n                'boundary',\r\n                'visibleArea',\r\n                'imageSize',\r\n                'transforms',\r\n            ].some(function (property) { var _a; return !deepCompare((_a = previousData.state) === null || _a === void 0 ? void 0 : _a[property], state === null || state === void 0 ? void 0 : state[property], tolerance); });\r\n            var currentData = previousData;\r\n            if (somethingChanged) {\r\n                if (transitions && affectTransitionProperties) {\r\n                    _this.endTransitions();\r\n                }\r\n                currentData = __assign(__assign({}, currentData), { state: copyState(state), transitions: transitions && affectTransitionProperties });\r\n                _this.setData(currentData);\r\n                runCallback(onChange, getInstance);\r\n            }\r\n            if (currentData.transitions && !previousData.transitions) {\r\n                runCallback(onTransitionsStart, getInstance);\r\n            }\r\n            runCallbacks(__spreadArrays(callbacks, [onUpdate]), getInstance);\r\n        };\r\n        this.setInteractions = function (interactions) {\r\n            var _a = _this.getProps(), onInteractionStart = _a.onInteractionStart, onInteractionEnd = _a.onInteractionEnd, getInstance = _a.getInstance;\r\n            var previousInteractions = _this.getInteractions();\r\n            var currentInteractions = __assign(__assign({}, previousInteractions), interactions);\r\n            if (!deepCompare(previousInteractions, currentInteractions)) {\r\n                _this.setData(__assign(__assign({}, _this.getData()), { interactions: currentInteractions }));\r\n            }\r\n            if (hasInteractions(previousInteractions) !== hasInteractions(currentInteractions)) {\r\n                if (!hasInteractions(previousInteractions)) {\r\n                    runCallback(onInteractionStart, getInstance);\r\n                }\r\n                else {\r\n                    var state_1 = _this.getData().state;\r\n                    _this.updateState(function () {\r\n                        return state_1 &&\r\n                            _this.applyPostProcess({\r\n                                name: 'interactionEnd',\r\n                                immediately: true,\r\n                                transitions: true,\r\n                            }, state_1);\r\n                    }, {\r\n                        transitions: true,\r\n                    }, [onInteractionEnd]);\r\n                }\r\n            }\r\n        };\r\n        this.resetState = function (boundary, image) {\r\n            _this.updateState(_this.createDefaultState(boundary, image));\r\n        };\r\n        this.clear = function () {\r\n            _this.updateState(null);\r\n        };\r\n        this.reconcileState = function (options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = _this.getProps(), reconcileStateAlgorithm = _a.reconcileStateAlgorithm, settings = _a.settings;\r\n            var state = _this.getData().state;\r\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b;\r\n            if (state && !isConsistentState(state, settings)) {\r\n                var reconciledState = (reconcileStateAlgorithm || reconcileState)(state, settings);\r\n                reconciledState = _this.applyPostProcess({\r\n                    name: 'reconcileState',\r\n                    immediately: true,\r\n                    transitions: transitions,\r\n                }, reconciledState);\r\n                _this.updateState(reconciledState, {\r\n                    transitions: transitions,\r\n                });\r\n            }\r\n        };\r\n        this.transformImage = function (transform, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? false : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\r\n            var _e = _this.getProps(), transformImageAlgorithm = _e.transformImageAlgorithm, onTransformImage = _e.onTransformImage, onTransformImageEnd = _e.onTransformImageEnd, settings = _e.settings;\r\n            var state = _this.getData().state;\r\n            var callbacks = [];\r\n            if (state) {\r\n                if (normalize) {\r\n                    transform = normalizeImageTransform(state, transform);\r\n                }\r\n                var result = _this.applyPostProcess({\r\n                    name: 'transformImage',\r\n                    transitions: transitions,\r\n                    immediately: immediately,\r\n                }, (transformImageAlgorithm || transformImage)(state, settings, transform));\r\n                callbacks.push(onTransformImage);\r\n                if (interaction) {\r\n                    _this.setInteractions({\r\n                        transformImage: {\r\n                            rotate: !isUndefined(transform.rotate),\r\n                            flip: !isUndefined(transform.flip),\r\n                            scale: !isUndefined(transform.scale),\r\n                            move: !isUndefined(transform.move),\r\n                        },\r\n                    });\r\n                }\r\n                else {\r\n                    result = _this.applyPostProcess({\r\n                        name: 'transformImageEnd',\r\n                        transitions: transitions,\r\n                        immediately: true,\r\n                    }, result);\r\n                    callbacks.push(onTransformImageEnd);\r\n                }\r\n                _this.updateState(result, {\r\n                    transitions: immediately && transitions,\r\n                }, callbacks);\r\n            }\r\n        };\r\n        this.transformImageEnd = function (options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.immediately, immediately = _a === void 0 ? true : _a, _b = options.transitions, transitions = _b === void 0 ? true : _b;\r\n            var state = _this.getData().state;\r\n            var onTransformImageEnd = _this.getProps().onTransformImageEnd;\r\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'transformImageEnd', immediately: immediately, transitions: transitions }, state); }, {\r\n                transitions: transitions,\r\n            }, [onTransformImageEnd]);\r\n            _this.setInteractions({\r\n                transformImage: {\r\n                    rotate: false,\r\n                    flip: false,\r\n                    scale: false,\r\n                    move: false,\r\n                },\r\n            });\r\n        };\r\n        this.zoomImage = function (scale, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\r\n            _this.transformImage({\r\n                scale: scale,\r\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\r\n        };\r\n        this.moveImage = function (left, top, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\r\n            _this.transformImage({\r\n                move: {\r\n                    left: left,\r\n                    top: top,\r\n                },\r\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\r\n        };\r\n        this.flipImage = function (horizontal, vertical, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\r\n            var state = _this.getState();\r\n            var flip = {\r\n                horizontal: horizontal,\r\n                vertical: vertical,\r\n            };\r\n            _this.transformImage({\r\n                flip: state && normalize ? normalizeFlip(state, flip) : flip,\r\n            }, { interaction: interaction, immediately: immediately, transitions: transitions });\r\n        };\r\n        this.rotateImage = function (rotate, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\r\n            _this.transformImage({\r\n                rotate: rotate,\r\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\r\n        };\r\n        this.reset = function (boundary, image) {\r\n            _this.resetState(boundary, image);\r\n        };\r\n        this.setState = function (modifier, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var settings = _this.getSettings();\r\n            var state = _this.getData().state;\r\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b, _c = options.interaction, interaction = _c === void 0 ? false : _c, _d = options.postprocess, postprocess = _d === void 0 ? false : _d;\r\n            var newState = modifier && (isFunction(modifier) ? modifier(state, settings) : __assign(__assign({}, state), modifier));\r\n            _this.updateState(function () {\r\n                return postprocess\r\n                    ? newState &&\r\n                        _this.applyPostProcess({\r\n                            name: 'setState',\r\n                            immediately: immediately,\r\n                            transitions: transitions,\r\n                            interaction: interaction,\r\n                        }, newState)\r\n                    : newState;\r\n            }, {\r\n                transitions: transitions,\r\n            });\r\n        };\r\n        this.setCoordinates = function (transforms, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var state = _this.getData().state;\r\n            var _a = _this.getProps(), setCoordinatesAlgorithm = _a.setCoordinatesAlgorithm, settings = _a.settings;\r\n            var _b = options.transitions, transitions = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\r\n            _this.updateState(function () {\r\n                return state &&\r\n                    _this.applyPostProcess({\r\n                        name: 'setCoordinates',\r\n                        immediately: immediately,\r\n                        transitions: transitions,\r\n                    }, (setCoordinatesAlgorithm || setCoordinates)(state, settings, transforms, SetCoordinatesMode.zoom));\r\n            }, {\r\n                transitions: transitions,\r\n            });\r\n        };\r\n        this.setVisibleArea = function (visibleArea, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b;\r\n            var state = _this.getData().state;\r\n            var _c = _this.getProps(), setVisibleAreaAlgorithm = _c.setVisibleAreaAlgorithm, settings = _c.settings;\r\n            _this.updateState(function () {\r\n                return state &&\r\n                    _this.applyPostProcess({ name: 'setVisibleArea', immediately: immediately, transitions: transitions }, (setVisibleAreaAlgorithm || setVisibleArea)(state, settings, visibleArea));\r\n            }, {\r\n                transitions: transitions,\r\n            });\r\n        };\r\n        this.setBoundary = function (boundary, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var state = _this.getData().state;\r\n            var _a = _this.getProps(), setBoundaryAlgorithm = _a.setBoundaryAlgorithm, settings = _a.settings;\r\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\r\n            if (boundary) {\r\n                _this.updateState(function () {\r\n                    return state &&\r\n                        _this.applyPostProcess({ name: 'setBoundary', immediately: immediately, transitions: transitions }, (setBoundaryAlgorithm || setBoundary)(state, settings, boundary));\r\n                });\r\n            }\r\n            else {\r\n                _this.updateState(null);\r\n            }\r\n        };\r\n        this.moveCoordinates = function (directions, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var data = _this.getData();\r\n            var _a = _this.getProps(), moveCoordinatesAlgorithm = _a.moveCoordinatesAlgorithm, onMove = _a.onMove, onMoveEnd = _a.onMoveEnd, settings = _a.settings;\r\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\r\n            var callbacks = [];\r\n            if (!data.transitions && data.state) {\r\n                var normalizedDirections = normalize\r\n                    ? normalizeMoveDirections(data.state, directions)\r\n                    : fillMoveDirections(directions);\r\n                var result = _this.applyPostProcess({ name: 'moveCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (moveCoordinatesAlgorithm || moveCoordinates)(data.state, settings, normalizedDirections));\r\n                callbacks.push(onMove);\r\n                if (interaction) {\r\n                    _this.setInteractions({\r\n                        moveCoordinates: true,\r\n                    });\r\n                }\r\n                else {\r\n                    result = _this.applyPostProcess({ name: 'moveCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\r\n                    callbacks.push(onMoveEnd);\r\n                }\r\n                _this.updateState(result, {\r\n                    transitions: immediately && transitions,\r\n                }, callbacks);\r\n            }\r\n        };\r\n        this.moveCoordinatesEnd = function (options) {\r\n            if (options === void 0) { options = {}; }\r\n            var state = _this.getData().state;\r\n            var onMoveEnd = _this.getProps().onMoveEnd;\r\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\r\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'moveCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\r\n                transitions: transitions,\r\n            }, [onMoveEnd]);\r\n            _this.setInteractions({\r\n                moveCoordinates: false,\r\n            });\r\n        };\r\n        this.resizeCoordinates = function (anchor, directions, parameters, options) {\r\n            if (options === void 0) { options = {}; }\r\n            var state = _this.getData().state;\r\n            var _a = _this.getProps(), resizeCoordinatesAlgorithm = _a.resizeCoordinatesAlgorithm, onResize = _a.onResize, onResizeEnd = _a.onResizeEnd, settings = _a.settings;\r\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\r\n            var transitionsOptions = _this.getTransitions();\r\n            if (!transitionsOptions.active && state) {\r\n                var callbacks = [];\r\n                var normalizedDirections = normalize\r\n                    ? normalizeResizeDirections(state, directions)\r\n                    : fillResizeDirections(directions);\r\n                var result = _this.applyPostProcess({ name: 'resizeCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (resizeCoordinatesAlgorithm || resizeCoordinates)(state, settings, anchor, normalizedDirections, isObject(parameters) ? parameters : {}));\r\n                callbacks.push(onResize);\r\n                if (interaction) {\r\n                    _this.setInteractions({\r\n                        resizeCoordinates: true,\r\n                    });\r\n                }\r\n                else {\r\n                    result = _this.applyPostProcess({ name: 'resizeCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\r\n                    callbacks.push(onResizeEnd);\r\n                }\r\n                _this.updateState(result, {\r\n                    transitions: immediately && transitions,\r\n                }, callbacks);\r\n            }\r\n        };\r\n        this.resizeCoordinatesEnd = function (options) {\r\n            if (options === void 0) { options = {}; }\r\n            var onResizeEnd = _this.getProps().onResizeEnd;\r\n            var state = _this.getData().state;\r\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\r\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'resizeCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\r\n                transitions: transitions,\r\n            }, [onResizeEnd]);\r\n            _this.setInteractions({\r\n                resizeCoordinates: false,\r\n            });\r\n        };\r\n        this.getStencilCoordinates = function () {\r\n            var state = _this.getData().state;\r\n            return getStencilCoordinates(state);\r\n        };\r\n        this.getCoordinates = function (options) {\r\n            if (options === void 0) { options = {}; }\r\n            var state = _this.getData().state;\r\n            var settings = _this.getProps().settings;\r\n            if (state && state.coordinates) {\r\n                var _a = options.round, round = _a === void 0 ? true : _a;\r\n                if (round) {\r\n                    return getRoundedCoordinates(state, settings);\r\n                }\r\n                else {\r\n                    return __assign({}, state.coordinates);\r\n                }\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        this.getVisibleArea = function () {\r\n            var state = _this.getData().state;\r\n            if (state === null || state === void 0 ? void 0 : state.visibleArea) {\r\n                return __assign({}, state.visibleArea);\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        };\r\n        this.getSettings = function () {\r\n            var settings = _this.getProps().settings;\r\n            return __assign({}, settings);\r\n        };\r\n        this.getState = function () {\r\n            var state = _this.getData().state;\r\n            return copyState(state);\r\n        };\r\n        this.getTransforms = function () {\r\n            var state = _this.getData().state;\r\n            return state\r\n                ? deepClone(state.transforms)\r\n                : {\r\n                    rotate: 0,\r\n                    flip: {\r\n                        horizontal: false,\r\n                        vertical: false,\r\n                    },\r\n                };\r\n        };\r\n        this.createDefaultState = function (boundary, image) {\r\n            var _a = _this.getProps(), createStateAlgorithm = _a.createStateAlgorithm, settings = _a.settings;\r\n            return _this.applyPostProcess({\r\n                name: 'createState',\r\n                immediately: true,\r\n                transitions: false,\r\n            }, (createStateAlgorithm || createState)({\r\n                image: image,\r\n                boundary: boundary,\r\n            }, settings));\r\n        };\r\n        this.isConsistent = function () {\r\n            var state = _this.getData().state;\r\n            var settings = _this.getProps().settings;\r\n            return state ? isConsistentState(state, settings) : true;\r\n        };\r\n    }\r\n    return AbstractCropperInstance;\r\n}());\r\n\r\nexport { AbstractCropperInstance };\r\n", "var timingFunctions = {\r\n    linear: function (t) {\r\n        return t;\r\n    },\r\n    'ease-in': function (t) {\r\n        return Math.pow(t, 1.675);\r\n    },\r\n    'ease-out': function (t) {\r\n        return 1 - Math.pow(1 - t, 1.675);\r\n    },\r\n    'ease-in-out': function (t) {\r\n        return 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1);\r\n    },\r\n};\r\nvar Animation = /** @class */ (function () {\r\n    function Animation() {\r\n        this.active = false;\r\n    }\r\n    Animation.prototype.start = function (animation) {\r\n        var _a;\r\n        this.onStart = animation.onStart;\r\n        this.onProgress = animation.onProgress;\r\n        this.onStop = animation.onStop;\r\n        if (!this.active) {\r\n            (_a = this.onStart) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        }\r\n        if (this.id) {\r\n            window.cancelAnimationFrame(this.id);\r\n        }\r\n        this.startTime = performance.now();\r\n        this.timingFunction = animation.timingFunction;\r\n        this.endTime = this.startTime + animation.duration;\r\n        this.active = true;\r\n        this.animate();\r\n    };\r\n    Animation.prototype.animate = function () {\r\n        var _this = this;\r\n        if (this.startTime && this.endTime) {\r\n            var timingFunction = timingFunctions[this.timingFunction];\r\n            if (!timingFunction) {\r\n                if (process.env.NODE_ENV !== 'production') {\r\n                    console.warn(\"[Animation] The timing function '\" + timingFunction + \"' is not supported. Available timing function: 'linear', 'ease-in', 'ease-in-out', 'ease-out'. Reset to 'ease-out'.\");\r\n                }\r\n                timingFunction = timingFunctions['ease-out'];\r\n            }\r\n            var percent = 1 - (this.endTime - performance.now()) / (this.endTime - this.startTime);\r\n            var progress = Math.min(1, timingFunction(percent));\r\n            if (this.onProgress) {\r\n                this.onProgress(progress);\r\n            }\r\n            if (percent < 1) {\r\n                this.id = window.requestAnimationFrame(function () { return _this.animate(); });\r\n            }\r\n            else {\r\n                this.stop();\r\n            }\r\n        }\r\n        else {\r\n            this.stop();\r\n        }\r\n    };\r\n    Animation.prototype.stop = function () {\r\n        this.active = false;\r\n        if (this.id) {\r\n            window.cancelAnimationFrame(this.id);\r\n        }\r\n        if (this.onStop) {\r\n            this.onStop();\r\n        }\r\n    };\r\n    return Animation;\r\n}());\r\n\r\nexport { Animation };\r\n", "import { __assign } from 'tslib';\r\nimport { isNumeric } from '../utils/index.js';\r\nimport { rotateSize, rotatePoint, getCenter } from '../service/utils.js';\r\nimport { isInitializedState } from '../service/helpers.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\nimport { approximateSize } from '../service/approximateSize.js';\r\n\r\nfunction prepareSource(canvas, image, _a) {\r\n    var rotate = _a.rotate, flip = _a.flip;\r\n    var originalSize = {\r\n        width: 'naturalWidth' in image ? image.naturalWidth : image.width,\r\n        height: 'naturalHeight' in image ? image.naturalHeight : image.height,\r\n    };\r\n    var transformedSize = rotateSize(originalSize, rotate);\r\n    var ctx = canvas.getContext('2d');\r\n    canvas.height = transformedSize.height;\r\n    canvas.width = transformedSize.width;\r\n    if (ctx) {\r\n        ctx.save();\r\n        // Rotation:\r\n        var canvasCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, originalSize)), rotate);\r\n        ctx.translate(-(canvasCenter.left - transformedSize.width / 2), -(canvasCenter.top - transformedSize.height / 2));\r\n        ctx.rotate((rotate * Math.PI) / 180);\r\n        // Reflection;\r\n        ctx.translate(flip.horizontal ? originalSize.width : 0, flip.vertical ? originalSize.height : 0);\r\n        ctx.scale(flip.horizontal ? -1 : 1, flip.vertical ? -1 : 1);\r\n        ctx.drawImage(image, 0, 0, originalSize.width, originalSize.height);\r\n        ctx.restore();\r\n    }\r\n    return canvas;\r\n}\r\nfunction updateCanvas(canvas, source, coordinates, resultSize, options) {\r\n    canvas.width = resultSize ? resultSize.width : coordinates.width;\r\n    canvas.height = resultSize ? resultSize.height : coordinates.height;\r\n    var ctx = canvas.getContext('2d');\r\n    if (ctx) {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        if (options) {\r\n            if (options.imageSmoothingEnabled) {\r\n                ctx.imageSmoothingEnabled = options.imageSmoothingEnabled;\r\n            }\r\n            if (options.imageSmoothingQuality) {\r\n                ctx.imageSmoothingQuality = options.imageSmoothingQuality;\r\n            }\r\n            if (options.fillColor) {\r\n                ctx.fillStyle = options.fillColor;\r\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n                ctx.save();\r\n            }\r\n        }\r\n        var offsetX = coordinates.left < 0 ? -coordinates.left : 0;\r\n        var offsetY = coordinates.top < 0 ? -coordinates.top : 0;\r\n        ctx.drawImage(source, coordinates.left + offsetX, coordinates.top + offsetY, coordinates.width, coordinates.height, offsetX * (canvas.width / coordinates.width), offsetY * (canvas.height / coordinates.height), canvas.width, canvas.height);\r\n    }\r\n    return canvas;\r\n}\r\nfunction drawCroppedArea(state, image, resultCanvas, spareCanvas, options) {\r\n    if (isInitializedState(state)) {\r\n        var transforms = state.transforms, coordinates = state.coordinates;\r\n        var imageTransformed = transforms.rotate !== 0 || transforms.flip.horizontal || transforms.flip.vertical;\r\n        var source = imageTransformed ? prepareSource(spareCanvas, image, transforms) : image;\r\n        var params = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity, maxArea: Infinity, imageSmoothingEnabled: true, imageSmoothingQuality: 'high', fillColor: 'transparent' }, options);\r\n        var firstNumeric = function (array) { return array.find(function (el) { return isNumeric(el); }); };\r\n        var size = approximateSize({\r\n            sizeRestrictions: {\r\n                minWidth: firstNumeric([params.width, params.minWidth]) || 0,\r\n                minHeight: firstNumeric([params.height, params.minHeight]) || 0,\r\n                maxWidth: firstNumeric([params.width, params.maxWidth]) || Infinity,\r\n                maxHeight: firstNumeric([params.height, params.maxHeight]) || Infinity,\r\n            },\r\n            width: coordinates.width,\r\n            height: coordinates.height,\r\n            aspectRatio: {\r\n                minimum: coordinates.width / coordinates.height,\r\n                maximum: coordinates.width / coordinates.height,\r\n            },\r\n        });\r\n        if (params.maxArea && size.width * size.height > params.maxArea) {\r\n            var scale = Math.sqrt(params.maxArea / (size.width * size.height));\r\n            size = {\r\n                width: Math.round(scale * size.width),\r\n                height: Math.round(scale * size.height),\r\n            };\r\n        }\r\n        return updateCanvas(resultCanvas, source, coordinates, size, params);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport { drawCroppedArea, prepareSource, updateCanvas };\r\n", "function stretchCropperBoundary(boundary, stretcher, size) {\r\n    // Reset stretcher\r\n    stretcher.style.width = \"0px\";\r\n    stretcher.style.height = \"0px\";\r\n    // Try to fit the size by width:\r\n    stretcher.style.width = Math.max(boundary.clientWidth, size.width) + \"px\";\r\n    // After that try to fit the size by height and resulted width:\r\n    var ratio = size.width / size.height;\r\n    stretcher.style.height = Math.max(boundary.clientHeight, stretcher.clientWidth / ratio) + \"px\";\r\n    stretcher.style.width = stretcher.clientHeight * ratio + \"px\";\r\n}\r\nfunction stretchPreviewBoundary(boundary, stretcher, size) {\r\n    // Reset stretcher\r\n    stretcher.style.width = \"0px\";\r\n    stretcher.style.height = \"0px\";\r\n    // Try to fit the size by width:\r\n    stretcher.style.width = Math.max(boundary.getBoundingClientRect().width, size.width) + \"px\";\r\n    // After that try to fit the size by height and resulted width:\r\n    var ratio = size.width / size.height;\r\n    stretcher.style.height = Math.max(boundary.getBoundingClientRect().height, stretcher.getBoundingClientRect().width / ratio) + \"px\";\r\n    stretcher.style.width = stretcher.getBoundingClientRect().height * ratio + \"px\";\r\n    if (stretcher.clientWidth / stretcher.clientHeight > boundary.clientWidth / boundary.clientHeight) {\r\n        if (stretcher.clientWidth > boundary.clientWidth) {\r\n            stretcher.style.width = boundary.clientWidth + \"px\";\r\n            stretcher.style.height = boundary.clientWidth / ratio + \"px\";\r\n        }\r\n    }\r\n    else {\r\n        if (stretcher.clientHeight > boundary.clientHeight) {\r\n            stretcher.style.height = boundary.clientHeight + \"px\";\r\n            stretcher.style.width = boundary.clientHeight * ratio + \"px\";\r\n        }\r\n    }\r\n}\r\n\r\nexport { stretchCropperBoundary, stretchPreviewBoundary };\r\n", "import { __assign } from 'tslib';\r\nimport { isCrossOriginURL, isBlob, isLocal } from '../utils/index.js';\r\nimport { ratio } from '../service/utils.js';\r\nimport { getTransformedImageSize, getCoefficient } from '../service/helpers.js';\r\nimport '../types/index.js';\r\nimport '../state/setCoordinates.js';\r\n\r\nvar XHR_DONE = 4;\r\nfunction base64ToArrayBuffer(base64) {\r\n    base64 = base64.replace(/^data:([^;]+);base64,/gim, '');\r\n    var binary = atob(base64);\r\n    var len = binary.length;\r\n    var buffer = new ArrayBuffer(len);\r\n    var view = new Uint8Array(buffer);\r\n    for (var i = 0; i < len; i++) {\r\n        view[i] = binary.charCodeAt(i);\r\n    }\r\n    return buffer;\r\n}\r\nfunction objectURLToBlob(url, callback) {\r\n    var http = new XMLHttpRequest();\r\n    http.open('GET', url, true);\r\n    http.responseType = 'blob';\r\n    http.onload = function () {\r\n        if (this.status == 200 || this.status === 0) {\r\n            callback(this.response);\r\n        }\r\n    };\r\n    http.send();\r\n}\r\nfunction getTransforms(orientation) {\r\n    var result = {\r\n        flip: {\r\n            horizontal: false,\r\n            vertical: false,\r\n        },\r\n        rotate: 0,\r\n    };\r\n    if (orientation) {\r\n        switch (orientation) {\r\n            case 2:\r\n                result.flip.horizontal = true;\r\n                break;\r\n            case 3:\r\n                result.rotate = -180;\r\n                break;\r\n            case 4:\r\n                result.flip.vertical = true;\r\n                break;\r\n            case 5:\r\n                result.rotate = 90;\r\n                result.flip.vertical = true;\r\n                break;\r\n            case 6:\r\n                result.rotate = 90;\r\n                break;\r\n            case 7:\r\n                result.rotate = 90;\r\n                result.flip.horizontal = true;\r\n                break;\r\n            case 8:\r\n                result.rotate = -90;\r\n                break;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction getImageData(img) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            if (img) {\r\n                if (/^data:/i.test(img)) {\r\n                    // Data URL\r\n                    resolve(base64ToArrayBuffer(img));\r\n                }\r\n                else if (/^blob:/i.test(img)) {\r\n                    // Blob\r\n                    var fileReader_1 = new FileReader();\r\n                    fileReader_1.onload = function (e) {\r\n                        var _a;\r\n                        resolve((_a = e.target) === null || _a === void 0 ? void 0 : _a.result);\r\n                    };\r\n                    objectURLToBlob(img, function (blob) {\r\n                        fileReader_1.readAsArrayBuffer(blob);\r\n                    });\r\n                }\r\n                else {\r\n                    // Simple URL\r\n                    var http_1 = new XMLHttpRequest();\r\n                    http_1.onreadystatechange = function () {\r\n                        if (http_1.readyState !== XHR_DONE)\r\n                            return;\r\n                        if (http_1.status === 200 || http_1.status === 0) {\r\n                            resolve(http_1.response);\r\n                        }\r\n                        else {\r\n                            reject('Warning: could not load an image to parse its orientation');\r\n                        }\r\n                    };\r\n                    http_1.onprogress = function () {\r\n                        // Abort the request directly if it not a JPEG image for better performance\r\n                        if (http_1.getResponseHeader('content-type') !== 'image/jpeg') {\r\n                            http_1.abort();\r\n                        }\r\n                    };\r\n                    http_1.withCredentials = false;\r\n                    http_1.open('GET', img, true);\r\n                    http_1.responseType = 'arraybuffer';\r\n                    http_1.send(null);\r\n                }\r\n            }\r\n            else {\r\n                reject('Error: the image is empty');\r\n            }\r\n        }\r\n        catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n}\r\nfunction getStyleTransforms(transforms) {\r\n    var _a = transforms.rotate, rotate = _a === void 0 ? 0 : _a, _b = transforms.flip, flip = _b === void 0 ? { horizontal: false, vertical: false } : _b, _c = transforms.scale, scale = _c === void 0 ? 1 : _c;\r\n    return \" rotate(\" + rotate + \"deg) scaleX(\" + scale * (flip.horizontal ? -1 : 1) + \") scaleY(\" + scale * (flip.vertical ? -1 : 1) + \")\";\r\n}\r\nfunction getStringFromCharCode(dataView, start, length) {\r\n    var str = '';\r\n    var i;\r\n    for (i = start, length += start; i < length; i++) {\r\n        str += String.fromCharCode(dataView.getUint8(i));\r\n    }\r\n    return str;\r\n}\r\nfunction resetAndGetOrientation(arrayBuffer) {\r\n    try {\r\n        var dataView = new DataView(arrayBuffer);\r\n        var orientation_1;\r\n        var exifIDCode = void 0;\r\n        var tiffOffset = void 0;\r\n        var littleEndian = void 0;\r\n        var app1Start = void 0;\r\n        var ifdStart = void 0;\r\n        // Only handle JPEG image (start by 0xFFD8)\r\n        if (dataView.getUint8(0) === 0xff && dataView.getUint8(1) === 0xd8) {\r\n            var length_1 = dataView.byteLength;\r\n            var offset = 2;\r\n            while (offset + 1 < length_1) {\r\n                if (dataView.getUint8(offset) === 0xff && dataView.getUint8(offset + 1) === 0xe1) {\r\n                    app1Start = offset;\r\n                    break;\r\n                }\r\n                offset++;\r\n            }\r\n        }\r\n        if (app1Start) {\r\n            exifIDCode = app1Start + 4;\r\n            tiffOffset = app1Start + 10;\r\n            if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\r\n                var endianness = dataView.getUint16(tiffOffset);\r\n                littleEndian = endianness === 0x4949;\r\n                if (littleEndian || endianness === 0x4d4d /* bigEndian */) {\r\n                    if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002a) {\r\n                        var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\r\n                        if (firstIFDOffset >= 0x00000008) {\r\n                            ifdStart = tiffOffset + firstIFDOffset;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (ifdStart) {\r\n            var length_2 = dataView.getUint16(ifdStart, littleEndian);\r\n            for (var i = 0; i < length_2; i++) {\r\n                var offset = ifdStart + i * 12 + 2;\r\n                if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\r\n                    // 8 is the offset of the current tag's value\r\n                    offset += 8;\r\n                    // Get the original orientation value\r\n                    orientation_1 = dataView.getUint16(offset, littleEndian);\r\n                    // Override the orientation with its default value\r\n                    dataView.setUint16(offset, 1, littleEndian);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return orientation_1;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction arrayBufferToDataURL(arrayBuffer) {\r\n    var chunks = [];\r\n    // Chunk Typed Array for better performance\r\n    var chunkSize = 8192;\r\n    var uint8 = new Uint8Array(arrayBuffer);\r\n    while (uint8.length > 0) {\r\n        var value = uint8.subarray(0, chunkSize);\r\n        chunks.push(String.fromCharCode.apply(null, (Array.from ? Array.from(value) : value.slice())));\r\n        uint8 = uint8.subarray(chunkSize);\r\n    }\r\n    return \"data:image/jpeg;base64,\" + btoa(chunks.join(''));\r\n}\r\nfunction getImage(_a) {\r\n    var src = _a.src, _b = _a.arrayBuffer, arrayBuffer = _b === void 0 ? null : _b, _c = _a.orientation, orientation = _c === void 0 ? null : _c;\r\n    var options = {\r\n        src: src,\r\n        arrayBuffer: arrayBuffer,\r\n        revoke: false,\r\n        transforms: {\r\n            flip: {\r\n                horizontal: false,\r\n                vertical: false,\r\n            },\r\n            rotate: 0,\r\n        },\r\n    };\r\n    if (arrayBuffer && orientation && orientation > 1) {\r\n        if (isBlob(src) || !isLocal(src)) {\r\n            options.src = URL.createObjectURL(new Blob([arrayBuffer]));\r\n            options.revoke = true;\r\n        }\r\n        else {\r\n            options.src = arrayBufferToDataURL(arrayBuffer);\r\n        }\r\n    }\r\n    else {\r\n        options.src = src;\r\n    }\r\n    if (orientation) {\r\n        options.transforms = getTransforms(orientation);\r\n    }\r\n    return options;\r\n}\r\nfunction parseImage(src, settings) {\r\n    if (settings === void 0) { settings = {}; }\r\n    var checkOrientation = settings.checkOrientation, parse = settings.parse;\r\n    return new Promise(function (resolve) {\r\n        if (checkOrientation || parse) {\r\n            getImageData(src)\r\n                .then(function (data) {\r\n                var orientation = resetAndGetOrientation(data);\r\n                resolve(getImage(data\r\n                    ? { src: src, arrayBuffer: data, orientation: orientation }\r\n                    : { src: src, arrayBuffer: null, orientation: null }));\r\n            })\r\n                .catch(function (error) {\r\n                console.warn(error);\r\n                resolve(getImage({ src: src }));\r\n            });\r\n        }\r\n        else {\r\n            resolve(getImage({ src: src }));\r\n        }\r\n    });\r\n}\r\nfunction createImage(src, settings) {\r\n    if (settings === void 0) { settings = {}; }\r\n    return new Promise(function (resolve, reject) {\r\n        var image = document.createElement('img');\r\n        if (settings.crossOrigin) {\r\n            image.crossOrigin = settings.crossOrigin !== true ? settings.crossOrigin : 'anonymous';\r\n        }\r\n        image.src = src;\r\n        image.style.visibility = 'hidden';\r\n        image.style.position = 'fixed';\r\n        document.body.appendChild(image);\r\n        if (image.complete) {\r\n            resolve(image);\r\n            document.body.removeChild(image);\r\n        }\r\n        else {\r\n            image.addEventListener('load', function () {\r\n                resolve(image);\r\n                document.body.removeChild(image);\r\n            });\r\n            image.addEventListener('error', function () {\r\n                reject(null);\r\n                document.body.removeChild(image);\r\n            });\r\n        }\r\n    });\r\n}\r\nfunction loadImage(src, settings) {\r\n    if (settings === void 0) { settings = {}; }\r\n    return parseImage(src, __assign(__assign({}, settings), { crossOrigin: isCrossOriginURL(src) && settings.crossOrigin })).then(function (options) {\r\n        return new Promise(function (resolve, reject) {\r\n            createImage(options.src, settings)\r\n                .then(function (image) {\r\n                resolve(__assign(__assign({}, options), { width: image.naturalWidth, height: image.naturalHeight }));\r\n            })\r\n                .catch(function () {\r\n                reject(null);\r\n            });\r\n        });\r\n    });\r\n}\r\nfunction getImageStyle(image, state, area, coefficient, transitions) {\r\n    if (transitions === void 0) { transitions = null; }\r\n    var optimalImageSize = image.width > image.height\r\n        ? {\r\n            width: Math.min(512, image.width),\r\n            height: Math.min(512, image.width) / (image.width / image.height),\r\n        }\r\n        : {\r\n            height: Math.min(512, image.height),\r\n            width: Math.min(512, image.height) * (image.width / image.height),\r\n        };\r\n    var actualImageSize = getTransformedImageSize(state);\r\n    var imageTransforms = {\r\n        rotate: state.transforms.rotate,\r\n        flip: {\r\n            horizontal: state.transforms.flip.horizontal,\r\n            vertical: state.transforms.flip.vertical,\r\n        },\r\n        translateX: area.left / coefficient,\r\n        translateY: area.top / coefficient,\r\n        scale: 1 / coefficient,\r\n    };\r\n    var compensations = {\r\n        rotate: {\r\n            left: (optimalImageSize.width - actualImageSize.width) / (2 * coefficient),\r\n            top: (optimalImageSize.height - actualImageSize.height) / (2 * coefficient),\r\n        },\r\n        scale: {\r\n            left: ((1 - 1 / coefficient) * optimalImageSize.width) / 2,\r\n            top: ((1 - 1 / coefficient) * optimalImageSize.height) / 2,\r\n        },\r\n    };\r\n    var transforms = __assign(__assign({}, imageTransforms), { scale: imageTransforms.scale * (image.width / optimalImageSize.width) });\r\n    var result = {\r\n        width: optimalImageSize.width + \"px\",\r\n        height: optimalImageSize.height + \"px\",\r\n        left: '0px',\r\n        top: '0px',\r\n        transition: 'none',\r\n        transform: \"translate3d(\" + (-compensations.rotate.left - compensations.scale.left - imageTransforms.translateX) + \"px, \" + (-compensations.rotate.top - compensations.scale.top - imageTransforms.translateY) + \"px, 0px)\" + getStyleTransforms(transforms),\r\n        willChange: 'none',\r\n    };\r\n    if (transitions && transitions.active) {\r\n        result.willChange = 'transform';\r\n        result.transition = transitions.duration + \"ms \" + transitions.timingFunction;\r\n    }\r\n    return result;\r\n}\r\nfunction getBackgroundStyle(image, state, transitions) {\r\n    if (transitions === void 0) { transitions = null; }\r\n    if (image && state && state.visibleArea) {\r\n        return getImageStyle(image, state, state.visibleArea, getCoefficient(state), transitions);\r\n    }\r\n    else {\r\n        return {};\r\n    }\r\n}\r\nfunction getPreviewStyle(image, state, size, transitions) {\r\n    if (transitions === void 0) { transitions = null; }\r\n    if (image && state && state.visibleArea && state.coordinates) {\r\n        return getImageStyle(image, state, state.coordinates, ratio(state.coordinates) > ratio(size)\r\n            ? state.coordinates.width / size.width\r\n            : state.coordinates.height / size.height, transitions);\r\n    }\r\n    else {\r\n        return {};\r\n    }\r\n}\r\n\r\nexport { createImage, getBackgroundStyle, getImageStyle, getPreviewStyle, getStyleTransforms, loadImage };\r\n", "import { __assign } from 'tslib';\r\nimport { isFunction } from '../../utils/index.js';\r\nimport { aspectRatioIntersection, createAspectRatio, ratio, applyScale, fitToSizeRestrictions, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../../service/utils.js';\r\nimport { getAreaSizeRestrictions, getSizeRestrictions, getAspectRatio, isInitializedState, getAreaPositionRestrictions } from '../../service/helpers.js';\r\nimport { copyState } from '../../state/copyState.js';\r\nimport '../../types/index.js';\r\nimport '../../state/setCoordinates.js';\r\nimport { approximateSize } from '../../service/approximateSize.js';\r\nimport { defaultStencilConstraints } from '../../defaults/defaultStencilConstraints.js';\r\n\r\nfunction fixedStencilConstraints(rawSettings, stencilOptions) {\r\n    var defaultConstraints = defaultStencilConstraints({}, stencilOptions);\r\n    return {\r\n        stencilSize: function (state, settings) {\r\n            var previousSize = isFunction(rawSettings.stencilSize)\r\n                ? rawSettings.stencilSize(state, settings)\r\n                : rawSettings.stencilSize;\r\n            return approximateSize(__assign(__assign({}, previousSize), { aspectRatio: aspectRatioIntersection(defaultConstraints.aspectRatio, createAspectRatio(ratio(previousSize))) }));\r\n        },\r\n    };\r\n}\r\nfunction getStencilSize(state, settings) {\r\n    var boundary = state.boundary;\r\n    var size = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\r\n    if (size.width > boundary.width || size.height > boundary.height) {\r\n        size = approximateSize({\r\n            sizeRestrictions: {\r\n                maxWidth: boundary.width,\r\n                maxHeight: boundary.height,\r\n                minWidth: 0,\r\n                minHeight: 0,\r\n            },\r\n            width: size.width,\r\n            height: size.height,\r\n            aspectRatio: {\r\n                minimum: ratio(size),\r\n                maximum: ratio(size),\r\n            },\r\n        });\r\n    }\r\n    return size;\r\n}\r\nfunction sizeRestrictions(state, settings) {\r\n    var stencilSize = getStencilSize(state, __assign(__assign({}, settings), { stencilSize: settings.stencilSize }));\r\n    var areaRestrictions = getAreaSizeRestrictions(state, settings);\r\n    return {\r\n        maxWidth: (areaRestrictions.maxWidth * stencilSize.width) / state.boundary.width,\r\n        maxHeight: (areaRestrictions.maxHeight * stencilSize.height) / state.boundary.height,\r\n        minWidth: 0,\r\n        minHeight: 0,\r\n    };\r\n}\r\nfunction defaultSize(state, settings) {\r\n    var imageSize = state.imageSize, visibleArea = state.visibleArea, boundary = state.boundary;\r\n    var sizeRestrictions = getSizeRestrictions(state, settings);\r\n    var aspectRatio = getAspectRatio(state, settings);\r\n    var stencilSize = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\r\n    var area = (visibleArea || imageSize);\r\n    var height, width;\r\n    if (ratio(area) > ratio(boundary)) {\r\n        height = (stencilSize.height * area.height) / boundary.height;\r\n        width = height * ratio(stencilSize);\r\n    }\r\n    else {\r\n        width = (stencilSize.width * area.width) / boundary.width;\r\n        height = width / ratio(stencilSize);\r\n    }\r\n    return approximateSize({\r\n        width: width,\r\n        height: height,\r\n        aspectRatio: aspectRatio,\r\n        sizeRestrictions: sizeRestrictions,\r\n    });\r\n}\r\nfunction aspectRatio(state, settings) {\r\n    var value = ratio(getStencilSize(state, settings));\r\n    return {\r\n        minimum: value,\r\n        maximum: value,\r\n    };\r\n}\r\nfunction fixedStencilAlgorithm(state, settings) {\r\n    if (isInitializedState(state)) {\r\n        var result = copyState(state);\r\n        var stencil = getStencilSize(state, settings);\r\n        // First of all try to resize visible area as much as possible:\r\n        result.visibleArea = applyScale(result.visibleArea, (result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width));\r\n        // Check that visible area doesn't break the area restrictions:\r\n        var scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\r\n        if (scale !== 1) {\r\n            result.visibleArea = applyScale(result.visibleArea, scale);\r\n            result.coordinates = applyScale(result.coordinates, scale);\r\n        }\r\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(result.visibleArea)));\r\n        // Center stencil in visible area:\r\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\r\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getAreaPositionRestrictions(result, settings)));\r\n        return result;\r\n    }\r\n    return state;\r\n}\r\nfunction fixedStencil(state, settings, action) {\r\n    if (action && action.immediately) {\r\n        return fixedStencilAlgorithm(state, settings);\r\n    }\r\n    return state;\r\n}\r\n\r\nexport { aspectRatio, defaultSize, fixedStencil, fixedStencilAlgorithm, fixedStencilConstraints, getStencilSize, sizeRestrictions };\r\n", "import {\n\tapplyMove,\n\tapplyScale,\n\tdiff,\n\tfitToSizeRestrictions,\n\tgetAreaPositionRestrictions,\n\tgetAreaSizeRestrictions,\n\tgetCenter,\n\tgetPositionRestrictions,\n\tisInitializedState,\n\tmergePositionRestrictions,\n\tmoveToPositionRestrictions,\n\tratio,\n\tcoordinatesToPositionRestrictions,\n} from 'advanced-cropper/service';\nimport { CoreSettings, CropperState, PostprocessAction, Size } from 'advanced-cropper';\nimport { copyState } from 'advanced-cropper/state';\n\nexport function hybridStencilAutoZoomAlgorithm(state: CropperState, settings: CoreSettings): CropperState {\n\tif (isInitializedState(state)) {\n\t\tconst result = copyState(state);\n\n\t\t// Checks that coordinates has the same ratio that coordinates:\n\t\tconst stencil: Size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tif (ratio(result.boundary) > ratio(result.coordinates)) {\n\t\t\tstencil.height = result.boundary.height * 0.8;\n\t\t\tstencil.width = stencil.height * ratio(result.coordinates);\n\t\t} else {\n\t\t\tstencil.width = result.boundary.width * 0.8;\n\t\t\tstencil.height = stencil.width * ratio(result.coordinates);\n\t\t}\n\n\t\t// First of all try to resize visible area as much as possible:\n\t\tresult.visibleArea = applyScale(\n\t\t\tresult.visibleArea,\n\t\t\t(result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width),\n\t\t);\n\n\t\t// Check that visible area doesn't break the area restrictions:\n\t\tconst scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n\n\t\tresult.visibleArea = applyScale(result.visibleArea, scale);\n\n\t\tif (scale !== 1) {\n\t\t\tstencil.height /= scale;\n\t\t\tstencil.width /= scale;\n\t\t}\n\n\t\tresult.visibleArea = applyMove(\n\t\t\tresult.visibleArea,\n\t\t\tdiff(getCenter(result.coordinates), getCenter(result.visibleArea)),\n\t\t);\n\n\t\t// Center stencil in visible area:\n\t\tresult.visibleArea = moveToPositionRestrictions(\n\t\t\tresult.visibleArea,\n\t\t\tgetAreaPositionRestrictions(result, settings),\n\t\t);\n\n\t\tresult.coordinates = moveToPositionRestrictions(\n\t\t\tresult.coordinates,\n\t\t\tmergePositionRestrictions(\n\t\t\t\tcoordinatesToPositionRestrictions(result.visibleArea),\n\t\t\t\tgetPositionRestrictions(result, settings),\n\t\t\t),\n\t\t);\n\n\t\treturn result;\n\t}\n\treturn state;\n}\n\nexport function hybridStencilAutoZoom(\n\tstate: CropperState,\n\tsettings: CoreSettings,\n\taction: PostprocessAction,\n): CropperState {\n\tif (action.immediately) {\n\t\treturn hybridStencilAutoZoomAlgorithm(state, settings);\n\t}\n\treturn state;\n}\n", "export function deprecationWarning(text: string) {\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconsole.warn(`Deprecation warning: ${text}`);\n\t}\n}\n", "import { useRef } from 'react';\nimport { deprecationWarning } from '../service/utils';\n\nexport function useDeprecationWarning() {\n\tconst fired = useRef<string[]>([]);\n\n\treturn (message: string) => {\n\t\tif (fired.current.indexOf(message) === -1) {\n\t\t\tdeprecationWarning(message);\n\t\t\tfired.current.push(message);\n\t\t}\n\t};\n}\n", "import React, { forwardRef, PropsWithoutRef } from 'react';\n\nexport function createCropper<T, P = {}>(\n\trender: (props: P, ref: React.Ref<T>) => React.ReactElement | null,\n): (props: PropsWithoutRef<P> & React.RefAttributes<T>) => React.ReactElement | null {\n\treturn forwardRef<T, P>(render);\n}\n", "import { useRef } from 'react';\n\nexport function useFirstMountState(): boolean {\n\tconst isFirst = useRef(true);\n\n\tif (isFirst.current) {\n\t\tisFirst.current = false;\n\n\t\treturn true;\n\t}\n\n\treturn isFirst.current;\n}\n", "import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\n\nexport const useUpdateEffect: typeof useEffect = (effect, deps) => {\n\tconst isFirstMount = useFirstMountState();\n\n\tuseEffect(() => {\n\t\tif (!isFirstMount) {\n\t\t\treturn effect();\n\t\t}\n\t}, deps);\n};\n", "import { SetStateAction, useRef, useState } from \"react\";\nimport { useUpdateEffect } from \"./useUpdateEffect\";\n\ntype DispatchWithCallback<S> = (value: SetStateAction<S>, callback?: Function) => void;\n\nexport function useStateWithCallback<S>(initialState?: S | (() => S)): [S, DispatchWithCallback<S>];\nexport function useStateWithCallback<S = undefined>(): [S | undefined, DispatchWithCallback<S  | undefined>];\nexport function useStateWithCallback<S = undefined>(initialState?: S | (() => S)): [S | undefined, DispatchWithCallback<S | undefined>]  {\n\tconst [state, setState] = useState(initialState);\n\tconst [callback, setCallback] = useState<Function | null | undefined>(null);\n\tconst previousState = useRef(initialState);\n\n\tuseUpdateEffect(() => {\n\t\tif (callback) {\n\t\t\tcallback(state, previousState.current);\n\t\t}\n\t}, [callback])\n\n\treturn [\n\t\tstate,\n\t\t(value: SetStateAction<S | undefined>, callback?: Function) => {\n\t\t\tpreviousState.current = state;\n\t\t\tsetState(value);\n\t\t\tsetCallback(() => callback);\n\t\t}\n\t]\n}\n", "import {\n\tAbstractCropperInstance,\n\tAbstractCropperInstanceData,\n\tAbstractCropperInstanceProps,\n\tAbstractCropperInstanceSettings,\n\tgetEmptyInteractions,\n} from 'advanced-cropper';\n\nexport interface CropperInstanceProps<Settings extends AbstractCropperInstanceSettings, Instance> {\n\tgetProps: () => AbstractCropperInstanceProps<Settings, Instance>;\n\tsetData?: (data: AbstractCropperInstanceData) => void;\n}\n\nexport class CropperInstance<\n\tSettings extends AbstractCropperInstanceSettings,\n\tInstance = unknown,\n> extends AbstractCropperInstance<Settings, Instance> {\n\tdata: AbstractCropperInstanceData;\n\tnotify: () => void;\n\tprops: () => AbstractCropperInstanceProps<Settings, Instance>;\n\n\tconstructor(props: () => AbstractCropperInstanceProps<Settings, Instance>, onChange: () => void) {\n\t\tsuper();\n\t\tthis.props = props;\n\t\tthis.notify = onChange;\n\t\tthis.data = {\n\t\t\tstate: null,\n\t\t\ttransitions: false,\n\t\t\tinteractions: getEmptyInteractions(),\n\t\t};\n\t}\n\n\tprotected getProps() {\n\t\treturn this.props();\n\t}\n\n\tprotected setData(data: AbstractCropperInstanceData) {\n\t\tthis.data = data;\n\t\tthis.notify();\n\t}\n\n\tprotected getData(): AbstractCropperInstanceData {\n\t\treturn this.data;\n\t}\n}\n", "import { useState } from 'react';\n\nexport function useForceRerender() {\n\tconst [tick, setTick] = useState({});\n\n\treturn () => {\n\t\tsetTick({});\n\t};\n}\n", "import { useRef } from 'react';\n\nexport function usePersistentFunction<Props, Arguments extends any[]>(props: (...args: Arguments) => Props) {\n\tconst propsRef = useRef(props);\n\n\tpropsRef.current = props;\n\n\treturn (...args: Arguments) => propsRef.current(...args);\n}\n", "import { useRef } from 'react';\nimport {\n\tImageRestriction,\n\tcreateDefaultSettings,\n\tAbstractCropperInstanceParameters,\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceSettings,\n\tDefaultSettings,\n} from 'advanced-cropper';\nimport { CropperInstance } from '../instance/CropperInstance';\nimport { useForceRerender } from './useForceRerender';\nimport { usePersistentFunction } from './usePersistentFunction';\n\nexport type CropperInstanceSettings = DefaultSettings & AbstractCropperInstanceSettings;\n\nexport type CropperInstanceSettingsProp<Settings extends CropperInstanceSettings> = Partial<\n\tPick<Settings, keyof CropperInstanceSettings>\n> &\n\tOmit<Settings, keyof CropperInstanceSettings>;\n\nexport function useCropperInstance<Settings extends CropperInstanceSettings, Instance = unknown>(\n\tprops: () => AbstractCropperInstanceParameters<Settings> &\n\t\tAbstractCropperInstanceCallbacks<Instance> & {\n\t\t\tsettings?: CropperInstanceSettingsProp<Settings>;\n\t\t},\n) {\n\tconst rerender = useForceRerender();\n\n\tconst getProps = usePersistentFunction(() => {\n\t\tconst { settings, ...parameters } = props();\n\n\t\tconst extendedSettings = {\n\t\t\timageRestriction: ImageRestriction.fitArea,\n\t\t\ttransformImage: {\n\t\t\t\tadjustStencil: true,\n\t\t\t},\n\t\t\t...settings,\n\t\t};\n\n\t\tconst extendedParameters = {\n\t\t\ttransitions: true,\n\t\t\t...parameters,\n\t\t};\n\n\t\treturn {\n\t\t\tsettings: {\n\t\t\t\t...extendedSettings,\n\t\t\t\t...createDefaultSettings<Settings>(extendedSettings),\n\t\t\t\t// It's needed because of the nature of the settings field\n\t\t\t} as Settings,\n\t\t\t...extendedParameters,\n\t\t};\n\t});\n\n\tconst cropper = useRef(new CropperInstance<Settings, Instance>(getProps, rerender));\n\n\treturn cropper.current;\n}\nexport type CropperStateHook = ReturnType<typeof useCropperInstance>;\n", "import { useEffect, useRef, useState } from 'react';\nimport { CropperImage, isUndefined, promiseTimeout, loadImage } from 'advanced-cropper';\nimport { useStateWithCallback } from \"./useStateWithCallback\";\n\nexport interface CropperImageHookSettings {\n\tsrc?: string | null;\n\tonLoadingStart?: () => void;\n\tonLoadingEnd?: () => void;\n\tonError?: () => void;\n\tonLoad?: (image?: CropperImage) => void;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tcheckOrientation?: boolean;\n\tcanvas?: string | boolean;\n\tunloadTime?: number;\n}\n\nexport function useCropperImage(options: CropperImageHookSettings) {\n\tconst { src, onLoadingStart, onLoadingEnd, onError, onLoad, crossOrigin, checkOrientation, canvas, unloadTime } = options;\n\tconst [image, setImage] = useState<CropperImage | null>(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst [loaded, setLoaded] = useStateWithCallback(false);\n\n\tconst currentSrc = useRef<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (currentSrc.current !== src) {\n\t\t\tcurrentSrc.current = src || null;\n\t\t\tsetLoaded(false);\n\t\t\tif (src) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tonLoadingStart?.();\n\t\t\t\tconst promises: Promise<unknown>[] = [\n\t\t\t\t\tloadImage(src, {\n\t\t\t\t\t\tcrossOrigin: isUndefined(crossOrigin) ? canvas : crossOrigin,\n\t\t\t\t\t\tcheckOrientation,\n\t\t\t\t\t}),\n\t\t\t\t];\n\n\t\t\t\tif (loaded && unloadTime) {\n\t\t\t\t\tpromises.push(promiseTimeout(unloadTime));\n\t\t\t\t}\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then((responses) => {\n\t\t\t\t\t\tconst [image] = responses as [CropperImage];\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tsetImage(image);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonError?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonLoadingEnd?.();\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (unloadTime) {\n\t\t\t\t\t\tpromiseTimeout(unloadTime).then(() => {\n\t\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\t\tsetImage(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t\tsetImage(null)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [src, image]);\n\n\tuseEffect(() => {\n\t\tif (image) {\n\t\t\tsetLoaded(true, () => {\n\t\t\t\tonLoad?.(image);\n\t\t\t})\n\t\t}\n\t}, [image])\n\n\treturn {\n\t\tisLoading() {\n\t\t\treturn loading;\n\t\t},\n\t\tisLoaded() {\n\t\t\treturn loaded\n\t\t},\n\t\tgetImage() {\n\t\t\treturn image;\n\t\t},\n\t\tsetImage,\n\t};\n}\n", "import { useEffect, useRef } from 'react';\n\nexport const useWindowResize = (callback: (...args: unknown[]) => void) => {\n\tconst callbackRef = useRef<Function>(callback);\n\n\tconst internalCallback = () => {\n\t\tif (callbackRef.current) {\n\t\t\tcallbackRef.current();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tcallbackRef.current = callback;\n\t}, [callback]);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', internalCallback);\n\t\twindow.addEventListener('orientationchange', internalCallback);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', internalCallback);\n\t\t\twindow.removeEventListener('orientationchange', internalCallback);\n\t\t};\n\t}, []);\n};\n", "import { useLayoutEffect, useState } from 'react';\n\ninterface CropperInstance {\n\thasInteractions: () => boolean;\n\treconcileState: () => void;\n}\n\nexport function useCropperAutoReconcile(cropper: CropperInstance, enabled = true) {\n\tconst [active, setActive] = useState(enabled);\n\n\tuseLayoutEffect(() => {\n\t\tif (active && !cropper.hasInteractions()) {\n\t\t\tcropper.reconcileState();\n\t\t}\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tsetActive(false);\n\t\t},\n\t\tresume() {\n\t\t\tsetActive(true);\n\t\t},\n\t};\n}\n", "import { useImperativeHandle, useRef } from 'react';\nimport {\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceParameters,\n\tCropperImage,\n\tDrawOptions,\n} from 'advanced-cropper';\nimport { StretchableBoundaryMethods } from '../components/service/StretchableBoundary';\nimport { CropperCanvasMethods } from '../components/service/CropperCanvas';\nimport { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperRef, AbstractCropperSettings } from '../components/AbstractCropper';\nimport { useStateWithCallback } from './useStateWithCallback';\nimport { CropperInstanceSettingsProp, useCropperInstance } from './useCropperInstance';\nimport { useCropperImage } from './useCropperImage';\nimport { useWindowResize } from './useWindowResize';\nimport { useUpdateEffect } from './useUpdateEffect';\nimport { useCropperAutoReconcile } from './useCropperAutoReconcile';\n\nexport interface AbstractCropperHookProps<Settings extends AbstractCropperSettings>\n\textends AbstractCropperInstanceParameters<Settings>,\n\t\tAbstractCropperInstanceCallbacks<AbstractCropperRef<Settings>> {\n\tsrc?: string | null;\n\tcheckOrientation?: boolean;\n\tcanvas?: boolean;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tonReady?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonError?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonUpdate?: (cropper: AbstractCropperRef<Settings>) => void;\n\tunloadTime?: number;\n\tautoReconcileState?: boolean;\n\tsettings?: CropperInstanceSettingsProp<Settings>;\n}\n\nexport function useAbstractCropper<Extension extends SettingsExtension = {}>(\n\tprops: () => AbstractCropperHookProps<ExtendedSettings<Extension>>,\n) {\n\tconst {\n\t\tsrc,\n\t\tonReady,\n\t\tonError,\n\t\tonUpdate,\n\t\tcanvas = true,\n\t\tunloadTime = 500,\n\t\tcrossOrigin = true,\n\t\tcheckOrientation = true,\n\t\tautoReconcileState = true,\n\t} = props();\n\n\tconst imageRef = useRef<HTMLElement>(null);\n\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\tconst canvasRef = useRef<CropperCanvasMethods>(null);\n\tconst cropperRef = useRef<AbstractCropperRef<ExtendedSettings<Extension>>>(null);\n\n\tconst [currentImage, setCurrentImage] = useStateWithCallback<CropperImage | null>(null);\n\n\tconst cropper = useCropperInstance(() => ({\n\t\t...props(),\n\t\tgetInstance() {\n\t\t\treturn cropperRef.current;\n\t\t},\n\t}));\n\n\tconst cropperImage = useCropperImage({\n\t\tsrc,\n\t\tcrossOrigin,\n\t\tcheckOrientation,\n\t\tunloadTime,\n\t\tcanvas,\n\t\tonError() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonError?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst autoReconcile = useCropperAutoReconcile(cropper, autoReconcileState);\n\n\tconst resetCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tsetCurrentImage(image, () => {\n\t\t\t\tif (boundary && image) {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t} else {\n\t\t\t\t\tcropper.clear();\n\t\t\t\t}\n\t\t\t});\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\n\tconst refreshCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tif (boundary && image) {\n\t\t\t\tconst state = cropper.getState();\n\t\t\t\tif (state) {\n\t\t\t\t\tif (boundary.width !== state.boundary.width || boundary.height !== state.boundary.height) {\n\t\t\t\t\t\tcropper.setBoundary(boundary);\n\t\t\t\t\t\t// It's important because, probably, after the boundary reset\n\t\t\t\t\t\t// the cropper can meet some restrictions that were broken before\n\t\t\t\t\t\tcropper.reconcileState();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcropper.clear();\n\t\t\t}\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\tconst cropperInterface = {\n\t\treset: () => resetCropper(),\n\t\trefresh: () => refreshCropper(),\n\t\tsetImage: (image: CropperImage) => setCurrentImage(image),\n\t\treconcileState: cropper.reconcileState,\n\t\tmoveCoordinates: cropper.moveCoordinates,\n\t\tmoveCoordinatesEnd: cropper.moveCoordinatesEnd,\n\t\tresizeCoordinates: cropper.resizeCoordinates,\n\t\tclear: cropper.clear,\n\t\tresizeCoordinatesEnd: cropper.resizeCoordinatesEnd,\n\t\tmoveImage: cropper.moveImage,\n\t\tflipImage: cropper.flipImage,\n\t\tzoomImage: cropper.zoomImage,\n\t\trotateImage: cropper.rotateImage,\n\t\ttransformImage: cropper.transformImage,\n\t\ttransformImageEnd: cropper.transformImageEnd,\n\t\tsetCoordinates: cropper.setCoordinates,\n\t\tsetVisibleArea: cropper.setVisibleArea,\n\t\tstartTransitions: cropper.startTransitions,\n\t\tsetState: cropper.setState,\n\t\thasInteractions: cropper.hasInteractions,\n\t\tgetStencilCoordinates: cropper.getStencilCoordinates,\n\t\tgetCoordinates: cropper.getCoordinates,\n\t\tgetVisibleArea: cropper.getVisibleArea,\n\t\tgetTransforms: cropper.getTransforms,\n\t\tgetTransitions: cropper.getTransitions,\n\t\tgetInteractions: cropper.getInteractions,\n\t\tgetSettings: cropper.getSettings,\n\t\tgetState: cropper.getState,\n\t\tgetDefaultState() {\n\t\t\tconst state = cropper.getState();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tif (state && image) {\n\t\t\t\treturn cropper.createDefaultState(state.boundary, image);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetCanvas: (options?: DrawOptions) => {\n\t\t\tconst state = cropper.getState();\n\t\t\tif (imageRef.current && canvasRef.current && state) {\n\t\t\t\treturn canvasRef.current.draw(state, imageRef.current, options);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetImage: () => {\n\t\t\treturn currentImage ? { ...currentImage } : null;\n\t\t},\n\t\tisLoading: cropperImage.isLoading,\n\t\tisLoaded: cropperImage.isLoaded,\n\t};\n\n\tuseWindowResize(() => {\n\t\trefreshCropper();\n\t});\n\n\tuseUpdateEffect(() => {\n\t\tresetCropper();\n\t}, [cropperImage.getImage()]);\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current && currentImage) {\n\t\t\tonReady?.(cropperRef.current);\n\t\t}\n\t}, [currentImage])\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current) {\n\t\t\tonUpdate?.(cropperRef.current);\n\t\t}\n\t}, [cropperImage.isLoaded(), cropperImage.isLoading()]);\n\n\tuseImperativeHandle(cropperRef, () => cropperInterface);\n\n\treturn {\n\t\tcropper: cropperInterface,\n\t\trefs: {\n\t\t\timage: imageRef,\n\t\t\tboundary: boundaryRef,\n\t\t\tcanvas: canvasRef,\n\t\t},\n\t\timage: currentImage,\n\t};\n}\n", "import React, { ReactNode, forwardRef, useImperativeHandle, useRef, CSSProperties } from 'react';\nimport cn from 'classnames';\nimport {\n\tBoundarySizeAlgorithm,\n\tSize,\n\tstretchCropperBoundary,\n\tBoundaryStretchAlgorithm,\n\tfillBoundary,\n} from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tstretcherClassName?: string;\n\tcontentClassName?: string;\n\tstretchAlgorithm?: BoundaryStretchAlgorithm;\n\tsizeAlgorithm?: BoundarySizeAlgorithm;\n\tchildren?: ReactNode;\n}\n\nexport interface StretchableBoundaryMethods {\n\tstretchTo: (size: Size | null) => Promise<Size | null>;\n\treset: () => void;\n}\n\nexport const StretchableBoundary = forwardRef(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tstyle,\n\t\t\tstretcherClassName,\n\t\t\tcontentClassName,\n\t\t\tstretchAlgorithm = stretchCropperBoundary,\n\t\t\tsizeAlgorithm = fillBoundary,\n\t\t\tchildren,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst stretcherRef = useRef<HTMLDivElement>(null);\n\t\tconst boundaryRef = useRef<HTMLDivElement>(null);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\treset: () => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tif (stretcher) {\n\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\tstretchTo: (size: Size | null) => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tconst boundary = boundaryRef.current;\n\n\t\t\t\tif (size?.width && size?.height && stretcher && boundary) {\n\t\t\t\t\tstretchAlgorithm(boundary, stretcher, size);\n\t\t\t\t\tconst result = sizeAlgorithm(boundary, size);\n\t\t\t\t\treturn Promise.resolve(result.width && result.height ? result : null);\n\t\t\t\t} else {\n\t\t\t\t\tif (stretcher) {\n\t\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t},\n\t\t}));\n\n\t\treturn (\n\t\t\t<div ref={boundaryRef} style={style} className={cn('advanced-cropper-boundary', className)}>\n\t\t\t\t<div ref={stretcherRef} className={cn(['advanced-cropper-boundary__stretcher', stretcherClassName])} />\n\t\t\t\t<div className={cn(['advanced-cropper-boundary__content', contentClassName])}>{children}</div>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nStretchableBoundary.displayName = 'StretchableBoundary';\n", "import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\n\ninterface Props {\n\tvisible?: unknown;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperFade: FC<Props> = ({ visible, className, style, children }) => {\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={cn(className, 'advanced-cropper-fade', Boolean(visible) && 'advanced-cropper-fade--visible')}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n", "import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperState } from 'advanced-cropper';\nimport { CropperFade } from './CropperFade';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n}\n\nexport const CropperWrapper: FC<CropperWrapperProps> = ({ cropper, children, className, style }) => {\n\tconst state = cropper ? cropper.getState() : null;\n\tconst loaded = cropper ? cropper.isLoaded() : false;\n\treturn (\n\t\t<div className={cn(className, 'advanced-cropper-wrapper')} style={style}>\n\t\t\t<CropperFade visible={state && loaded} className={'advanced-cropper-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n", "import { MouseEvent } from 'react';\n\nexport function preventDefault(e: MouseEvent) {\n\te.preventDefault();\n}\n", "import React, { CSSProperties, forwardRef } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, getBackgroundStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperBackgroundImageProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperBackgroundImage = forwardRef<HTMLImageElement, CropperBackgroundImageProps>(\n\t({ className, style, cropper, crossOrigin = true }: CropperBackgroundImageProps, ref) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst image = cropper.getImage();\n\n\t\tconst transformStyles = image && state ? getBackgroundStyle(image, state, transitions) : {};\n\n\t\tconst src = image ? image.src : undefined;\n\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\t\tsrc={src}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\tstyle={{\n\t\t\t\t\t...transformStyles,\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\tonMouseDown={preventDefault}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperBackgroundImage.displayName = 'CropperBackgroundImage';\n", "import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { CropperState, DrawOptions, drawCroppedArea } from 'advanced-cropper';\n\nexport interface CropperCanvasMethods {\n\tdraw: (state: CropperState, image: HTMLElement, options?: DrawOptions) => HTMLCanvasElement | null;\n}\n\nexport const CropperCanvas = forwardRef((_, ref) => {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\tconst spareCanvasRef = useRef<HTMLCanvasElement>(null);\n\n\tuseImperativeHandle(ref, () => ({\n\t\tdraw: (state: CropperState, image: HTMLElement, options: DrawOptions = {}) => {\n\t\t\tif (image && canvasRef.current && spareCanvasRef.current) {\n\t\t\t\treturn drawCroppedArea(\n\t\t\t\t\tstate,\n\t\t\t\t\timage as HTMLImageElement | HTMLCanvasElement,\n\t\t\t\t\tcanvasRef.current,\n\t\t\t\t\tspareCanvasRef.current,\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t}));\n\n\treturn (\n\t\t<>\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={canvasRef} />\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={spareCanvasRef} />\n\t\t</>\n\t);\n});\n\nCropperCanvas.displayName = 'CropperCanvas';\n", "import React, { ReactNode, Component, RefObject, createRef } from 'react';\nimport cn from 'classnames';\nimport { MoveDirections, Point, SimpleTouch, distance } from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => void;\n\tonMoveEnd?: () => void;\n\tonMoveStart?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tuseAnchor?: boolean;\n\tactivationDistance?: number;\n}\n\nexport class DraggableElement extends Component<Props> {\n\ttouches: SimpleTouch[];\n\tstarted: boolean;\n\thovered: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tactivationDistance: 30,\n\t\tuseAnchor: true,\n\t\trerender: true,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.touches = [];\n\t\tthis.hovered = false;\n\t\tthis.started = false;\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t}\n\n\tprocessMove = (e: MouseEvent | TouchEvent, newTouches: SimpleTouch[]) => {\n\t\tconst container = this.container.current;\n\n\t\tif (container && this.touches.length) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\n\t\t\t\tif (this.props.onMove) {\n\t\t\t\t\tconst movingToAnchor = {\n\t\t\t\t\t\tleft:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientX - this.anchor.left - left) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientX - this.anchor.left - left),\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientY - this.anchor.top - top) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientY - this.anchor.top - top),\n\t\t\t\t\t};\n\n\t\t\t\t\tconst direction = {\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.left) {\n\t\t\t\t\t\tdirection.left = newTouches[0].clientX - this.touches[0].clientX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.top) {\n\t\t\t\t\t\tdirection.top = newTouches[0].clientY - this.touches[0].clientY;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.props?.onMove(direction, e);\n\n\t\t\t\t\tthis.touches = [...newTouches];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onMoveEnd, onLeave } = this.props;\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tonMoveEnd?.();\n\t\t}\n\t\tif (this.hovered) {\n\t\t\tonLeave?.();\n\t\t\tthis.hovered = false;\n\t\t}\n\t\tthis.touches = [];\n\t};\n\n\tinitAnchor = (touch: SimpleTouch) => {\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tthis.anchor = {\n\t\t\t\tleft: touch.clientX - left,\n\t\t\t\ttop: touch.clientY - top,\n\t\t\t};\n\t\t}\n\t};\n\n\tonMouseOver = () => {\n\t\tconst { onEnter, disabled } = this.props;\n\t\tif (!this.hovered && !disabled) {\n\t\t\tthis.hovered = true;\n\t\t\tonEnter?.();\n\t\t}\n\t};\n\n\tonMouseLeave = () => {\n\t\tconst { onLeave } = this.props;\n\t\tif (this.hovered && !this.touches.length) {\n\t\t\tthis.hovered = false;\n\t\t\tonLeave?.();\n\t\t}\n\t};\n\n\tonTouchStart = (e: TouchEvent) => {\n\t\tconst { onEnter, onMoveStart, disabled } = this.props;\n\t\tif (e.cancelable) {\n\t\t\tthis.touches = Array.from(e.touches);\n\n\t\t\tconst shouldStartMove = !disabled && e.touches.length === 1;\n\t\t\tif (shouldStartMove) {\n\t\t\t\tthis.touches = Array.from(e.touches);\n\t\t\t\tonMoveStart?.();\n\t\t\t}\n\n\t\t\tif (!this.hovered && !disabled) {\n\t\t\t\tthis.hovered = true;\n\t\t\t\tonEnter?.();\n\t\t\t}\n\n\t\t\tif (this.started || shouldStartMove) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}\n\t};\n\n\tonTouchEnd = () => {\n\t\tthis.started = false;\n\t\tthis.processEnd();\n\t};\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.touches.length >= 1) {\n\t\t\tif (this.started) {\n\t\t\t\tthis.processMove(e, Array.from(e.touches));\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} else if (\n\t\t\t\tdistance(\n\t\t\t\t\t{ left: this.touches[0].clientX, top: this.touches[0].clientY },\n\t\t\t\t\t{ left: e.touches[0].clientX, top: e.touches[0].clientY },\n\t\t\t\t) > (this.props.activationDistance || 0)\n\t\t\t) {\n\t\t\t\tthis.initAnchor({\n\t\t\t\t\tclientX: e.touches[0].clientX,\n\t\t\t\t\tclientY: e.touches[0].clientY,\n\t\t\t\t});\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (e: MouseEvent) => {\n\t\tconst { onMoveStart, disabled } = this.props;\n\t\tif (!disabled && e.button === 0) {\n\t\t\tconst touch = {\n\t\t\t\tclientX: e.clientX,\n\t\t\t\tclientY: e.clientY,\n\t\t\t};\n\t\t\tthis.touches = [touch];\n\t\t\tthis.initAnchor(touch);\n\t\t\te.stopPropagation();\n\t\t\tonMoveStart?.();\n\t\t}\n\t};\n\n\tonMouseMove = (e: MouseEvent) => {\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tthis.processMove(e, [\n\t\t\t\t{\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t},\n\t\t\t]);\n\t\t\tif (e.preventDefault && e.cancelable) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.processEnd();\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: Readonly<Props>) {\n\t\tif (this.props.disabled && !prevProps.disabled) {\n\t\t\tthis.touches = [];\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn('advanced-cropper-draggable-element', className)}\n\t\t\t\tref={this.container}\n\t\t\t\tonMouseOver={this.onMouseOver}\n\t\t\t\tonMouseLeave={this.onMouseLeave}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n", "import React, { ReactNode } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tonDrag?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\tposition?: HorizontalCardinalDirection | VerticalCardinalDirection;\n}\n\nexport const LineWrapper = ({\n\tposition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n}: Props) => {\n\treturn (\n\t\t<DraggableElement\n\t\t\tclassName={cn([\n\t\t\t\t'advanced-cropper-line-wrapper',\n\t\t\t\tposition && `advanced-cropper-line-wrapper--${position}`,\n\t\t\t\tdisabled && `advanced-cropper-line-wrapper--disabled`,\n\t\t\t\tclassName,\n\t\t\t])}\n\t\t\tdisabled={disabled}\n\t\t\tonMove={onDrag}\n\t\t\tonMoveEnd={onDragEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t\tactivationDistance={0}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn([\n\t\t\t\t\t'advanced-cropper-line-wrapper__content',\n\t\t\t\t\tposition && `advanced-cropper-line-wrapper__content--${position}`,\n\t\t\t\t])}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</DraggableElement>\n\t);\n};\n", "import React, { useState } from 'react';\nimport cn from 'classnames';\nimport { CardinalDirection, MoveDirections } from 'advanced-cropper';\nimport { LineWrapper } from '../service/LineWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\tposition?: CardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleLine = ({\n\tposition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<LineWrapper\n\t\t\tclassName={cn('advanced-cropper-simple-line-wrapper', wrapperClassName, {\n\t\t\t\t[`advanced-cropper-simple-line-wrapper--${position}`]: !!position,\n\t\t\t})}\n\t\t\tposition={position}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-line',\n\t\t\t\t\thover && 'advanced-cropper-simple-line--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-line--${position}`]: !!position,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</LineWrapper>\n\t);\n};\n", "import React, { CSSProperties, ReactNode } from 'react';\nimport classnames from 'classnames';\nimport {\n\tHorizontalCardinalDirection,\n\tMoveDirections,\n\tVerticalCardinalDirection,\n\tgetDirectionNames,\n} from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tonDrag?: (shift: MoveDirections, event: MouseEvent | TouchEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tverticalPosition?: VerticalCardinalDirection;\n}\n\nexport const HandlerWrapper = ({\n\thorizontalPosition,\n\tverticalPosition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n\tstyle,\n}: Props) => {\n\tconst position =\n\t\thorizontalPosition || verticalPosition\n\t\t\t? getDirectionNames(horizontalPosition, verticalPosition).snakeCase\n\t\t\t: null;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={classnames(\n\t\t\t\tclassName,\n\t\t\t\t'advanced-cropper-handler-wrapper',\n\t\t\t\tposition && `advanced-cropper-handler-wrapper--${position}`,\n\t\t\t\tdisabled && 'advanced-cropper-handler-wrapper--disabled',\n\t\t\t)}\n\t\t>\n\t\t\t<DraggableElement\n\t\t\t\tclassName={'advanced-cropper-handler-wrapper__draggable'}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMove={onDrag}\n\t\t\t\tonMoveEnd={onDragEnd}\n\t\t\t\tonLeave={onLeave}\n\t\t\t\tonEnter={onEnter}\n\t\t\t\tactivationDistance={0}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DraggableElement>\n\t\t</div>\n\t);\n};\n", "import React, { CSSProperties, useState } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { HandlerWrapper } from '../service/HandlerWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\twrapperStyle?: CSSProperties;\n\tverticalPosition?: VerticalCardinalDirection;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (shift: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleHandler = ({\n\tverticalPosition,\n\thorizontalPosition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\twrapperStyle,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<HandlerWrapper\n\t\t\tstyle={wrapperStyle}\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-simple-handler-wrapper',\n\t\t\t\twrapperClassName,\n\t\t\t\tverticalPosition && `advanced-cropper-simple-handler-wrapper--${verticalPosition}`,\n\t\t\t\thorizontalPosition && `advanced-cropper-simple-handler-wrapper--${horizontalPosition}`,\n\t\t\t\thorizontalPosition &&\n\t\t\t\t\tverticalPosition &&\n\t\t\t\t\t`advanced-cropper-simple-handler-wrapper--${horizontalPosition}-${verticalPosition}`,\n\t\t\t\thover && 'advanced-cropper-simple-handler-wrapper--hover',\n\t\t\t)}\n\t\t\tverticalPosition={verticalPosition}\n\t\t\thorizontalPosition={horizontalPosition}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-handler',\n\t\t\t\t\thover && 'advanced-cropper-simple-handler--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${verticalPosition}`]: !!verticalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}`]: !!horizontalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}-${verticalPosition}`]:\n\t\t\t\t\t\t\thorizontalPosition && verticalPosition,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</HandlerWrapper>\n\t);\n};\n", "import React, { useMemo, ReactNode, CSSProperties, useState, FC } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tHorizontalCardinalDirection,\n\tVerticalCardinalDirection,\n\tMoveDirections,\n\tResizeOptions,\n\tgetDirectionNames,\n\tisCardinalDirection,\n\tisObject,\n\tCoordinates,\n\tResizeAnchor,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\n\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null] as const;\nconst VERTICAL_DIRECTIONS = ['south', 'north', null] as const;\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface Props {\n\tstyle?: CSSProperties;\n\tclassName?: string;\n\thandlerComponent?: HandlerComponent;\n\thandlers?: boolean | Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: boolean | Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tdisabled?: boolean;\n\tonResize?: (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => void;\n\tonResizeEnd?: () => void;\n\tchildren?: ReactNode;\n\treference?: Coordinates | null;\n}\n\ninterface HandlerNode {\n\tname: OrdinalDirection;\n\tcomponent: HandlerComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\tcontainerClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface LineNode {\n\tname: CardinalDirection;\n\tcomponent: LineComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface PointNode {\n\tname: OrdinalDirection;\n\tclassName: string;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n}\n\nexport const BoundingBox = ({\n\tstyle,\n\tclassName,\n\tchildren,\n\tonResize,\n\tonResizeEnd,\n\thandlerComponent = SimpleHandler,\n\thandlers = {\n\t\teastNorth: true,\n\t\tnorth: true,\n\t\twestNorth: true,\n\t\twest: true,\n\t\twestSouth: true,\n\t\tsouth: true,\n\t\teastSouth: true,\n\t\teast: true,\n\t},\n\thandlerClassNames = {},\n\thandlerWrapperClassNames = {},\n\tlines = {\n\t\twest: true,\n\t\tnorth: true,\n\t\teast: true,\n\t\tsouth: true,\n\t},\n\tlineComponent = SimpleLine,\n\tlineClassNames = {},\n\tlineWrapperClassNames = {},\n\tdisabled = false,\n\treference = null,\n}: Props) => {\n\tconst [lastReference, setLastReference] = useState<Coordinates | null>(null);\n\n\tconst points = useMemo(() => {\n\t\tconst result: PointNode[] = [];\n\t\tHORIZONTAL_DIRECTIONS.forEach((hDirection) => {\n\t\t\tVERTICAL_DIRECTIONS.forEach((vDirection) => {\n\t\t\t\tif (hDirection !== vDirection) {\n\t\t\t\t\tlet { snakeCase, camelCase } = getDirectionNames(hDirection, vDirection);\n\t\t\t\t\tif (snakeCase && camelCase) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\tname: camelCase,\n\t\t\t\t\t\t\tclassName: snakeCase,\n\t\t\t\t\t\t\tverticalPosition: vDirection,\n\t\t\t\t\t\t\thorizontalPosition: hDirection,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}, []);\n\n\tconst lineNodes = useMemo(() => {\n\t\tconst result: LineNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isCardinalDirection(point.name) && (isObject(lines) ? lines[point.name] : lines)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: lineComponent,\n\t\t\t\t\tclassName: cn(\n\t\t\t\t\t\tlineClassNames.default,\n\t\t\t\t\t\tlineClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line--${point.name}`,\n\t\t\t\t\t\tlineWrapperClassNames.default,\n\t\t\t\t\t\tlineWrapperClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineWrapperClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: lineClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, lines, lineComponent, lineClassNames, lineWrapperClassNames, disabled]);\n\n\tconst handlerNodes = useMemo(() => {\n\t\tconst result: HandlerNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isObject(handlers) ? handlers[point.name] : handlers) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: handlerComponent,\n\t\t\t\t\tclassName: cn(handlerClassNames.default, handlerClassNames[point.name]),\n\t\t\t\t\tcontainerClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper--${point.className}`,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler--${point.className}`,\n\t\t\t\t\t\thandlerWrapperClassNames.default,\n\t\t\t\t\t\thandlerWrapperClassNames[point.name],\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: handlerClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, handlers, handlerComponent, handlerClassNames, handlerWrapperClassNames, disabled]);\n\n\tconst onHandlerMove =\n\t\t(horizontalPosition: HorizontalCardinalDirection | null, verticalPosition: VerticalCardinalDirection | null) =>\n\t\t({ left, top }: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => {\n\t\t\tconst directions = {\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t};\n\n\t\t\tlet respectDirection: 'width' | 'height' | undefined;\n\t\t\tif (!verticalPosition && horizontalPosition) {\n\t\t\t\trespectDirection = 'width';\n\t\t\t} else if (verticalPosition && !horizontalPosition) {\n\t\t\t\trespectDirection = 'height';\n\t\t\t}\n\n\t\t\tif (!disabled) {\n\t\t\t\tif (onResize) {\n\t\t\t\t\tconst anchor = getDirectionNames(horizontalPosition, verticalPosition).camelCase;\n\t\t\t\t\tif (anchor) {\n\t\t\t\t\t\tonResize(anchor, directions, {\n\t\t\t\t\t\t\treference: lastReference || reference,\n\t\t\t\t\t\t\tpreserveAspectRatio: nativeEvent && nativeEvent.shiftKey,\n\t\t\t\t\t\t\trespectDirection,\n\t\t\t\t\t\t\tcompensate: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!lastReference) {\n\t\t\t\t\tsetLastReference(reference);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\tconst onHandlerMoveEnd = () => {\n\t\tonResizeEnd?.();\n\t\tsetLastReference(null);\n\t};\n\n\treturn (\n\t\t<div className={cn('advanced-cropper-bounding-box', className)} style={style}>\n\t\t\t{children}\n\t\t\t<div>\n\t\t\t\t{lineNodes.map((line) => (\n\t\t\t\t\t<line.component\n\t\t\t\t\t\tkey={line.name}\n\t\t\t\t\t\tdefaultClassName={line.className}\n\t\t\t\t\t\thoverClassName={line.hoverClassName}\n\t\t\t\t\t\twrapperClassName={line.wrapperClassName}\n\t\t\t\t\t\tposition={line.name}\n\t\t\t\t\t\tdisabled={line.disabled}\n\t\t\t\t\t\tonMove={onHandlerMove(line.horizontalPosition, line.verticalPosition)}\n\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{handlerNodes.map((handler) => {\n\t\t\t\t\tconst handlerElement = (\n\t\t\t\t\t\t<handler.component\n\t\t\t\t\t\t\tdefaultClassName={handler.className}\n\t\t\t\t\t\t\thoverClassName={handler.hoverClassName}\n\t\t\t\t\t\t\twrapperClassName={handler.wrapperClassName}\n\t\t\t\t\t\t\thorizontalPosition={handler.horizontalPosition}\n\t\t\t\t\t\t\tverticalPosition={handler.verticalPosition}\n\t\t\t\t\t\t\tdisabled={handler.disabled}\n\t\t\t\t\t\t\tonMove={onHandlerMove(handler.horizontalPosition, handler.verticalPosition)}\n\t\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={handler.name} className={handler.containerClassName}>\n\t\t\t\t\t\t\t{handlerElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n", "import React, { FC } from 'react';\nimport classnames from 'classnames';\n\ninterface Props {\n\tclassName?: string;\n}\n\nexport const StencilOverlay: FC<Props> = ({ className, children }) => {\n\treturn <div className={classnames('advanced-cropper-stencil-overlay', className)}>{children}</div>;\n};\n", "import { CropperTransitions, Animation } from 'advanced-cropper';\nimport { useRef, useState } from 'react';\n\nexport function useTransition<T>(transitions: CropperTransitions | null = null): [(callback: (progress: number) => void) => void, boolean] {\n\tconst animation = useRef(new Animation());\n\tconst [active, setActive] = useState(false);\n\n\treturn [\n\t\t(callback: (progress: number) => void) => {\n\t\t\tif (transitions && transitions.active) {\n\t\t\t\t\tanimation.current.start({\n\t\t\t\t\t\t...transitions,\n\t\t\t\t\t\tonStart() {\n\t\t\t\t\t\t\tsetActive(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonProgress(progress) {\n\t\t\t\t\t\t\tcallback(progress);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonStop() {\n\t\t\t\t\t\t\tsetActive(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n \t\t\t} else if (!animation.current.active) {\n\t\t\t\tcallback(1);\n\t\t\t}\n\t\t},\n\t\tactive,\n\t];\n}\n", "import React, { FC, ReactNode, useLayoutEffect, useRef, useState } from 'react';\nimport { Coordinates, CropperTransitions, deepCompare, isNumber } from 'advanced-cropper';\nimport classnames from 'classnames';\nimport { useTransition } from '../../hooks/useTransition';\n\ninterface Props {\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft?: number;\n\ttop?: number;\n\tchildren?: ReactNode;\n}\n\nexport const ArtificialTransition: FC<Props> = ({ className, transitions, children, ...values }) => {\n\tconst root = useRef<HTMLDivElement>(null);\n\n\tconst transitionValues = useRef<Partial<Coordinates>>(values);\n\n\tconst [rememberedValues, setRememberedValues] = useState(values);\n\n\tconst [runTransitions, transitionsActive] = useTransition(transitions);\n\n\tuseLayoutEffect(() => {\n\t\tif (!deepCompare(rememberedValues, values)) {\n\t\t\tsetRememberedValues(values);\n\n\t\t\tconst startValues = transitionsActive\n\t\t\t\t? {\n\t\t\t\t\t\t...transitionValues.current,\n\t\t\t\t  }\n\t\t\t\t: rememberedValues;\n\n\t\t\trunTransitions((progress) => {\n\t\t\t\tconst properties = ['left', 'top', 'height', 'width'] as const;\n\n\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\tconst desiredValue = values[property];\n\t\t\t\t\tconst startValue = startValues[property];\n\n\t\t\t\t\ttransitionValues.current[property] =\n\t\t\t\t\t\tisNumber(startValue) && isNumber(desiredValue)\n\t\t\t\t\t\t\t? startValue + (desiredValue - startValue) * progress\n\t\t\t\t\t\t\t: desiredValue;\n\t\t\t\t});\n\n\t\t\t\tif (root.current) {\n\t\t\t\t\troot.current.style.width = `${transitionValues.current.width}px`;\n\t\t\t\t\troot.current.style.height = `${transitionValues.current.height}px`;\n\t\t\t\t\troot.current.style.transform = `translate3d(${transitionValues.current.left}px, ${transitionValues.current.top}px, 0px)`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [rememberedValues, transitionsActive, values.width, values.height, values.top, values.left]);\n\n\tconst currentValues = transitionsActive ? transitionValues.current : values;\n\n\tconst rootStyle = {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: `${currentValues.width}px`,\n\t\theight: `${currentValues.height}px`,\n\t\ttransform: `translate3d(${currentValues.left}px, ${currentValues.top}px, 0px)`,\n\t};\n\n\treturn (\n\t\t<div ref={root} className={classnames('advanced-cropper-artificial-transition', className)} style={rootStyle}>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n", "import React, { FC, ReactNode } from 'react';\nimport { CropperTransitions } from 'advanced-cropper';\nimport classnames from 'classnames';\n\nimport { ArtificialTransition } from './ArtificialTransition';\n\ninterface Props {\n\tchildren?: ReactNode;\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft: number;\n\ttop: number;\n}\n\nexport const StencilWrapper: FC<Props> = ({ className, transitions, width, height, left, top, children }) => {\n\treturn (\n\t\t<ArtificialTransition\n\t\t\tclassName={classnames('advanced-cropper-stencil-wrapper', className)}\n\t\t\ttransitions={transitions}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t\ttop={top}\n\t\t\tleft={left}\n\t\t>\n\t\t\t{children}\n\t\t</ArtificialTransition>\n\t);\n};\n", "import React, { FC, ReactNode, useState } from 'react';\nimport cn from 'classnames';\nimport { useUpdateEffect } from '../../hooks/useUpdateEffect';\n\nexport interface StencilGridProps {\n\tvisible?: boolean;\n\tcolumns?: number;\n\trows?: number;\n\tclassName?: string;\n}\n\nexport const StencilGrid: FC<StencilGridProps> = ({ columns = 3, rows = 3, visible = false, className }) => {\n\tconst nodes: ReactNode[] = [];\n\n\tconst [currentColumns, setCurrentColumns] = useState(columns);\n\tconst [currentRows, setCurrentRows] = useState(rows);\n\n\tuseUpdateEffect(() => {\n\t\tif (visible) {\n\t\t\tsetCurrentRows(rows);\n\t\t\tsetCurrentColumns(columns);\n\t\t}\n\t}, [visible, columns, rows]);\n\n\tfor (let i = 0; i < currentRows; i++) {\n\t\tconst cells: ReactNode[] = [];\n\t\tfor (let j = 0; j < currentColumns; j++) {\n\t\t\tcells.push(\n\t\t\t\t<div\n\t\t\t\t\tkey={j}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-stencil-grid__cell',\n\t\t\t\t\t\ti === 0 && 'advanced-cropper-stencil-grid__cell--top',\n\t\t\t\t\t\ti === currentRows - 1 && 'advanced-cropper-stencil-grid__cell--bottom',\n\t\t\t\t\t\tj === 0 && 'advanced-cropper-stencil-grid__cell--left',\n\t\t\t\t\t\tj === currentColumns - 1 && 'advanced-cropper-stencil-grid__cell--right',\n\t\t\t\t\t)}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\t\tnodes.push(\n\t\t\t<div key={i} className={'advanced-cropper-stencil-grid__row'}>\n\t\t\t\t{cells}\n\t\t\t</div>,\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-stencil-grid',\n\t\t\t\tvisible && 'advanced-cropper-stencil-grid--visible',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{nodes}\n\t\t</div>\n\t);\n};\n", "import React, { FC, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n\tcreateAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tminAspectRatio?: number;\n\tmaxAspectRatio?: number;\n\taspectRatio?: RawAspectRatio;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n\tdisabled?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const RectangleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\taspectRatio,\n\t\t\tminAspectRatio,\n\t\t\tmaxAspectRatio,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\tnorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twest: true,\n\t\t\t\twestSouth: true,\n\t\t\t\tsouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t\teast: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t\tdisabled,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tconst resizeAllowed = resizable && !disabled;\n\t\tconst moveAllowed = movable && !disabled;\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: createAspectRatio(\n\t\t\t\taspectRatio || {\n\t\t\t\t\tminimum: minAspectRatio,\n\t\t\t\t\tmaximum: maxAspectRatio,\n\t\t\t\t},\n\t\t\t),\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && moveAllowed) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizeAllowed) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-rectangle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--movable': moveAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizable': resizeAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--disabled': disabled,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-rectangle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizeAllowed}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!moveAllowed}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-rectangle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nRectangleStencil.displayName = 'RectangleStencil';\n", "import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { RotateImageOptions } from '../types';\n\ninterface DefinedRotateImageOptions {\n\ttouch: boolean;\n}\n\nexport function useRotateImageOptions(rotateImage: RotateImageOptions | boolean): DefinedRotateImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\trotateImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[rotateImage],\n\t);\n}\n", "import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { ScaleImageOptions } from '../types';\n\ninterface DefinedScaleImageOptions {\n\ttouch: boolean;\n\twheel:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n}\n\nexport function useScaleImageOptions(scaleImage: ScaleImageOptions | boolean): DefinedScaleImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tscaleImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\twheel: {\n\t\t\t\t\t\tratio: 0.1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\twheel: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[scaleImage],\n\t);\n}\n", "import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { MoveImageOptions } from '../types';\n\ninterface DefinedMoveImageOptions {\n\ttouch: boolean;\n\tmouse: boolean;\n}\n\nexport function useMoveImageOptions(moveImage: MoveImageOptions | boolean): DefinedMoveImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tmoveImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\tmouse: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\tmouse: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[moveImage],\n\t);\n}\n", "import React, { ReactNode, CSSProperties, Component, RefObject, createRef } from 'react';\nimport {\n\tdebounce,\n\tDebouncedFunction,\n\tImageTransform,\n\tPoint,\n\tSimpleTouch,\n\ttouchesToImageTransform,\n\twheelEventToImageTransform,\n} from 'advanced-cropper';\n\ninterface Props {\n\tonTransform?: (transform: ImageTransform) => void;\n\tonTransformEnd?: () => void;\n\tonEvent?: (transformEvent: TransformableImageEvent, nativeEvent: Event) => unknown;\n\tdisabled?: boolean;\n\ttouchMove?: boolean;\n\tmouseMove?: boolean;\n\ttouchScale?: boolean;\n\ttouchRotate?: boolean;\n\twheelScale?:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n\ttimeout?: number;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tpreventDefault?: boolean;\n}\n\nexport class TransformableImageEvent {\n\tconstructor({ active }: { active: boolean }) {\n\t\tthis.active = active;\n\t\tthis.defaultPrevented = false;\n\t}\n\tpreventDefault() {\n\t\tthis.defaultPrevented = true;\n\t}\n\tdefaultPrevented: boolean;\n\tactive: boolean;\n}\n\nexport class TransformableImage extends Component<Props> {\n\ttouches: (SimpleTouch & { identifier?: number })[];\n\ttransforming: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\tdebouncedProcessEnd: DebouncedFunction<TransformableImage['processEnd']>;\n\n\tstatic defaultProps = {\n\t\ttouchMove: true,\n\t\tmouseMove: true,\n\t\ttouchScale: true,\n\t\ttouchRotate: false,\n\t\twheelScale: true,\n\t\ttimeout: 500,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.transforming = false;\n\t\tthis.touches = [];\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t\tthis.debouncedProcessEnd = debounce(this.processEnd, props.timeout);\n\t}\n\n\tprocessMove = (newTouches: SimpleTouch[]) => {\n\t\tconst { onTransform, touchScale, touchMove, touchRotate } = this.props;\n\t\tconst container = this.container.current;\n\t\tif (container && onTransform) {\n\t\t\tonTransform(\n\t\t\t\ttouchesToImageTransform(newTouches, this.touches, container, {\n\t\t\t\t\tscale: touchScale,\n\t\t\t\t\trotate: touchRotate,\n\t\t\t\t\tmove: touchMove,\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis.touches = newTouches;\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onTransformEnd } = this.props;\n\t\tif (this.transforming) {\n\t\t\tthis.transforming = false;\n\t\t\tif (onTransformEnd) {\n\t\t\t\tonTransformEnd();\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessStart = () => {\n\t\tthis.transforming = true;\n\t\tthis.debouncedProcessEnd.clear();\n\t};\n\n\tprocessEvent = (nativeEvent: Event) => {\n\t\tconst { onEvent, disabled, preventDefault = true } = this.props;\n\t\tconst transformEvent = new TransformableImageEvent({ active: this.transforming });\n\n\t\tif (onEvent) {\n\t\t\tonEvent(transformEvent, nativeEvent);\n\t\t} else if (preventDefault) {\n\t\t\tnativeEvent.preventDefault();\n\t\t\tnativeEvent.stopPropagation();\n\t\t}\n\n\t\treturn !disabled && !transformEvent.defaultPrevented;\n\t};\n\n\tonWheel = (event: WheelEvent) => {\n\t\tconst { onTransform, wheelScale } = this.props;\n\t\tconst container = this.container.current;\n\n\t\tif (wheelScale) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processStart();\n\t\t\t\tif (onTransform && container) {\n\t\t\t\t\tonTransform(\n\t\t\t\t\t\twheelEventToImageTransform(event, container, wheelScale === true ? 0.1 : wheelScale.ratio),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!this.touches.length) {\n\t\t\t\t\tthis.debouncedProcessEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchStart = (event: TouchEvent) => {\n\t\tconst { touchMove, touchScale, touchRotate } = this.props;\n\t\tif (event.cancelable && (touchMove || ((touchScale || touchRotate) && event.touches.length > 1))) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst container = this.container.current;\n\t\t\t\tif (container) {\n\t\t\t\t\tconst { left, top, bottom, right } = container.getBoundingClientRect();\n\t\t\t\t\tthis.touches = Array.from(event.touches).filter(\n\t\t\t\t\t\t(touch) =>\n\t\t\t\t\t\t\ttouch.clientX > left &&\n\t\t\t\t\t\t\ttouch.clientX < right &&\n\t\t\t\t\t\t\ttouch.clientY > top &&\n\t\t\t\t\t\t\ttouch.clientY < bottom,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchEnd = (event: TouchEvent) => {\n\t\tif (event.touches.length === 0) {\n\t\t\tthis.touches = [];\n\t\t\tthis.processEnd();\n\t\t}\n\t};\n\n\tonTouchMove = (event: TouchEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tconst touches = [...event.touches].filter(\n\t\t\t\t(touch) =>\n\t\t\t\t\t!touch.identifier ||\n\t\t\t\t\tthis.touches.find((anotherTouch) => anotherTouch.identifier === touch.identifier),\n\t\t\t);\n\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove(touches);\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (event: MouseEvent) => {\n\t\tconst { mouseMove } = this.props;\n\t\tif (mouseMove && 'buttons' in event && event.buttons === 1) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst touch = {\n\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t};\n\t\t\t\tthis.touches = [touch];\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseMove = (event: MouseEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove([\n\t\t\t\t\t{\n\t\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.touches = [];\n\t\tthis.processEnd();\n\t};\n\n\tshouldComponentUpdate(): boolean {\n\t\treturn true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t\tcontainer.removeEventListener('wheel', this.onWheel);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('wheel', this.onWheel, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, children, style } = this.props;\n\t\treturn (\n\t\t\t<div className={className} style={style} ref={this.container}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n", "import React, { CSSProperties, ReactNode } from 'react';\nimport { CropperTransitions, ImageTransform } from 'advanced-cropper';\nimport { useRotateImageOptions } from '../../hooks/useRotateImageOptions';\nimport { useScaleImageOptions } from '../../hooks/useScaleImageOptions';\nimport { useMoveImageOptions } from '../../hooks/useMoveImageOptions';\nimport { MoveImageOptions, RotateImageOptions, ScaleImageOptions } from '../../types';\nimport { TransformableImage } from './TransformableImage';\n\ninterface DesiredCropperRef {\n\ttransformImage: (transform: ImageTransform) => void;\n\ttransformImageEnd: () => void;\n\tgetTransitions: () => CropperTransitions;\n}\n\nexport interface CropperBackgroundWrapperProps {\n\tcropper: DesiredCropperRef;\n\trotateImage?: boolean | RotateImageOptions;\n\tscaleImage?: boolean | ScaleImageOptions;\n\tmoveImage?: boolean | MoveImageOptions;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\ttimeout?: number;\n\tdisabled?: boolean;\n}\n\nexport const CropperBackgroundWrapper = ({\n\tscaleImage = true,\n\tmoveImage = true,\n\trotateImage = false,\n\tchildren,\n\tclassName,\n\tstyle,\n\tcropper,\n\ttimeout,\n\tdisabled\n}: CropperBackgroundWrapperProps) => {\n\tconst transitions = cropper.getTransitions();\n\n\tconst rotateImageOptions = useRotateImageOptions(rotateImage);\n\tconst scaleImageOptions = useScaleImageOptions(scaleImage);\n\tconst moveImageOptions = useMoveImageOptions(moveImage);\n\n\treturn (\n\t\t<TransformableImage\n\t\t\tclassName={className}\n\t\t\tstyle={style}\n\t\t\tonTransform={cropper.transformImage}\n\t\t\tonTransformEnd={cropper.transformImageEnd}\n\t\t\ttouchMove={moveImageOptions.touch}\n\t\t\tmouseMove={moveImageOptions.mouse}\n\t\t\ttouchScale={scaleImageOptions.touch}\n\t\t\twheelScale={scaleImageOptions.wheel}\n\t\t\ttouchRotate={rotateImageOptions.touch}\n\t\t\tdisabled={transitions.active || disabled}\n\t\t\tpreventDefault={!disabled}\n\t\t\ttimeout={timeout}\n\t\t>\n\t\t\t{children}\n\t\t</TransformableImage>\n\t);\n};\n", "import React, { useImperativeHandle, useRef, CSSProperties, Ref } from 'react';\nimport cn from 'classnames';\nimport {\n\tDrawOptions,\n\tDefaultSettings,\n\tdefaultStencilConstraints,\n\tCoreSettings,\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tModifierSettings,\n\tInitializeSettings,\n} from 'advanced-cropper';\n\nimport {\n\tCropperBackgroundWrapperComponent,\n\tCropperWrapperComponent,\n\tStencilComponent,\n\tCropperBackgroundComponent,\n\tArbitraryProps,\n\tStencilConstraints,\n\tSettingsExtension,\n\tExtendedSettings,\n\tCustomCropperRef,\n\tCropperBoundaryComponent,\n} from '../types';\nimport { CropperStateHook, CropperInstanceSettings, CropperInstanceSettingsProp } from '../hooks/useCropperInstance';\nimport { createCropper } from '../service/cropper';\nimport { AbstractCropperHookProps, useAbstractCropper } from '../hooks/useAbstractCropper';\nimport { StretchableBoundary } from './service/StretchableBoundary';\nimport { CropperWrapper } from './service/CropperWrapper';\nimport { CropperBackgroundImage } from './service/CropperBackgroundImage';\nimport { CropperCanvas } from './service/CropperCanvas';\nimport { RectangleStencil } from './stencils/RectangleStencil';\nimport { CropperBackgroundWrapper } from './service/CropperBackgroundWrapper';\n\nexport type AbstractCropperSettingsProp<Settings extends CropperInstanceSettings> =\n\tCropperInstanceSettingsProp<Settings>;\n\nexport type AbstractCropperSettings = DefaultSettings & CoreSettings & ModifierSettings & InitializeSettings;\n\nexport interface AbstractCropperRef<Settings extends AbstractCropperSettings = AbstractCropperSettings> {\n\treset: () => void;\n\trefresh: () => void;\n\tclear: () => void;\n\tsetCoordinates: CropperStateHook['setCoordinates'];\n\tsetState: CropperStateHook['setState'];\n\tsetImage: (image: CropperImage) => void;\n\tflipImage: CropperStateHook['flipImage'];\n\tzoomImage: CropperStateHook['zoomImage'];\n\trotateImage: CropperStateHook['rotateImage'];\n\treconcileState: CropperStateHook['reconcileState'];\n\tmoveImage: CropperStateHook['moveImage'];\n\tmoveCoordinates: CropperStateHook['moveCoordinates'];\n\tmoveCoordinatesEnd: CropperStateHook['moveCoordinatesEnd'];\n\tresizeCoordinates: CropperStateHook['resizeCoordinates'];\n\tresizeCoordinatesEnd: CropperStateHook['resizeCoordinatesEnd'];\n\ttransformImage: CropperStateHook['transformImage'];\n\ttransformImageEnd: CropperStateHook['transformImageEnd'];\n\tgetCoordinates: CropperStateHook['getCoordinates'];\n\tgetVisibleArea: CropperStateHook['getVisibleArea'];\n\tgetTransforms: CropperStateHook['getTransforms'];\n\tgetStencilCoordinates: CropperStateHook['getStencilCoordinates'];\n\tgetDefaultState: () => CropperState | null;\n\tgetCanvas: (options?: DrawOptions) => HTMLCanvasElement | null;\n\tgetSettings: () => Settings;\n\tgetImage: () => CropperImage | null;\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface AbstractCropperProps<Settings extends AbstractCropperSettings>\n\textends Omit<AbstractCropperHookProps<Settings>, 'settings'> {\n\tbackgroundComponent?: CropperBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tbackgroundClassName?: string;\n\tbackgroundWrapperComponent?: CropperBackgroundWrapperComponent;\n\tbackgroundWrapperProps?: ArbitraryProps;\n\tbackgroundWrapperClassName?: string;\n\twrapperComponent?: CropperWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstencilComponent?: StencilComponent;\n\tstencilProps?: ArbitraryProps;\n\tstencilConstraints?: StencilConstraints<AbstractCropperSettingsProp<Settings>>;\n\tclassName?: string;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\tstyle?: CSSProperties;\n\tsettings: CropperInstanceSettingsProp<Settings>;\n\tdisabled?: boolean;\n}\n\nexport type AbstractCropperIntrinsicProps<Settings extends AbstractCropperSettings> = Omit<\n\tAbstractCropperProps<Settings>,\n\t'settings'\n>;\n\nconst AbstractCropperComponent = <Extension extends SettingsExtension = {}>(\n\tprops: AbstractCropperProps<ExtendedSettings<Extension>>,\n\tref: Ref<CustomCropperRef<Extension>>,\n) => {\n\tconst {\n\t\tstyle,\n\t\tclassName,\n\t\tstencilComponent = RectangleStencil,\n\t\tstencilConstraints = defaultStencilConstraints,\n\t\tstencilProps = {},\n\t\twrapperComponent = CropperWrapper,\n\t\twrapperProps = {},\n\t\tbackgroundComponent = CropperBackgroundImage,\n\t\tbackgroundProps = {},\n\t\tbackgroundClassName,\n\t\tbackgroundWrapperComponent = CropperBackgroundWrapper,\n\t\tbackgroundWrapperProps = {},\n\t\tboundaryComponent = StretchableBoundary,\n\t\tboundaryProps,\n\t\tboundaryClassName,\n\t\tcanvas = true,\n\t\tcrossOrigin = true,\n\t\tdisabled,\n\t\tsettings,\n\t\t...parameters\n\t} = props;\n\n\tconst stencilRef = useRef<StencilComponent>(null);\n\n\tconst { cropper, image, refs } = useAbstractCropper(() => ({\n\t\t...parameters,\n\t\tcrossOrigin,\n\t\tstencilProps,\n\t\tcanvas,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\t...stencilConstraints(settings, {\n\t\t\t\t...stencilProps,\n\t\t\t\t...stencilRef.current,\n\t\t\t}),\n\t\t},\n\t}));\n\n\tconst StencilComponent = stencilComponent;\n\n\tconst WrapperComponent = wrapperComponent;\n\n\tconst BackgroundWrapperComponent = backgroundWrapperComponent;\n\n\tconst BackgroundComponent = backgroundComponent;\n\n\tconst BoundaryComponent = boundaryComponent;\n\n\tuseImperativeHandle(ref, () => cropper);\n\n\tconst deprecatedWrapperProps = {\n\t\tloading: cropper.isLoading(),\n\t\tloaded: cropper.isLoaded(),\n\t};\n\n\treturn (\n\t\t<WrapperComponent\n\t\t\t{...wrapperProps}\n\t\t\tdisabled={disabled}\n\t\t\tclassName={cn('advanced-cropper', className)}\n\t\t\tcropper={cropper}\n\t\t\tstyle={style}\n\t\t\t{...deprecatedWrapperProps}\n\t\t>\n\t\t\t<BoundaryComponent\n\t\t\t\t{...boundaryProps}\n\t\t\t\tref={refs.boundary}\n\t\t\t\tclassName={cn('advanced-cropper__boundary', boundaryClassName)}\n\t\t\t>\n\t\t\t\t<BackgroundWrapperComponent\n\t\t\t\t\t{...backgroundWrapperProps}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tcropper={cropper}\n\t\t\t\t\tclassName={'advanced-cropper__background-wrapper'}\n\t\t\t\t>\n\t\t\t\t\t{cropper.getState() && (\n\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\tref={refs.image}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tcropper={cropper}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper__background', backgroundClassName)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<StencilComponent {...stencilProps} disabled={disabled} ref={stencilRef} cropper={cropper} image={image} />\n\t\t\t\t</BackgroundWrapperComponent>\n\t\t\t\t{canvas && <CropperCanvas ref={refs.canvas} />}\n\t\t\t</BoundaryComponent>\n\t\t</WrapperComponent>\n\t);\n};\n\nexport const AbstractCropper = createCropper(AbstractCropperComponent);\n", "export const defaultSettings = [\n\t'transformImage',\n\t'moveCoordinates',\n\t'resizeCoordinates',\n\t'defaultCoordinates',\n\t'defaultVisibleArea',\n\t'areaPositionRestrictions',\n\t'areaSizeRestrictions',\n\t'sizeRestrictions',\n\t'positionRestrictions',\n\t'aspectRatio',\n\t'minWidth',\n\t'minHeight',\n\t'maxWidth',\n\t'maxHeight',\n\t'defaultSize',\n\t'defaultPosition',\n\t'defaultTransforms',\n\t'imageRestriction',\n\t'priority',\n];\n", "import { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperIntrinsicProps } from '../components/AbstractCropper';\nimport { defaultSettings } from '../service/constants';\nimport { CoreSettings, DefaultSettings, ModifierSettings } from '../../../../Advanced Cropper/advanced-cropper/dist';\n\ntype Props<Extension extends SettingsExtension> = AbstractCropperIntrinsicProps<ExtendedSettings<Extension>>;\n\nexport function useAbstractCropperProps<Extension extends SettingsExtension>(\n\tprops: Props<Extension>,\n\tsettings: string[] = defaultSettings,\n) {\n\tconst result: any = { settings: {}, props: {} };\n\n\t(Object.keys(props) as (keyof typeof props)[]).forEach((key) => {\n\t\tif (settings.some((setting) => setting === key)) {\n\t\t\tresult.settings[key] = props[key];\n\t\t} else {\n\t\t\tresult.props[key] = props[key];\n\t\t}\n\t});\n\n\treturn result as {\n\t\tsettings: Extension & Partial<DefaultSettings & CoreSettings & ModifierSettings>;\n\t\tprops: Props<Extension>;\n\t};\n}\n", "import React, { forwardRef, Ref } from 'react';\nimport {\n\tdefaultSize,\n\tsizeRestrictions,\n\taspectRatio,\n\tfixedStencil,\n\tStencilSize,\n\tfixedStencilConstraints,\n} from 'advanced-cropper/extensions/stencil-size';\nimport { withDefaultSizeRestrictions } from 'advanced-cropper/defaults';\nimport { CustomCropperProps, CustomCropperRef } from '../../types';\nimport { AbstractCropper } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { defaultSettings } from '../../service/constants';\n\ntype UnavailableProps = 'sizeRestrictions' | 'aspectRatio';\n\nexport interface FixedCropperSettings {\n\tstencilSize: StencilSize<this>;\n}\n\nexport type FixedCropperProps = Omit<CustomCropperProps<FixedCropperSettings>, UnavailableProps>;\n\nexport type FixedCropperRef = CustomCropperRef<FixedCropperSettings>;\n\nexport const FixedCropper = forwardRef((props: FixedCropperProps, ref?: Ref<FixedCropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props, [...defaultSettings, 'stencilSize']);\n\treturn (\n\t\t<AbstractCropper<FixedCropperSettings>\n\t\t\tpostProcess={fixedStencil}\n\t\t\tstencilConstraints={fixedStencilConstraints}\n\t\t\t{...cropperProps.props}\n\t\t\tsettings={{\n\t\t\t\tdefaultSize,\n\t\t\t\taspectRatio,\n\t\t\t\tsizeRestrictions: withDefaultSizeRestrictions(sizeRestrictions),\n\t\t\t\t...cropperProps.settings,\n\t\t\t\ttransformImage: {\n\t\t\t\t\t...cropperProps.settings.transformImage,\n\t\t\t\t\tadjustStencil: false,\n\t\t\t\t},\n\t\t\t}}\n\t\t\tref={ref}\n\t\t/>\n\t);\n});\n\nFixedCropper.displayName = 'FixedCropper';\n", "import React, { forwardRef, Ref } from 'react';\nimport { isUndefined } from 'advanced-cropper';\nimport { StencilSize } from 'advanced-cropper/extensions/stencil-size';\nimport { CustomCropperProps, CustomCropperRef, ExtendedSettings, SettingsExtension } from '../../types';\nimport { hybridStencilAutoZoom } from '../../deprecated/hybridAutoZoom';\nimport { useDeprecationWarning } from '../../hooks/useDeprecationWarning';\nimport { AbstractCropper, AbstractCropperIntrinsicProps } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { FixedCropper, FixedCropperRef, FixedCropperSettings } from './FixedCropper';\n\ninterface DeprecatedCropperSettings {\n\tstencilSize?: StencilSize;\n\tautoZoom?: boolean;\n}\n\nexport type CropperProps<Extension extends SettingsExtension = {}> = CustomCropperProps<Extension>;\n\nexport type CropperRef<Extension extends SettingsExtension = {}> = CustomCropperRef<Extension>;\n\nexport const Cropper = forwardRef((props: CropperProps, ref?: Ref<CropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props);\n\n\tconst intrinsicProps = cropperProps.props;\n\n\t// Process the deprecated properties\n\tconst { stencilSize, autoZoom, ...actualSettings } = cropperProps.settings as DeprecatedCropperSettings;\n\n\tconst deprecationWarning = useDeprecationWarning();\n\n\tif (!isUndefined(autoZoom)) {\n\t\tif (intrinsicProps.postProcess || stencilSize) {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function.`,\n\t\t\t);\n\t\t} else {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'`,\n\t\t\t);\n\t\t\tintrinsicProps.postProcess = hybridStencilAutoZoom;\n\t\t}\n\t}\n\n\tif (!isUndefined(stencilSize)) {\n\t\tdeprecationWarning(\n\t\t\t`prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead.`,\n\t\t);\n\t\treturn (\n\t\t\t<FixedCropper\n\t\t\t\tref={ref as Ref<FixedCropperRef>}\n\t\t\t\tstencilSize={stencilSize}\n\t\t\t\t{...actualSettings}\n\t\t\t\t{...(intrinsicProps as AbstractCropperIntrinsicProps<ExtendedSettings<FixedCropperSettings>>)}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <AbstractCropper {...intrinsicProps} ref={ref} settings={actualSettings} />;\n});\n\nCropper.displayName = 'CropperComponent';\n", "import React, { ComponentType, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = ComponentType<any>;\n\ntype LineComponent = ComponentType<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tdisabled?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const CircleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twestSouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t\tdisabled,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tconst resizeAllowed = resizable && !disabled;\n\t\tconst moveAllowed = movable && !disabled;\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: 1,\n\t\t\tboundingBox: 'circle',\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && moveAllowed) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizeAllowed) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-circle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--movable': moveAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizable': resizeAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--disabled': disabled,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-circle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizeAllowed}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!moveAllowed}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-circle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nCircleStencil.displayName = 'CircleStencil';\n", "import React, { forwardRef, HTMLAttributes, RefObject } from 'react';\nimport cn from 'classnames';\n\ninterface Props extends HTMLAttributes<HTMLImageElement> {\n\tsrc?: string | null;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n}\n\nexport const CropperSource = forwardRef<HTMLImageElement, Props>(\n\t({ src, crossOrigin = true, ...props }: Props, ref) => {\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref as RefObject<HTMLImageElement>}\n\t\t\t\tsrc={src}\n\t\t\t\tclassName={cn('advanced-cropper-source')}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperSource.displayName = 'CropperSource';\n", "import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperFade } from '../service/CropperFade';\n\ninterface DesiredCropperRef {\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperPreviewWrapper: FC<CropperPreviewWrapperProps> = ({ children, cropper, className, style }) => {\n\treturn (\n\t\t<div className={cn(className, 'cropper-preview-wrapper')} style={style}>\n\t\t\t<CropperFade visible={cropper?.isLoaded()} className={'cropper-preview-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n", "import React, { CSSProperties } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, Size, getPreviewStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperPreviewBackgroundProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tsize?: Size | null;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperPreviewBackground = ({\n\tclassName,\n\tcropper,\n\tcrossOrigin = true,\n\tsize,\n\tstyle,\n}: CropperPreviewBackgroundProps) => {\n\tconst state = cropper.getState();\n\tconst transitions = cropper.getTransitions();\n\tconst image = cropper.getImage();\n\n\tconst transformStyles = size && image && state?.coordinates ? getPreviewStyle(image, state, size, transitions) : {};\n\n\tconst src = image ? image.src : undefined;\n\n\treturn src ? (\n\t\t<img\n\t\t\tkey={src}\n\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\tsrc={src}\n\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\tstyle={{\n\t\t\t\t...transformStyles,\n\t\t\t\t...style,\n\t\t\t}}\n\t\t\tonMouseDown={preventDefault}\n\t\t/>\n\t) : null;\n};\n", "import React, {\n\tRefObject,\n\tComponentType,\n\tCSSProperties,\n\tforwardRef,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport cn from 'classnames';\nimport {\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tSize,\n\tratio,\n\tisGreater,\n\tstretchPreviewBoundary,\n} from 'advanced-cropper';\nimport { StretchableBoundary, StretchableBoundaryMethods } from '../service/StretchableBoundary';\nimport { useWindowResize } from '../../hooks/useWindowResize';\nimport { ArbitraryProps, CropperBoundaryComponent } from '../../types';\nimport { useForceRerender } from '../../hooks/useForceRerender';\nimport { CropperPreviewWrapper } from './CropperPreviewWrapper';\nimport { CropperPreviewBackground } from './CropperPreviewBackground';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetImage: () => CropperImage | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewRef {\n\trefresh: () => void;\n\tupdate: (cropper?: DesiredCropperRef) => void;\n}\n\ntype PreviewWrapperComponent = ComponentType<{\n\tcropper: any;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tloading?: boolean;\n\tloaded?: boolean;\n}>;\n\ntype PreviewBackgroundComponent = ComponentType<{\n\tcropper: any;\n\tsize: Size | null;\n\tclassName?: string;\n}>;\n\ninterface Props {\n\tstate?: CropperState | null;\n\timage?: CropperImage | null;\n\ttransitions?: CropperTransitions | null;\n\tloading?: boolean;\n\tloaded?: boolean;\n\tclassName?: string;\n\tcontentClassName?: string;\n\tbackgroundClassName?: string;\n\tbackgroundComponent?: PreviewBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\twrapperComponent?: PreviewWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstyle?: CSSProperties;\n\tcropper?: RefObject<DesiredCropperRef | null>;\n}\n\nexport const CropperPreview = forwardRef<CropperPreviewRef, Props>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\tstate = null,\n\t\t\timage = null,\n\t\t\ttransitions = null,\n\t\t\tbackgroundComponent = CropperPreviewBackground,\n\t\t\tbackgroundProps,\n\t\t\tbackgroundClassName,\n\t\t\tboundaryComponent = StretchableBoundary,\n\t\t\tboundaryProps,\n\t\t\tboundaryClassName,\n\t\t\twrapperComponent = CropperPreviewWrapper,\n\t\t\twrapperProps,\n\t\t\tloaded = true,\n\t\t\tloading = false,\n\t\t\tstyle,\n\t\t\tcropper,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst rerender = useForceRerender();\n\n\t\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\n\t\tconst internalInstance = useRef<DesiredCropperRef | null>(null);\n\n\t\tconst instance = cropper || (internalInstance.current ? internalInstance : {\n\t\t\tcurrent: {\n\t\t\t\tgetState: () => state,\n\t\t\t\tgetTransitions: () => transitions,\n\t\t\t\tgetImage: () => image,\n\t\t\t\tisLoaded: () => loaded,\n\t\t\t\tisLoading: () => loading,\n\t\t\t},\n\t\t});\n\n\t\tconst [size, setSize] = useState<Size | null>(null);\n\n\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\n\t\tconst src = instance.current?.getImage()?.src;\n\n\t\tconst contentStyle = size\n\t\t\t? {\n\t\t\t\t\twidth: `${size.width}px`,\n\t\t\t\t\theight: `${size.height}px`,\n\t\t\t  }\n\t\t\t: {};\n\n\t\tconst refresh = () => {\n\t\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\t\t\tif (boundaryRef.current && coordinates) {\n\t\t\t\tboundaryRef.current.stretchTo(coordinates).then((size) => {\n\t\t\t\t\tif (size && coordinates) {\n\t\t\t\t\t\tif (isGreater(ratio(coordinates), ratio(size))) {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.width,\n\t\t\t\t\t\t\t\theight: size.width / ratio(coordinates),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.height * ratio(coordinates),\n\t\t\t\t\t\t\t\theight: size.height,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetSize(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trerender();\n\t\t};\n\n\t\tuseWindowResize(refresh);\n\n\t\tuseLayoutEffect(refresh, [coordinates?.height, coordinates?.width]);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\trefresh,\n\t\t\tupdate(cropper?: DesiredCropperRef) {\n\t\t\t\tif (cropper) {\n\t\t\t\t\tinternalInstance.current = cropper;\n\t\t\t\t} else {\n\t\t\t\t\tinternalInstance.current = null;\n\t\t\t\t}\n\t\t\t\trefresh();\n\t\t\t}\n\t\t}));\n\n\t\tconst WrapperComponent = wrapperComponent;\n\n\t\tconst BackgroundComponent = backgroundComponent;\n\n\t\tconst BoundaryComponent = boundaryComponent;\n\n\t\treturn (\n\t\t\t<WrapperComponent\n\t\t\t\t{...wrapperProps}\n\t\t\t\tclassName={cn(className, 'advanced-cropper-preview')}\n\t\t\t\tcropper={instance.current}\n\t\t\t\tstyle={style}\n\t\t\t>\n\t\t\t\t<BoundaryComponent\n\t\t\t\t\tref={boundaryRef}\n\t\t\t\t\tstretchAlgorithm={stretchPreviewBoundary}\n\t\t\t\t\t{...boundaryProps}\n\t\t\t\t\tclassName={cn('advanced-cropper-preview__boundary', boundaryClassName)}\n\t\t\t\t>\n\t\t\t\t\t<div className={cn(contentClassName, 'advanced-cropper-preview__content')} style={contentStyle}>\n\t\t\t\t\t\t{instance.current && (\n\t\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\t\tcropper={instance.current}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\tbackgroundClassName,\n\t\t\t\t\t\t\t\t\t'advanced-cropper-preview__image',\n\t\t\t\t\t\t\t\t\tsrc && 'advanced-cropper-preview__image--visible',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</BoundaryComponent>\n\t\t\t</WrapperComponent>\n\t\t);\n\t},\n);\n", "import { MutableRefObject, LegacyRef, RefCallback } from 'react';\n\nexport function mergeRefs<T = any>(refs: (MutableRefObject<T> | LegacyRef<T>)[]): RefCallback<T> {\n\treturn (value) => {\n\t\trefs.forEach((ref) => {\n\t\t\tif (typeof ref === 'function') {\n\t\t\t\tref(value);\n\t\t\t} else if (ref != null) {\n\t\t\t\t(ref as MutableRefObject<T | null>).current = value;\n\t\t\t}\n\t\t});\n\t};\n}\n"],
  "mappings": "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",
  "names": ["d", "b", "__assign", "aspectRatio", "sizeRestrictions", "sizeRestrictions", "sizeRestrictions", "ImageRestriction", "Priority", "sizeRestrictions", "aspectRatio", "ratio", "SetCoordinatesMode", "aspectRatio", "sizeRestrictions", "coordinates", "transform", "aspectRatio", "sizeRestrictions", "sizeRestrictions", "aspectRatio", "sizeRestrictions", "sizeRestrictions", "sizeRestrictions", "aspectRatio", "sizeRestrictions", "ratio", "sizeRestrictions", "aspectRatio", "sizeRestrictions", "state", "AbstractCropperInstance", "_a", "transformImageAlgorithm", "moveCoordinatesAlgorithm", "resizeCoordinatesAlgorithm", "Animation", "ratio", "defaultSize", "sizeRestrictions", "aspectRatio", "callback", "CropperInstance", "_a", "image", "_b", "React", "cn", "DraggableElement", "classnames", "HORIZONTAL_DIRECTIONS", "VERTICAL_DIRECTIONS", "aspectRatio", "DraggableArea", "TransformableImageEvent", "TransformableImage", "preventDefault", "defaultSize", "deprecationWarning", "coordinates", "size", "ratio", "cropper"]
}
