import{j as e}from"./index-425a4db3.js";import{r as l}from"./vendor-8a332d8f.js";import{P as Y,a as b}from"./PDFButton-bafdfd11.js";import{P as Z,a as ee,F as ae}from"./PdfProgress-f427ce92.js";import{P as te}from"./PdfToolWrapper-bef57729.js";import{I as N,a2 as re,ar as se,as as ie,a9 as oe}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const pe=()=>{const[c,F]=l.useState([]),[s,g]=l.useState({pageSize:"A4",orientation:"portrait",margin:20,imagePerPage:1,maintainAspectRatio:!0}),[C,y]=l.useState("idle"),[W,x]=l.useState(0),[B,m]=l.useState(""),[D,S]=l.useState(null),M=l.useCallback(a=>{const i=a.filter(r=>r.type.startsWith("image/")).map(r=>({file:r,id:`${r.name}-${Date.now()}-${Math.random()}`,name:r.name,size:(r.size/(1024*1024)).toFixed(2)+" MB",url:URL.createObjectURL(r)}));F(r=>[...r,...i]),y("idle"),x(0),m(""),S(null)},[]),H=l.useCallback(a=>{F(t=>{const i=t.filter(o=>o.id!==a),r=t.find(o=>o.id===a);return r&&URL.revokeObjectURL(r.url),i})},[]),L=l.useCallback((a,t)=>{F(i=>{const r=i.findIndex(I=>I.id===a);if(r===-1)return i;const o=t==="up"?r-1:r+1;if(o<0||o>=i.length)return i;const d=[...i];return[d[r],d[o]]=[d[o],d[r]],d})},[]),$=()=>{let a;switch(s.pageSize){case"A4":a=b.A4;break;case"Letter":a=b.Letter;break;case"Legal":a=b.Legal;break;case"A3":a=b.A3;break;case"A5":a=b.A5;break;case"Custom":a=[s.customWidth||612,s.customHeight||792];break;default:a=b.A4}return s.orientation==="landscape"?[a[1],a[0]]:a},E=async()=>{if(c.length===0){y("error"),m("Please upload at least one image.");return}try{y("processing"),x(0),m("Creating PDF document...");const a=await Y.create(),[t,i]=$(),r=s.margin,o=t-r*2,d=i-r*2;x(10);for(let h=0;h<c.length;h+=s.imagePerPage){m(`Processing page ${Math.floor(h/s.imagePerPage)+1}...`),x(10+h/c.length*80);const q=a.addPage([t,i]),z=c.slice(h,h+s.imagePerPage);for(let w=0;w<z.length;w++){const p=z[w];try{const v=await p.file.arrayBuffer();let f;if(p.file.type==="image/jpeg"||p.file.type==="image/jpg")f=await a.embedJpg(v);else if(p.file.type==="image/png")f=await a.embedPng(v);else{const u=document.createElement("canvas"),j=u.getContext("2d"),n=new window.Image;await new Promise((A,X)=>{n.onload=A,n.onerror=X,n.src=p.url}),u.width=n.width,u.height=n.height,j==null||j.drawImage(n,0,0);const Q=u.toDataURL("image/png"),V=await fetch(Q).then(A=>A.arrayBuffer());f=await a.embedPng(V)}const{width:U,height:R}=f.scale(1);let k,P;if(s.maintainAspectRatio){const u=o/U,j=d/s.imagePerPage/R,n=Math.min(u,j);k=U*n,P=R*n}else k=o,P=d/s.imagePerPage;const _=i-r-(w+1)*(d/s.imagePerPage)+(d/s.imagePerPage-P)/2,K=r+(o-k)/2;q.drawImage(f,{x:K,y:_,width:k,height:P})}catch(v){console.error(`Error processing image ${p.name}:`,v)}}}x(90),m("Finalizing PDF...");const I=await a.save(),J=new Blob([I],{type:"application/pdf"});S(J),x(100),y("success"),m("PDF created successfully!")}catch(a){console.error("Error converting to PDF:",a),y("error"),m("Failed to convert images to PDF. Please try again.")}},T=()=>{if(D){const a=`images-to-pdf-${Date.now()}.pdf`;ae.saveAs(D,a)}},O=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(N,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload Images"})]}),e.jsx(Z,{onFilesSelected:M,multiple:!0,maxFiles:50,accept:{"image/*":[".jpg",".jpeg",".png",".gif",".bmp",".webp"]},disabled:C==="processing"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(re,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"PDF Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page Size"}),e.jsxs("select",{value:s.pageSize,onChange:a=>g(t=>({...t,pageSize:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"A4",children:"A4 (210 × 297 mm)"}),e.jsx("option",{value:"Letter",children:"Letter (8.5 × 11 in)"}),e.jsx("option",{value:"Legal",children:"Legal (8.5 × 14 in)"}),e.jsx("option",{value:"A3",children:"A3 (297 × 420 mm)"}),e.jsx("option",{value:"A5",children:"A5 (148 × 210 mm)"}),e.jsx("option",{value:"Custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Orientation"}),e.jsxs("select",{value:s.orientation,onChange:a=>g(t=>({...t,orientation:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"portrait",children:"Portrait"}),e.jsx("option",{value:"landscape",children:"Landscape"})]})]}),s.pageSize==="Custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Width (points)"}),e.jsx("input",{type:"number",value:s.customWidth||612,onChange:a=>g(t=>({...t,customWidth:parseInt(a.target.value)||612})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Height (points)"}),e.jsx("input",{type:"number",value:s.customHeight||792,onChange:a=>g(t=>({...t,customHeight:parseInt(a.target.value)||792})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Margin: ",s.margin,"px"]}),e.jsx("input",{type:"range",min:"0",max:"50",value:s.margin,onChange:a=>g(t=>({...t,margin:parseInt(a.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Images per page"}),e.jsxs("select",{value:s.imagePerPage,onChange:a=>g(t=>({...t,imagePerPage:parseInt(a.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:1,children:"1 image per page"}),e.jsx("option",{value:2,children:"2 images per page"}),e.jsx("option",{value:4,children:"4 images per page"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.maintainAspectRatio,onChange:a=>g(t=>({...t,maintainAspectRatio:a.target.checked})),className:"text-red-600 focus:ring-red-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Maintain aspect ratio"})]})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:E,disabled:c.length===0||C==="processing",className:"px-6 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center space-x-2",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{children:"Convert to PDF"})]})}),e.jsx(ee,{status:C,progress:W,message:B,onDownload:T,downloadFileName:D?`images-to-pdf-${Date.now()}.pdf`:void 0}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use Image to PDF:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload multiple images (JPG, PNG, GIF, BMP, WebP)"}),e.jsx("li",{children:"• Adjust PDF settings like page size, orientation, and layout"}),e.jsx("li",{children:"• Choose how many images per page"}),e.jsx("li",{children:'• Click "Convert to PDF" to create your document'}),e.jsx("li",{children:"• Download the generated PDF file"})]})]})]}),G=e.jsx("div",{className:"space-y-6",children:c.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map((a,t)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:t+1}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[e.jsx("button",{onClick:()=>L(a.id,"up"),disabled:t===0,className:"p-1 bg-black/70 hover:bg-black/90 text-white rounded disabled:opacity-50",title:"Move up",children:e.jsx(se,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>L(a.id,"down"),disabled:t===c.length-1,className:"p-1 bg-black/70 hover:bg-black/90 text-white rounded disabled:opacity-50",title:"Move down",children:e.jsx(ie,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>H(a.id),className:"p-1 bg-red-600/70 hover:bg-red-600/90 text-white rounded",title:"Remove",children:e.jsx(oe,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.size})]})]},a.id))}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload images to see preview"})]})})});return e.jsx(te,{title:"Image to PDF",description:"Convert multiple images into a single PDF document",icon:e.jsx(N,{className:"w-6 h-6 text-red-600"}),settingsContent:O,previewContent:G})};export{pe as default};
