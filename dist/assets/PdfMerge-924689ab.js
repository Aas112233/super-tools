import{j as e}from"./index-425a4db3.js";import{r as i}from"./vendor-8a332d8f.js";import{P as b}from"./PDFButton-bafdfd11.js";import{P as R,a as _,F as H}from"./PdfProgress-f427ce92.js";import{P as J}from"./PdfToolWrapper-bef57729.js";import{a7 as L,a6 as w,F as P,a9 as W,aJ as f,E as q}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const re=()=>{const[t,p]=i.useState([]),[x,c]=i.useState("idle"),[k,g]=i.useState(0),[D,o]=i.useState(""),[h,y]=i.useState(null),[m,j]=i.useState(null),F=i.useCallback(async s=>{const r=[];for(const a of s)try{const d=await a.arrayBuffer(),n=(await b.load(d)).getPageCount();r.push({file:a,id:Math.random().toString(36).substr(2,9),pageCount:n})}catch(d){console.error(`Error loading PDF ${a.name}:`,d)}p(a=>[...a,...r]),c("idle"),g(0),o(""),y(null)},[]),C=s=>{p(r=>r.filter(a=>a.id!==s))},S=(s,r)=>{const a=[...t],[d]=a.splice(s,1);a.splice(r,0,d),p(a)},M=s=>{j(s)},$=s=>{s.preventDefault()},B=(s,r)=>{s.preventDefault(),m!==null&&m!==r&&S(m,r),j(null)},E=async()=>{if(t.length<2){c("error"),o("Please upload at least 2 PDF files to merge.");return}try{c("processing"),g(0),o("Loading PDF documents...");const s=await b.create();for(let l=0;l<t.length;l++){const n=t[l];o(`Processing ${n.file.name}...`);const u=await n.file.arrayBuffer(),N=await b.load(u),A=N.getPageCount(),O=Array.from({length:A},(v,I)=>I);(await s.copyPages(N,O)).forEach(v=>s.addPage(v)),g((l+1)/t.length*80)}g(90),o("Saving merged PDF...");const r=await s.save(),a=new Blob([r],{type:"application/pdf"});y(a),g(100),c("success");const d=t.reduce((l,n)=>l+n.pageCount,0);o(`Successfully merged ${t.length} PDFs into one document with ${d} pages!`)}catch(s){console.error("Error merging PDFs:",s),c("error"),o("Failed to merge PDFs. Please ensure all files are valid PDFs.")}},U=()=>{if(h){const s=`merged-${Date.now()}.pdf`;H.saveAs(h,s)}},T=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(L,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF Files"})]}),e.jsx(R,{onFilesSelected:F,multiple:!0,accept:{"application/pdf":[".pdf"]},disabled:x==="processing"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Upload multiple PDF files to merge them into a single document"})]}),t.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"w-5 h-5 text-red-500"}),e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["PDF Files (",t.length,")"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Drag to reorder"})]}),e.jsx("div",{className:"space-y-2 mb-4",children:t.map((s,r)=>e.jsxs("div",{draggable:!0,onDragStart:()=>M(r),onDragOver:$,onDrop:a=>B(a,r),className:`flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg cursor-move transition-all ${m===r?"opacity-50":"hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx(w,{className:"w-4 h-4 text-gray-400"}),e.jsx(P,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:s.file.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.pageCount," pages • ",(s.file.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:e.jsxs("span",{children:["#",r+1]})})]}),e.jsx("button",{onClick:()=>C(s.id),disabled:x==="processing",className:"p-1 text-gray-400 hover:text-red-500 transition-colors disabled:opacity-50",children:e.jsx(W,{className:"w-4 h-4"})})]},s.id))}),e.jsxs("button",{onClick:E,disabled:t.length<2||x==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{children:"Merge PDFs"})]})]}),e.jsx(_,{status:x,progress:k,message:D,onDownload:U,downloadFileName:h?"merged.pdf":void 0}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Merge:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload multiple PDF files using the upload area above"}),e.jsx("li",{children:"• Drag and drop files to reorder them as needed"}),e.jsx("li",{children:"• Remove unwanted files using the trash icon"}),e.jsx("li",{children:'• Click "Merge PDFs" to combine all files into one document'}),e.jsx("li",{children:"• The merged PDF will maintain the order you've arranged"}),e.jsx("li",{children:"• Download the merged PDF when processing is complete"})]})]})]}),z=e.jsx("div",{className:"space-y-6",children:t.length>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(q,{className:"w-5 h-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Merge Preview"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:"PDF Files"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.reduce((s,r)=>s+r.pageCount,0)}),e.jsx("div",{className:"text-sm text-green-800 dark:text-green-200",children:"Total Pages"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(t.reduce((s,r)=>s+r.file.size,0)/1024/1024).toFixed(1)}),e.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Total Size (MB)"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Merge Order (drag files in settings to reorder)"}),e.jsx("div",{className:"space-y-2",children:t.map((s,r)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-red-100 dark:bg-red-900/30 text-red-600 text-sm font-medium rounded-full",children:r+1}),e.jsx(P,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:s.file.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.pageCount," pages"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Pages ",r===0?1:t.slice(0,r).reduce((a,d)=>a+d.pageCount,0)+1,"-",t.slice(0,r+1).reduce((a,d)=>a+d.pageCount,0)]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page Distribution"}),e.jsx("div",{className:"flex h-8 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:t.map((s,r)=>{const a=t.reduce((n,u)=>n+u.pageCount,0),d=s.pageCount/a*100,l=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-gray-500"];return e.jsx("div",{className:`${l[r%l.length]} flex items-center justify-center text-white text-xs font-medium`,style:{width:`${d}%`},title:`${s.file.name}: ${s.pageCount} pages (${d.toFixed(1)}%)`,children:d>5&&s.pageCount},s.id)})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Start"}),e.jsxs("span",{children:["End (",t.reduce((s,r)=>s+r.pageCount,0)," pages total)"]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload PDF files to see merge preview"})]})})});return e.jsx(J,{title:"Merge PDFs",description:"Combine multiple PDF documents into a single file with custom ordering",icon:e.jsx(f,{className:"w-6 h-6 text-red-600"}),settingsContent:T,previewContent:z})};export{re as default};
