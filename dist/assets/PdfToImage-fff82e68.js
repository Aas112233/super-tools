import{j as e}from"./index-425a4db3.js";import{r as m}from"./vendor-8a332d8f.js";import{G as T,g as J}from"./pdf-b223739c.js";import{P as B,b as L,a as R,F as k}from"./PdfProgress-f427ce92.js";import{J as W}from"./jszip.min-ac503e2d.js";import{T as M}from"./ToolPage-bbc5e4c9.js";import{I as C,a2 as O,G as Z}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";T.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const re=()=>{const[h,F]=m.useState(null),[H,v]=m.useState(0),[c,j]=m.useState([]),[a,x]=m.useState({format:"png",quality:.9,scale:2,convertAllPages:!0,selectedPages:"1"}),[f,p]=m.useState("idle"),[S,u]=m.useState(0),[I,i]=m.useState(""),D=m.useCallback(s=>{s.length>0&&(F(s[0]),p("idle"),u(0),i(""),j([]),v(0))},[]),$=(s,r)=>{const l=[],n=s.split(",").map(o=>o.trim());for(const o of n)if(o.includes("-")){const[t,g]=o.split("-").map(d=>parseInt(d.trim()));if(!isNaN(t)&&!isNaN(g)&&t>=1&&g<=r&&t<=g)for(let d=t;d<=g;d++)l.includes(d)||l.push(d)}else{const t=parseInt(o);!isNaN(t)&&t>=1&&t<=r&&!l.includes(t)&&l.push(t)}return l.sort((o,t)=>o-t)},A=async()=>{if(!h){p("error"),i("Please upload a PDF file first.");return}try{p("processing"),u(0),i("Loading PDF document...");const s=await h.arrayBuffer(),r=await J({data:s}).promise,l=r.numPages;v(l),u(10),i(`PDF loaded with ${l} page(s)`);let n;if(a.convertAllPages)n=Array.from({length:l},(g,d)=>d+1);else if(n=$(a.selectedPages,l),n.length===0){p("error"),i("Invalid page selection. Please check your page numbers.");return}i(`Converting ${n.length} page(s) to ${a.format.toUpperCase()}...`);const o=[],t=80/n.length;for(let g=0;g<n.length;g++){const d=n[g];i(`Converting page ${d} of ${l}...`);const N=await r.getPage(d),y=N.getViewport({scale:a.scale}),b=document.createElement("canvas"),P=b.getContext("2d");if(b.height=y.height,b.width=y.width,!P)throw new Error("Could not get canvas context");await N.render({canvasContext:P,viewport:y,canvas:b}).promise;const q=await new Promise((U,z)=>{b.toBlob(w=>{w?U(w):z(new Error("Failed to convert canvas to blob"))},`image/${a.format}`,a.format==="jpeg"?a.quality:void 0)});o.push(q),u(10+(g+1)*t)}j(o),u(95),i("Finalizing conversion..."),u(100),p("success"),i(`Successfully converted ${o.length} page(s) to ${a.format.toUpperCase()} format!`)}catch(s){console.error("Error converting PDF to images:",s),p("error"),i("Failed to convert PDF to images. Please ensure the file is a valid PDF.")}},E=async()=>{if(c.length!==0)if(c.length===1){const s=`page-1.${a.format}`;k.saveAs(c[0],s)}else{i("Creating ZIP archive...");const s=new W;c.forEach((n,o)=>{const t=`page-${o+1}.${a.format}`;s.file(t,n)});const r=await s.generateAsync({type:"blob"}),l=`pdf-images-${Date.now()}.zip`;k.saveAs(r,l)}},G=s=>URL.createObjectURL(s);return e.jsx(M,{title:"PDF to Image",description:"Convert PDF pages to high-quality images in PNG, JPEG, or WebP format.",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(C,{className:"w-5 h-5 text-blue-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(B,{onFilesSelected:D,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:f==="processing"})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"PDF Preview"})}),e.jsx("div",{className:"p-4",children:e.jsx(L,{file:h,maxWidth:400})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Conversion Settings"})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Output Format"}),e.jsxs("select",{value:a.format,onChange:s=>x(r=>({...r,format:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"png",children:"PNG (Lossless, supports transparency)"}),e.jsx("option",{value:"jpeg",children:"JPEG (Compressed, smaller file size)"}),e.jsx("option",{value:"webp",children:"WebP (Modern format, good compression)"})]})]}),a.format==="jpeg"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Quality: ",Math.round(a.quality*100),"%"]}),e.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:a.quality,onChange:s=>x(r=>({...r,quality:parseFloat(s.target.value)})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Resolution Scale: ",a.scale,"x"]}),e.jsx("input",{type:"range",min:"1.0",max:"4.0",step:"0.5",value:a.scale,onChange:s=>x(r=>({...r,scale:parseFloat(s.target.value)})),className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Higher scale = better quality but larger file size"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages to Convert"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:a.convertAllPages,onChange:()=>x(s=>({...s,convertAllPages:!0})),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Convert all pages"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:!a.convertAllPages,onChange:()=>x(s=>({...s,convertAllPages:!1})),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Specific pages"})]})]}),!a.convertAllPages&&e.jsx("input",{type:"text",value:a.selectedPages,onChange:s=>x(r=>({...r,selectedPages:s.target.value})),placeholder:"e.g., 1-3,5,7-10",className:"mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:A,disabled:!h||f==="processing",className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{children:"Convert to Images"})]})]})]})]}),e.jsx(R,{status:f,progress:S,message:I,onDownload:E,downloadFileName:c.length===1?`page-1.${a.format}`:"pdf-images.zip"}),c.length>0&&f==="success"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Converted Images (",c.length,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[c.slice(0,8).map((s,r)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("img",{src:G(s),alt:`Page ${r+1}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"p-2 text-center",children:e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Page ",r+1]})})]},r)),c.length>8&&e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden flex items-center justify-center bg-gray-50 dark:bg-gray-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["+",c.length-8," more"]})})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How to use PDF to Image:"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose your output format: PNG for transparency, JPEG for smaller files"}),e.jsx("li",{children:"• Adjust quality and resolution settings as needed"}),e.jsx("li",{children:"• Select which pages to convert (all pages or specific ranges)"}),e.jsx("li",{children:'• Click "Convert to Images" to start the conversion'}),e.jsx("li",{children:"• Download individual image or ZIP file with all images"})]})]})]})})};export{re as default};
