import{j as e}from"./index-425a4db3.js";import{r as n}from"./vendor-8a332d8f.js";import{P as k,d as M}from"./PDFButton-bafdfd11.js";import{P as _,a as L,F as O}from"./PdfProgress-f427ce92.js";import{P as T}from"./PdfToolWrapper-bef57729.js";import{I as w,R as u,aA as z,E as H}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const Z=()=>{const[l,F]=n.useState(null),[t,b]=n.useState({angle:90,pages:"all",pageNumbers:""}),[y,f]=n.useState("idle"),[D,g]=n.useState(0),[R,d]=n.useState(""),[j,v]=n.useState(null),[p,C]=n.useState(0),[W,S]=n.useState([]),B=n.useCallback(async s=>{if(s.length>0){const a=s[0];F(a),f("idle"),g(0),d(""),v(null);try{const o=await a.arrayBuffer(),m=(await k.load(o)).getPageCount();C(m),S(Array(m).fill("")),d(`PDF loaded with ${m} pages`)}catch(o){console.error("Error loading PDF:",o),d("Failed to load PDF file")}}},[]),E=async()=>{if(!l){f("error"),d("Please upload a PDF file first.");return}try{f("processing"),g(0),d("Loading PDF document...");const s=await l.arrayBuffer(),a=await k.load(s),o=a.getPageCount();g(20),d("Rotating pages...");let r=[];if(t.pages==="all")r=Array.from({length:o},(x,c)=>c);else{const x=t.pageNumbers.split(",").map(c=>c.trim());for(const c of x)if(c.includes("-")){const[i,P]=c.split("-").map(h=>parseInt(h.trim())-1);if(!isNaN(i)&&!isNaN(P)&&i>=0&&P<o)for(let h=i;h<=P;h++)r.includes(h)||r.push(h)}else{const i=parseInt(c)-1;!isNaN(i)&&i>=0&&i<o&&(r.includes(i)||r.push(i))}}const m=a.getPages();g(50);for(let x=0;x<r.length;x++){const c=r[x];c<m.length&&m[c].setRotation(M(t.angle)),g(50+(x+1)/r.length*30)}g(80),d("Saving rotated PDF...");const N=await a.save();g(90),d("Finalizing PDF...");const $=new Blob([N],{type:"application/pdf"});v($),g(100),f("success"),d(`Successfully rotated ${r.length} pages!`)}catch(s){console.error("Error rotating PDF:",s),f("error"),d("Failed to rotate PDF. Please ensure the file is a valid PDF.")}},A=()=>{if(j){const s=`rotated-${(l==null?void 0:l.name)||"document.pdf"}`;O.saveAs(j,s)}},I=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(w,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(_,{onFilesSelected:B,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:y==="processing"})]}),l&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(u,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Rotation Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rotation Angle"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[90,180,270,-90].map(s=>e.jsxs("button",{onClick:()=>b(a=>({...a,angle:s})),className:`p-3 rounded-lg border-2 transition-all flex flex-col items-center space-y-1 ${t.angle===s?"border-red-500 bg-red-50 dark:bg-red-900/30":"border-gray-200 dark:border-gray-600 hover:border-red-300"}`,children:[s>0?e.jsx(u,{className:"w-4 h-4"}):e.jsx(z,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-xs font-medium",children:[Math.abs(s),"°"]}),e.jsx("span",{className:"text-xs text-gray-500",children:s>0?"Right":"Left"})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pages to Rotate"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"all",checked:t.pages==="all",onChange:s=>b(a=>({...a,pages:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["All pages (",p," pages)"]})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"specific",checked:t.pages==="specific",onChange:s=>b(a=>({...a,pages:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Specific pages"})]}),t.pages==="specific"&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"text",value:t.pageNumbers,onChange:s=>b(a=>({...a,pageNumbers:s.target.value})),placeholder:"e.g., 1,3,5-8,10",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter page numbers separated by commas. Use ranges like 5-8."})]})]})]}),e.jsxs("button",{onClick:E,disabled:!l||y==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:"Rotate PDF"})]})]})]}),e.jsx(L,{status:y,progress:D,message:R,onDownload:A,downloadFileName:j?`rotated-${l==null?void 0:l.name}`:void 0}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Rotate:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose the rotation angle (90°, 180°, 270°, or -90°)"}),e.jsx("li",{children:"• Select whether to rotate all pages or specific pages"}),e.jsx("li",{children:"• For specific pages, enter page numbers (e.g., 1,3,5-8)"}),e.jsx("li",{children:'• Click "Rotate PDF" to process the document'}),e.jsx("li",{children:"• Download the rotated PDF when processing is complete"})]})]})]}),U=e.jsx("div",{className:"space-y-6",children:l&&p>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(H,{className:"w-5 h-5 text-red-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["PDF Preview (",p," pages)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:Math.min(p,12)},(s,a)=>e.jsx("div",{className:"aspect-[3/4] bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Page ",a+1]}),t.pages==="all"||t.pages==="specific"&&t.pageNumbers.split(",").some(o=>{if(o.includes("-")){const[r,m]=o.split("-").map(N=>parseInt(N.trim()));return a+1>=r&&a+1<=m}return parseInt(o.trim())===a+1})?e.jsxs("div",{className:"mt-1 flex items-center justify-center",children:[e.jsx(u,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:"text-xs text-red-500 ml-1",children:[t.angle,"°"]})]}):null]})},a))}),p>12&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-4",children:["Showing first 12 pages of ",p," total pages"]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload a PDF to see preview"})]})})});return e.jsx(T,{title:"Rotate PDF",description:"Rotate PDF pages by 90°, 180°, or 270° clockwise or counterclockwise",icon:e.jsx(u,{className:"w-6 h-6 text-red-600"}),settingsContent:I,previewContent:U})};export{Z as default};
