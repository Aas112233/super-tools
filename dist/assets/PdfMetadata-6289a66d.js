import{j as e}from"./index-425a4db3.js";import{r as i}from"./vendor-8a332d8f.js";import{P as j}from"./PDFButton-bafdfd11.js";import{P as U,a as B,F as E}from"./PdfProgress-f427ce92.js";import{T}from"./ToolPage-bbc5e4c9.js";import{N as k,F as K,az as L}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const q=()=>{const[o,v]=i.useState(null),[l,h]=i.useState({}),[t,x]=i.useState({}),[m,c]=i.useState("idle"),[N,n]=i.useState(0),[w,d]=i.useState(""),[b,p]=i.useState(null),P=i.useCallback(a=>{a.length>0&&(v(a[0]),c("idle"),n(0),d(""),p(null),h({}),x({}),D(a[0]))},[]),D=async a=>{try{d("Loading PDF metadata...");const r=await a.arrayBuffer(),s=await j.load(r),u={title:s.getTitle()||"",author:s.getAuthor()||"",subject:s.getSubject()||"",keywords:s.getKeywords()||"",creator:s.getCreator()||"",producer:s.getProducer()||"",creationDate:s.getCreationDate()||void 0,modificationDate:s.getModificationDate()||void 0};h(u),x({...u}),d("")}catch(r){console.error("Error loading metadata:",r),c("error"),d("Failed to load PDF metadata. Please ensure the file is a valid PDF.")}},F=async()=>{if(!o){c("error"),d("Please upload a PDF file first.");return}try{c("processing"),n(0),d("Loading PDF document...");const a=await o.arrayBuffer(),r=await j.load(a);if(n(30),d("Updating metadata..."),t.title!==void 0&&r.setTitle(t.title),t.author!==void 0&&r.setAuthor(t.author),t.subject!==void 0&&r.setSubject(t.subject),t.keywords!==void 0){const A=typeof t.keywords=="string"?t.keywords.split(",").map(y=>y.trim()).filter(y=>y.length>0):t.keywords;r.setKeywords(A)}t.creator!==void 0&&r.setCreator(t.creator),t.producer!==void 0&&r.setProducer(t.producer),r.setModificationDate(new Date),n(70),d("Saving PDF with updated metadata...");const s=await r.save();n(90),d("Finalizing PDF...");const u=new Blob([s],{type:"application/pdf"});p(u),n(100),c("success"),d("PDF metadata updated successfully!")}catch(a){console.error("Error updating metadata:",a),c("error"),d("Failed to update PDF metadata. Please ensure the file is a valid PDF.")}},C=()=>{if(b){const a=`updated-metadata-${(o==null?void 0:o.name)||"document.pdf"}`;E.saveAs(b,a)}},g=(a,r)=>{x(s=>({...s,[a]:r}))},M=()=>{x({...l})},S=()=>{x({title:"",author:"",subject:"",keywords:"",creator:"",producer:""})},f=a=>a?a.toLocaleString():"Not set";return e.jsx(T,{title:"PDF Metadata",description:"View and edit PDF document properties including title, author, subject, and keywords.",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(k,{className:"w-5 h-5 text-blue-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(U,{onFilesSelected:P,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:m==="processing"})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(K,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Current Metadata"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Title:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100 break-words",children:l.title||"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Author:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100 break-words",children:l.author||"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Subject:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100 break-words",children:l.subject||"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Keywords:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100 break-words",children:l.keywords||"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Creator:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100 break-words",children:l.creator||"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Producer:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100 break-words",children:l.producer||"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100",children:f(l.creationDate)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Modified:"}),e.jsx("div",{className:"col-span-2 text-gray-900 dark:text-gray-100",children:f(l.modificationDate)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(L,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Edit Metadata"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:t.title||"",onChange:a=>g("title",a.target.value),placeholder:"Document title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Author"}),e.jsx("input",{type:"text",value:t.author||"",onChange:a=>g("author",a.target.value),placeholder:"Document author",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subject"}),e.jsx("input",{type:"text",value:t.subject||"",onChange:a=>g("subject",a.target.value),placeholder:"Document subject",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Keywords"}),e.jsx("input",{type:"text",value:t.keywords||"",onChange:a=>g("keywords",a.target.value),placeholder:"Comma-separated keywords",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Creator"}),e.jsx("input",{type:"text",value:t.creator||"",onChange:a=>g("creator",a.target.value),placeholder:"Application that created the document",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer"}),e.jsx("input",{type:"text",value:t.producer||"",onChange:a=>g("producer",a.target.value),placeholder:"Application that produced the PDF",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex space-x-2 pt-4",children:[e.jsx("button",{onClick:M,className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md transition-colors",children:"Reset"}),e.jsx("button",{onClick:S,className:"px-3 py-2 text-sm bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 text-red-700 dark:text-red-300 rounded-md transition-colors",children:"Clear All"})]}),e.jsxs("button",{onClick:F,disabled:!o||m==="processing",className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:"Update Metadata"})]})]})]})]}),e.jsx(B,{status:m,progress:N,message:w,onDownload:C,downloadFileName:b?`updated-metadata-${o==null?void 0:o.name}`:void 0}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How to use PDF Metadata:"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file to view its current metadata"}),e.jsx("li",{children:"• Edit any metadata fields in the form on the right"}),e.jsx("li",{children:"• Use keywords to improve document searchability"}),e.jsx("li",{children:'• Click "Update Metadata" to save changes'}),e.jsx("li",{children:"• Download the updated PDF with new metadata"}),e.jsx("li",{children:"• The modification date will be automatically updated"})]})]})]})})};export{q as default};
