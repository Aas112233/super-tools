import{j as e}from"./index-425a4db3.js";import{r as c}from"./vendor-8a332d8f.js";import{a1 as y,a3 as w,aB as I,I as k,u as R}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";const U=()=>{const[r,h]=c.useState(""),[m,x]=c.useState(!1),[u,l]=c.useState(""),[s,p]=c.useState(null),b=t=>{const a=[/instagram\.com\/p\/([A-Za-z0-9_-]+)/,/instagram\.com\/reel\/([A-Za-z0-9_-]+)/,/instagram\.com\/tv\/([A-Za-z0-9_-]+)/];for(const o of a){const d=t.match(o);if(d)return d[1]}return null},g=t=>t.includes("/reel/")?"reel":t.includes("/tv/")?"tv":t.includes("/p/")?"post":"unknown",j=async()=>{if(!r.trim()){l("Please enter an Instagram URL");return}const t=b(r);if(!t){l("Invalid Instagram URL. Please enter a valid post, reel, or IGTV URL.");return}x(!0),l(""),p(null);try{const a=`https://api.insta-downloader.com/download?url=${encodeURIComponent(r)}`,o=await fetch(a,{method:"GET",headers:{Accept:"application/json"}});if(o.ok){const i=await o.json()}else{const i=await fetch("https://instagram-downloader-download-instagram-videos-stories.p.rapidapi.com/index",{method:"POST",headers:{"Content-Type":"application/json","X-RapidAPI-Key":"demo-key","X-RapidAPI-Host":"instagram-downloader-download-instagram-videos-stories.p.rapidapi.com"},body:JSON.stringify({url:r})});if(!i.ok)throw new Error("Unable to fetch Instagram content. The post may be private or the URL is invalid.");const n=await i.json()}const d={id:t,type:g(r),username:data.username||data.author||"Instagram User",caption:data.caption||data.title||"No caption available",likes:data.likes||data.like_count||0,comments:data.comments||data.comment_count||0,timestamp:data.timestamp||new Date().toISOString(),media:data.media_urls?data.media_urls.map((i,n)=>({type:g(r)==="reel"||r.includes("/tv/")?"video":"image",url:i,thumbnail:data.thumbnail||data.thumb||i,quality:"HD",filesize:0})):[{type:g(r)==="reel"||r.includes("/tv/")?"video":"image",url:data.video_url||data.image_url||data.url,thumbnail:data.thumbnail||data.thumb,quality:"Original",filesize:0}]};p(d)}catch{l("Failed to fetch media. Please check the URL and try again.")}finally{x(!1)}},v=async(t,a)=>{try{const d=await(await fetch(t,{mode:"cors"})).blob(),i=window.URL.createObjectURL(d),n=document.createElement("a");n.href=i,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)}catch{window.open(t,"_blank")}},f=()=>{h(""),p(null),l("")};return e.jsxs("div",{className:"tool-container",children:[e.jsxs("div",{className:"tool-header",children:[e.jsx("h1",{children:"Instagram Image/Video Downloader"}),e.jsx("p",{children:"Download Instagram posts, reels, and IGTV videos"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"2rem",borderRadius:"16px",border:"2px solid var(--border-color)"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("label",{htmlFor:"instagram-url",children:"Instagram URL"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:[e.jsx("input",{id:"instagram-url",type:"text",value:r,onChange:t=>h(t.target.value),placeholder:"https://www.instagram.com/p/ABC123...",style:{flex:1,padding:"1rem",borderRadius:"12px",border:"2px solid var(--border-color)",background:"var(--bg-tertiary)",fontSize:"1rem"}}),e.jsx("button",{onClick:j,disabled:m,className:`case-btn ${m?"disabled":"active"}`,style:{padding:"1rem 2rem",display:"flex",alignItems:"center",gap:"0.5rem",minWidth:"120px",justifyContent:"center"},children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid currentColor",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4"}),"Fetch"]})})]})]}),u&&e.jsxs("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"1rem",borderRadius:"8px",marginBottom:"2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(w,{className:"w-4 h-4"}),u]}),s&&e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"2rem",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:"@"}),e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:0},children:["@",s.username]}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[s.type.charAt(0).toUpperCase()+s.type.slice(1)," â€¢ ",s.likes.toLocaleString()," likes"]})]})]}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",lineHeight:"1.5",maxHeight:"60px",overflow:"hidden"},children:s.caption})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:s.media.map((t,a)=>e.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{position:"relative"},children:[t.type==="video"?e.jsx("video",{src:t.url,poster:t.thumbnail,controls:!0,style:{width:"100%",height:"300px",objectFit:"cover"},preload:"metadata"}):e.jsx("img",{src:t.url,alt:`Media ${a+1}`,style:{width:"100%",height:"300px",objectFit:"cover"}}),e.jsxs("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[t.type==="video"?e.jsx(I,{className:"w-3 h-3"}):e.jsx(k,{className:"w-3 h-3"}),t.quality]}),t.filesize>0&&e.jsxs("div",{style:{position:"absolute",bottom:"0.5rem",left:"0.5rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem"},children:[(t.filesize/1024/1024).toFixed(1)," MB"]})]}),e.jsx("div",{style:{padding:"1rem"},children:e.jsxs("button",{onClick:()=>v(t.url,`instagram_${s.id}_${a+1}.${t.type==="video"?"mp4":"jpg"}`),className:"case-btn active",style:{width:"100%",padding:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[e.jsx(y,{className:"w-4 h-4"}),"Download"]})})]},a))}),e.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:e.jsx("button",{onClick:f,className:"case-btn",style:{padding:"0.75rem 2rem"},children:"Download Another"})})]})]}),e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"2rem",borderRadius:"16px",border:"2px solid var(--border-color)"},children:[e.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[e.jsx(R,{className:"w-5 h-5"}),"How to Use"]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",lineHeight:"1.6"},children:[e.jsxs("ol",{style:{paddingLeft:"1.5rem",margin:"0 0 1.5rem 0"},children:[e.jsx("li",{style:{marginBottom:"0.5rem"},children:"Copy the Instagram post, reel, or IGTV URL"}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:"Paste it in the input field above"}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:'Click "Fetch" to analyze the content'}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:"Download individual images or videos"})]}),e.jsx("h4",{style:{marginBottom:"1rem"},children:"Supported URLs:"}),e.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0 0 1.5rem 0"},children:[e.jsx("li",{style:{marginBottom:"0.5rem"},children:"Posts: instagram.com/p/ABC123"}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:"Reels: instagram.com/reel/ABC123"}),e.jsx("li",{style:{marginBottom:"0.5rem"},children:"IGTV: instagram.com/tv/ABC123"})]}),e.jsxs("div",{style:{background:"#dbeafe",color:"#1e40af",padding:"1rem",borderRadius:"8px",fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Backend Required:"})," This tool requires a backend service running yt-dlp to extract Instagram media. The frontend sends requests to ",e.jsx("code",{children:"/api/download"})," endpoint."]}),e.jsx("h4",{style:{marginTop:"1.5rem",marginBottom:"1rem"},children:"Backend Setup:"}),e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"1rem",borderRadius:"8px",fontSize:"0.8rem",fontFamily:"monospace"},children:[e.jsx("div",{children:"pip install yt-dlp"}),e.jsx("div",{children:"yt-dlp --extract-flat --dump-json [URL]"})]})]})]})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};export{U as default};
