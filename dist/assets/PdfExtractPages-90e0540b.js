import{j as e}from"./index-425a4db3.js";import{r as x}from"./vendor-8a332d8f.js";import{P as y}from"./PDFButton-bafdfd11.js";import{P as O,a as T,F as W}from"./PdfProgress-f427ce92.js";import{P as _}from"./PdfToolWrapper-bef57729.js";import{F as j,k as w,a1 as H,E as L}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const X=()=>{const[m,C]=x.useState(null),[r,o]=x.useState({mode:"specific",pageNumbers:"",startPage:1,endPage:1,outputMode:"single"}),[N,h]=x.useState("idle"),[S,p]=x.useState(0),[B,n]=x.useState(""),[u,F]=x.useState([]),[l,M]=x.useState(0),I=x.useCallback(async a=>{if(a.length>0){const s=a[0];C(s),h("idle"),p(0),n(""),F([]);try{const c=await s.arrayBuffer(),t=(await y.load(c)).getPageCount();M(t),o(d=>({...d,endPage:t})),n(`PDF loaded with ${t} pages`)}catch(c){console.error("Error loading PDF:",c),n("Failed to load PDF file")}}},[]),v=()=>{const a=[];switch(r.mode){case"specific":const s=r.pageNumbers.split(",").map(t=>t.trim());for(const t of s)if(t.includes("-")){const[d,g]=t.split("-").map(i=>parseInt(i.trim())-1);if(!isNaN(d)&&!isNaN(g)&&d>=0&&g<l)for(let i=d;i<=g;i++)a.includes(i)||a.push(i)}else{const d=parseInt(t)-1;!isNaN(d)&&d>=0&&d<l&&(a.includes(d)||a.push(d))}break;case"range":const c=Math.max(0,r.startPage-1),b=Math.min(l-1,r.endPage-1);for(let t=c;t<=b;t++)a.push(t);break;case"even":for(let t=1;t<l;t+=2)a.push(t);break;case"odd":for(let t=0;t<l;t+=2)a.push(t);break}return a.sort((s,c)=>s-c)},$=async()=>{if(!m){h("error"),n("Please upload a PDF file first.");return}const a=v();if(a.length===0){h("error"),n("Please specify valid pages to extract.");return}try{h("processing"),p(0),n("Loading PDF document...");const s=await m.arrayBuffer(),c=await y.load(s);p(20),n("Extracting pages...");const b=[];if(r.outputMode==="single"){const t=await y.create();for(let f=0;f<a.length;f++){const P=a[f],[k]=await t.copyPages(c,[P]);t.addPage(k),p(20+(f+1)/a.length*60)}p(80),n("Saving extracted pages...");const d=await t.save(),g=new Blob([d],{type:"application/pdf"}),i=`extracted-pages-${m.name}`;b.push({blob:g,filename:i})}else for(let t=0;t<a.length;t++){const d=a[t],g=await y.create(),[i]=await g.copyPages(c,[d]);g.addPage(i);const f=await g.save(),P=new Blob([f],{type:"application/pdf"}),k=`page-${d+1}-${m.name}`;b.push({blob:P,filename:k}),p(20+(t+1)/a.length*70)}p(100),F(b),h("success"),n(`Successfully extracted ${a.length} pages!`)}catch(s){console.error("Error extracting pages:",s),h("error"),n("Failed to extract pages. Please ensure the file is a valid PDF.")}},D=(a,s)=>{W.saveAs(a,s)},E=()=>{u.forEach(({blob:a,filename:s})=>{setTimeout(()=>D(a,s),100)})},U=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(j,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(O,{onFilesSelected:I,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:N==="processing"})]}),m&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(w,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Extraction Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pages to Extract"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"specific",checked:r.mode==="specific",onChange:a=>o(s=>({...s,mode:a.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Specific pages"})]}),r.mode==="specific"&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"text",value:r.pageNumbers,onChange:a=>o(s=>({...s,pageNumbers:a.target.value})),placeholder:"e.g., 1,3,5-8,10",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter page numbers separated by commas. Use ranges like 5-8."})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"range",checked:r.mode==="range",onChange:a=>o(s=>({...s,mode:a.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Page range"})]}),r.mode==="range"&&e.jsxs("div",{className:"ml-6 grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"From page"}),e.jsx("input",{type:"number",min:"1",max:l,value:r.startPage,onChange:a=>o(s=>({...s,startPage:parseInt(a.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"To page"}),e.jsx("input",{type:"number",min:"1",max:l,value:r.endPage,onChange:a=>o(s=>({...s,endPage:parseInt(a.target.value)||l})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"odd",checked:r.mode==="odd",onChange:a=>o(s=>({...s,mode:a.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Odd pages (1, 3, 5, ...)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"even",checked:r.mode==="even",onChange:a=>o(s=>({...s,mode:a.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Even pages (2, 4, 6, ...)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Output Format"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"single",checked:r.outputMode==="single",onChange:a=>o(s=>({...s,outputMode:a.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Single PDF with all extracted pages"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"separate",checked:r.outputMode==="separate",onChange:a=>o(s=>({...s,outputMode:a.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Separate PDF for each page"})]})]})]}),e.jsxs("button",{onClick:$,disabled:!m||N==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("span",{children:"Extract Pages"})]})]})]}),e.jsx(T,{status:N,progress:S,message:B,onDownload:E,downloadFileName:u.length>0?"extracted-pages.pdf":void 0}),u.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Extracted Files (",u.length,")"]}),u.length>1&&e.jsxs("button",{onClick:E,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors flex items-center space-x-1",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:"Download All"})]})]}),e.jsx("div",{className:"space-y-2",children:u.map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.filename})]}),e.jsx("button",{onClick:()=>D(a.blob,a.filename),className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 border border-red-300 hover:border-red-400 rounded-md transition-colors",children:"Download"})]},s))})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Extract Pages:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose which pages to extract (specific, range, odd, or even)"}),e.jsx("li",{children:"• Select output format (single PDF or separate files)"}),e.jsx("li",{children:'• Click "Extract Pages" to process the document'}),e.jsx("li",{children:"• Download the extracted pages when processing is complete"})]})]})]}),A=e.jsx("div",{className:"space-y-6",children:m&&l>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(L,{className:"w-5 h-5 text-red-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["PDF Preview (",l," pages)"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pages to extract: ",e.jsx("span",{className:"font-medium text-red-600",children:v().map(a=>a+1).join(", ")})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:Math.min(l,12)},(a,s)=>{const c=v().includes(s);return e.jsx("div",{className:`aspect-[3/4] rounded-lg flex items-center justify-center border-2 transition-all ${c?"border-red-500 bg-red-50 dark:bg-red-900/30":"border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-700"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:`w-8 h-8 mx-auto mb-2 ${c?"text-red-500":"text-gray-400"}`}),e.jsxs("p",{className:`text-sm ${c?"text-red-600 font-medium":"text-gray-500"}`,children:["Page ",s+1]}),c&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Will extract"})]})},s)})}),l>12&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-4",children:["Showing first 12 pages of ",l," total pages"]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload a PDF to see preview"})]})})});return e.jsx(_,{title:"Extract Pages",description:"Extract specific pages, ranges, or patterns from PDF documents",icon:e.jsx(w,{className:"w-6 h-6 text-red-600"}),settingsContent:U,previewContent:A})};export{X as default};
