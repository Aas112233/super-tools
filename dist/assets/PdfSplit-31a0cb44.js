import{j as e}from"./index-425a4db3.js";import{r as p}from"./vendor-8a332d8f.js";import{P as k}from"./PDFButton-bafdfd11.js";import{P as J,a as W,F as _}from"./PdfProgress-f427ce92.js";import{J as q}from"./jszip.min-ac503e2d.js";import{P as H}from"./PdfToolWrapper-bef57729.js";import{F as S,k as v,a1 as L,E as K,G as Q}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const de=()=>{const[x,D]=p.useState(null),[i,m]=p.useState({mode:"pages",pageRanges:"",pagesPerFile:1,maxFileSize:5,outputFormat:"separate"}),[y,h]=p.useState("idle"),[z,b]=p.useState(0),[C,g]=p.useState(""),[u,j]=p.useState([]),[c,R]=p.useState(0),[E,$]=p.useState(0),B=p.useCallback(async s=>{if(s.length>0){const a=s[0];D(a),$(a.size),h("idle"),b(0),g(""),j([]);try{const n=await a.arrayBuffer(),t=(await k.load(n)).getPageCount();R(t),g(`PDF loaded with ${t} pages (${(a.size/1024/1024).toFixed(2)} MB)`)}catch(n){console.error("Error loading PDF:",n),g("Failed to load PDF file")}}},[]),M=s=>{const a=[],n=s.split(",").map(r=>r.trim()).filter(r=>r);for(const r of n)if(r.includes("-")){const[t,l]=r.split("-").map(d=>parseInt(d.trim())-1);if(!isNaN(t)&&!isNaN(l)&&t>=0&&l<c&&t<=l){const d=[];for(let o=t;o<=l;o++)d.push(o);a.push(d)}}else{const t=parseInt(r)-1;!isNaN(t)&&t>=0&&t<c&&a.push([t])}return a},f=()=>{switch(i.mode){case"pages":return M(i.pageRanges);case"count":const s=[];for(let t=0;t<c;t+=i.pagesPerFile){const l=Math.min(t+i.pagesPerFile-1,c-1),d=[];for(let o=t;o<=l;o++)d.push(o);s.push(d)}return s;case"size":const a=E/c,n=Math.floor(i.maxFileSize*1024*1024/a),r=[];for(let t=0;t<c;t+=n){const l=Math.min(t+n-1,c-1),d=[];for(let o=t;o<=l;o++)d.push(o);r.push(d)}return r;default:return[]}},A=async()=>{if(!x){h("error"),g("Please upload a PDF file first.");return}const s=f();if(s.length===0){h("error"),g("Please specify valid split parameters.");return}try{h("processing"),b(0),g("Loading PDF document...");const a=await x.arrayBuffer(),n=await k.load(a);b(20),g("Splitting PDF...");const r=[];for(let t=0;t<s.length;t++){const l=s[t],d=await k.create();(await d.copyPages(n,l)).forEach(G=>d.addPage(G));const N=await d.save(),O=new Blob([N],{type:"application/pdf"}),P=l[0]+1,T=l[l.length-1]+1,Z=l.length===1?`page-${P}-${x.name}`:`pages-${P}-${T}-${x.name}`;r.push({blob:O,filename:Z}),b(20+(t+1)/s.length*60)}if(b(80),g("Finalizing split files..."),i.outputFormat==="zip"&&r.length>1){const t=new q;r.forEach(({blob:o,filename:N})=>{t.file(N,o)});const l=await t.generateAsync({type:"blob"}),d=`split-${x.name.replace(".pdf",".zip")}`;j([{blob:l,filename:d}])}else j(r);b(100),h("success"),g(`Successfully split PDF into ${r.length} files!`)}catch(a){console.error("Error splitting PDF:",a),h("error"),g("Failed to split PDF. Please ensure the file is a valid PDF.")}},w=(s,a)=>{_.saveAs(s,a)},F=()=>{u.forEach(({blob:s,filename:a})=>{setTimeout(()=>w(s,a),100)})},I=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(S,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(J,{onFilesSelected:B,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:y==="processing"})]}),x&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(v,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Split Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Split Method"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"pages",checked:i.mode==="pages",onChange:s=>m(a=>({...a,mode:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Split by page ranges"})]}),i.mode==="pages"&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"text",value:i.pageRanges,onChange:s=>m(a=>({...a,pageRanges:s.target.value})),placeholder:"e.g., 1-3,5,7-10",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter page ranges separated by commas (e.g., 1-3,5,7-10)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"count",checked:i.mode==="count",onChange:s=>m(a=>({...a,mode:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Split by number of pages per file"})]}),i.mode==="count"&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"number",min:"1",max:c,value:i.pagesPerFile,onChange:s=>m(a=>({...a,pagesPerFile:parseInt(s.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of pages per output file"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"size",checked:i.mode==="size",onChange:s=>m(a=>({...a,mode:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Split by maximum file size"})]}),i.mode==="size"&&e.jsxs("div",{className:"ml-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"1",step:"0.1",value:i.maxFileSize,onChange:s=>m(a=>({...a,maxFileSize:parseFloat(s.target.value)||1})),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"MB"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum size per output file"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Output Format"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"separate",checked:i.outputFormat==="separate",onChange:s=>m(a=>({...a,outputFormat:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Separate PDF files"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"zip",checked:i.outputFormat==="zip",onChange:s=>m(a=>({...a,outputFormat:s.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"ZIP archive (recommended for multiple files)"})]})]})]}),e.jsxs("button",{onClick:A,disabled:!x||y==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:"Split PDF"})]})]})]}),e.jsx(W,{status:y,progress:z,message:C,onDownload:F,downloadFileName:u.length>0?u[0].filename:void 0}),u.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Split Files (",u.length,")"]}),u.length>1&&e.jsxs("button",{onClick:F,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors flex items-center space-x-1",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Download All"})]})]}),e.jsx("div",{className:"space-y-2",children:u.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(S,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.filename})]}),e.jsx("button",{onClick:()=>w(s.blob,s.filename),className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 border border-red-300 hover:border-red-400 rounded-md transition-colors",children:"Download"})]},a))})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Split:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose split method: page ranges, page count, or file size"}),e.jsx("li",{children:"• Configure split parameters based on your chosen method"}),e.jsx("li",{children:"• Select output format (separate files or ZIP archive)"}),e.jsx("li",{children:'• Click "Split PDF" to process the document'}),e.jsx("li",{children:"• Download individual files or all files at once"})]})]})]}),U=e.jsx("div",{className:"space-y-6",children:x&&c>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(K,{className:"w-5 h-5 text-red-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Split Preview (",c," pages)"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:(()=>{const s=f();return e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Will create ",s.length," file",s.length!==1?"s":""," from ",c," pages"]})})()}),e.jsx("div",{className:"space-y-3",children:f().map((s,a)=>e.jsxs("div",{className:"border border-red-200 dark:border-red-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["File ",a+1]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.length," page",s.length!==1?"s":""]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(n=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200",children:n+1},n))})]},a))}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Page Assignment"}),e.jsx("div",{className:"grid grid-cols-8 md:grid-cols-12 gap-1",children:Array.from({length:c},(s,a)=>{const r=f().findIndex(d=>d.includes(a)),t=["bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200","bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200","bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200","bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200","bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-200"],l=r>=0?t[r%t.length]:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";return e.jsx("div",{className:`aspect-square flex items-center justify-center text-xs font-medium rounded ${l}`,title:r>=0?`File ${r+1}`:"Not included",children:a+1},a)})})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload a PDF to see split preview"})]})})});return e.jsx(H,{title:"Split PDF",description:"Split PDF documents by page ranges, number of pages, or file size",icon:e.jsx(v,{className:"w-6 h-6 text-red-600"}),settingsContent:I,previewContent:U})};export{de as default};
