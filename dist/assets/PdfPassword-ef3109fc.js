import{j as e}from"./index-425a4db3.js";import{r as o}from"./vendor-8a332d8f.js";import{P as k}from"./PDFButton-bafdfd11.js";import{P as M,a as _,F as q}from"./PdfProgress-f427ce92.js";import{T as z}from"./ToolPage-bbc5e4c9.js";import{W as G,y,aL as N,aD as F,E as D}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const X=()=>{const[l,S]=o.useState(null),[d,f]=o.useState("add"),[i,u]=o.useState(""),[j,p]=o.useState(""),[P,v]=o.useState(""),[m,C]=o.useState(!1),[x,E]=o.useState(!1),[g,a]=o.useState("idle"),[A,t]=o.useState(0),[B,r]=o.useState(""),[h,b]=o.useState(null),T=o.useCallback(s=>{s.length>0&&(S(s[0]),a("idle"),t(0),r(""),b(null),u(""),p(""),v(""))},[]),U=()=>{if(d==="add"){if(!i)return a("error"),r("Please enter a password."),!1;if(i!==j)return a("error"),r("Passwords do not match."),!1;if(i.length<4)return a("error"),r("Password must be at least 4 characters long."),!1}else if(!P)return a("error"),r("Please enter the current password to remove protection."),!1;return!0},R=async()=>{if(!l){a("error"),r("Please upload a PDF file first.");return}if(U())try{a("processing"),t(0),r("Loading PDF document...");const s=await l.arrayBuffer();t(20);let n;if(d==="remove"){r("Attempting to unlock PDF...");try{n=await k.load(s,{ignoreEncryption:!1}),t(40)}catch{a("error"),r("Failed to unlock PDF. Please check the password and try again.");return}}else{r("Processing PDF...");try{n=await k.load(s),t(40)}catch{a("error"),r("Failed to load PDF. The file might be corrupted or encrypted.");return}}if(d==="add"){r("Adding password protection..."),t(60),t(80),r("Preparing protected PDF...");const c=await n.save();t(90);const w=new Blob([c],{type:"application/pdf"});b(w),t(100),a("success"),r("PDF processed. Note: This demo version does not add actual password protection.")}else{r("Removing password protection..."),t(60);const c=await n.save();t(90);const w=new Blob([c],{type:"application/pdf"});b(w),t(100),a("success"),r("Password protection removed successfully!")}}catch(s){console.error("Error processing PDF password:",s),a("error"),r(d==="remove"?"Failed to remove password protection. Please check the password and try again.":"Failed to add password protection. Please ensure the file is a valid PDF.")}},$=()=>{if(h){const n=`${d==="add"?"protected":"unlocked"}-${(l==null?void 0:l.name)||"document.pdf"}`;q.saveAs(h,n)}},L=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let n="";for(let c=0;c<12;c++)n+=s.charAt(Math.floor(Math.random()*s.length));u(n),p(n)};return e.jsx(z,{title:"PDF Password",description:"Add or remove password protection from PDF files to secure your documents.",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(G,{className:"w-5 h-5 text-blue-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(M,{onFilesSelected:T,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:g==="processing"})]}),l&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(y,{className:"w-5 h-5 text-blue-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Password Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Action"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"add",checked:d==="add",onChange:s=>f(s.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx(y,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Add password protection"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"remove",checked:d==="remove",onChange:s=>f(s.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx(N,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Remove password protection"})]})]})]}),d==="add"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:i,onChange:s=>u(s.target.value),placeholder:"Enter password",className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:()=>C(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?e.jsx(F,{className:"w-4 h-4 text-gray-400"}):e.jsx(D,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),e.jsx("input",{type:m?"text":"password",value:j,onChange:s=>p(s.target.value),placeholder:"Confirm password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{type:"button",onClick:L,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md transition-colors",children:"Generate Strong Password"}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Note:"})," This demo version simulates password protection. For actual encryption, a specialized PDF library with encryption support is required."]})})]}),d==="remove"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",value:P,onChange:s=>v(s.target.value),placeholder:"Enter current password",className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:()=>E(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:x?e.jsx(F,{className:"w-4 h-4 text-gray-400"}):e.jsx(D,{className:"w-4 h-4 text-gray-400"})})]})]})}),e.jsx("button",{onClick:R,disabled:!l||g==="processing",className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:d==="add"?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Password Protection"})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{children:"Remove Password Protection"})]})})]})]}),e.jsx(_,{status:g,progress:A,message:B,onDownload:$,downloadFileName:h?`${d==="add"?"protected":"unlocked"}-${l==null?void 0:l.name}`:void 0}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How to use PDF Password:"}),e.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose to add or remove password protection"}),e.jsx("li",{children:"• For adding: Enter a strong password (minimum 4 characters)"}),e.jsx("li",{children:"• For removing: Enter the current password"}),e.jsx("li",{children:"• Click the action button to process the PDF"}),e.jsx("li",{children:"• Download the processed PDF when complete"}),e.jsx("li",{children:"• Keep your passwords secure and remember them!"})]})]})]})})};export{X as default};
