import{j as e}from"./index-425a4db3.js";import{r as g}from"./vendor-8a332d8f.js";import{P,S as _,r as q}from"./PDFButton-bafdfd11.js";import{P as J,a as K,F as Q}from"./PdfProgress-f427ce92.js";import{P as V}from"./PdfToolWrapper-bef57729.js";import{F as Z,H as f,aF as w,aG as F,aH as S,E as W,T as ee}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const C=(a,n,r)=>{switch(n){case"roman":return re(a);case"letter":return te(a);case"custom":return(r==null?void 0:r.replace("{n}",a.toString()))||a.toString();default:return a.toString()}},re=a=>{const n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r=["m","cm","d","cd","c","xc","l","xl","x","ix","v","iv","i"];let i="";for(let c=0;c<n.length;c++)for(;a>=n[c];)i+=r[c],a-=n[c];return i},te=a=>{let n="";for(;a>0;)a--,n=String.fromCharCode(97+a%26)+n,a=Math.floor(a/26);return n},ge=()=>{const[a,n]=g.useState(null),[r,i]=g.useState({position:"bottom-center",format:"number",customFormat:"Page {n}",fontSize:12,color:"#000000",startNumber:1,margin:20,skipFirstPage:!1,skipLastPage:!1,prefix:"",suffix:""}),[c,b]=g.useState("idle"),[D,m]=g.useState(0),[z,l]=g.useState(""),[y,j]=g.useState(null),[p,L]=g.useState(0),T=g.useCallback(async t=>{if(t.length>0){const s=t[0];n(s),b("idle"),m(0),l(""),j(null);try{const d=await s.arrayBuffer(),u=(await P.load(d)).getPageCount();L(u),l(`PDF loaded with ${u} pages`)}catch(d){console.error("Error loading PDF:",d),l("Failed to load PDF file")}}},[]),A=t=>{const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return s?{r:parseInt(s[1],16)/255,g:parseInt(s[2],16)/255,b:parseInt(s[3],16)/255}:{r:0,g:0,b:0}},$=(t,s,d)=>{const o=r.margin;switch(r.position){case"top-left":return{x:o,y:s-o};case"top-center":return{x:(t-d)/2,y:s-o};case"top-right":return{x:t-d-o,y:s-o};case"bottom-left":return{x:o,y:o};case"bottom-center":return{x:(t-d)/2,y:o};case"bottom-right":return{x:t-d-o,y:o};default:return{x:(t-d)/2,y:o}}},B=async()=>{if(!a){b("error"),l("Please upload a PDF file first.");return}try{b("processing"),m(0),l("Loading PDF document...");const t=await a.arrayBuffer(),s=await P.load(t),d=s.getPages();m(20),l("Adding page numbers...");const o=await s.embedFont(_.Helvetica),u=A(r.color);for(let x=0;x<d.length;x++){if(x===0&&r.skipFirstPage||x===d.length-1&&r.skipLastPage)continue;const N=d[x],{width:H,height:O}=N.getSize(),Y=r.startNumber+x,G=C(Y,r.format,r.customFormat),v=`${r.prefix}${G}${r.suffix}`,X=o.widthOfTextAtSize(v,r.fontSize),k=$(H,O,X);N.drawText(v,{x:k.x,y:k.y,size:r.fontSize,font:o,color:q(u.r,u.g,u.b)}),m(20+(x+1)/d.length*60)}m(80),l("Saving PDF with page numbers...");const U=await s.save();m(90),l("Finalizing PDF...");const M=new Blob([U],{type:"application/pdf"});j(M),m(100),b("success"),l(`Successfully added page numbers to ${d.length} pages!`)}catch(t){console.error("Error adding page numbers:",t),b("error"),l("Failed to add page numbers. Please ensure the file is a valid PDF.")}},E=()=>{if(y){const t=`numbered-${(a==null?void 0:a.name)||"document.pdf"}`;Q.saveAs(y,t)}},h=t=>{const s=C(t,r.format,r.customFormat);return`${r.prefix}${s}${r.suffix}`},I=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Z,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(J,{onFilesSelected:T,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:c==="processing"})]}),a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(f,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Page Number Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Position"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"top-left",label:"Top Left",icon:w},{value:"top-center",label:"Top Center",icon:F},{value:"top-right",label:"Top Right",icon:S},{value:"bottom-left",label:"Bottom Left",icon:w},{value:"bottom-center",label:"Bottom Center",icon:F},{value:"bottom-right",label:"Bottom Right",icon:S}].map(t=>{const s=t.icon;return e.jsxs("button",{onClick:()=>i(d=>({...d,position:t.value})),className:`p-2 rounded-lg border transition-all flex flex-col items-center space-y-1 text-xs ${r.position===t.value?"border-red-500 bg-red-50 dark:bg-red-900/30 text-red-600":"border-gray-200 dark:border-gray-600 hover:border-red-300"}`,children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{children:t.label})]},t.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Number Format"}),e.jsxs("select",{value:r.format,onChange:t=>i(s=>({...s,format:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"number",children:"Numbers (1, 2, 3, ...)"}),e.jsx("option",{value:"roman",children:"Roman (i, ii, iii, ...)"}),e.jsx("option",{value:"letter",children:"Letters (a, b, c, ...)"}),e.jsx("option",{value:"custom",children:"Custom Format"})]})]}),r.format==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Format"}),e.jsx("input",{type:"text",value:r.customFormat,onChange:t=>i(s=>({...s,customFormat:t.target.value})),placeholder:"Use {n} for page number, e.g., 'Page {n}'",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use ","{n}"," as placeholder for page number"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prefix"}),e.jsx("input",{type:"text",value:r.prefix,onChange:t=>i(s=>({...s,prefix:t.target.value})),placeholder:"e.g., 'Page '",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Suffix"}),e.jsx("input",{type:"text",value:r.suffix,onChange:t=>i(s=>({...s,suffix:t.target.value})),placeholder:"e.g., ' of ' + total",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Size"}),e.jsx("input",{type:"number",min:"8",max:"72",value:r.fontSize,onChange:t=>i(s=>({...s,fontSize:parseInt(t.target.value)||12})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsx("input",{type:"color",value:r.color,onChange:t=>i(s=>({...s,color:t.target.value})),className:"w-full h-10 border border-gray-300 rounded cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Margin (px)"}),e.jsx("input",{type:"number",min:"5",max:"100",value:r.margin,onChange:t=>i(s=>({...s,margin:parseInt(t.target.value)||20})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Number"}),e.jsx("input",{type:"number",min:"1",value:r.startNumber,onChange:t=>i(s=>({...s,startNumber:parseInt(t.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.skipFirstPage,onChange:t=>i(s=>({...s,skipFirstPage:t.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Skip first page"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.skipLastPage,onChange:t=>i(s=>({...s,skipLastPage:t.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Skip last page"})]})]})]}),e.jsxs("button",{onClick:B,disabled:!a||c==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Page Numbers"})]})]})]}),e.jsx(K,{status:c,progress:D,message:z,onDownload:E,downloadFileName:y?`numbered-${a==null?void 0:a.name}`:void 0}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Add Page Numbers:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose position and format for page numbers"}),e.jsx("li",{children:"• Customize appearance with font size, color, and margins"}),e.jsx("li",{children:"• Set prefix, suffix, and starting number if needed"}),e.jsx("li",{children:'• Click "Add Page Numbers" to process the document'}),e.jsx("li",{children:"• Download the numbered PDF when processing is complete"})]})]})]}),R=e.jsx("div",{className:"space-y-6",children:a&&p>0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(W,{className:"w-5 h-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Page Numbers Preview"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,Math.ceil(p/2),p].map(t=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4 relative h-32",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-gray-400 text-sm text-center",children:[e.jsx(ee,{className:"w-8 h-8 mx-auto mb-2"}),"Page ",t," Content"]})}),!(t===1&&r.skipFirstPage||t===p&&r.skipLastPage)&&e.jsx("div",{className:"absolute text-sm font-medium",style:{color:r.color,fontSize:Math.max(8,r.fontSize/2),left:r.position.includes("left")?"8px":r.position.includes("center")?"50%":"auto",right:r.position.includes("right")?"8px":"auto",top:r.position.includes("top")?"8px":"auto",bottom:r.position.includes("bottom")?"8px":"auto",transform:r.position.includes("center")?"translateX(-50%)":"none"},children:h(r.startNumber+t-1)})]},t))}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format Examples"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium mb-1",children:"First Page"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border",children:h(r.startNumber)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium mb-1",children:"Second Page"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border",children:h(r.startNumber+1)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium mb-1",children:"Third Page"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border",children:h(r.startNumber+2)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium mb-1",children:"Last Page"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border",children:h(r.startNumber+p-1)})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Page Numbering Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-800 dark:text-blue-200",children:[e.jsxs("div",{children:["Position: ",r.position]}),e.jsxs("div",{children:["Format: ",r.format]}),e.jsxs("div",{children:["Start: ",r.startNumber]}),e.jsxs("div",{children:["Font Size: ",r.fontSize,"px"]}),e.jsxs("div",{children:["Skip First: ",r.skipFirstPage?"Yes":"No"]}),e.jsxs("div",{children:["Skip Last: ",r.skipLastPage?"Yes":"No"]})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload a PDF to see page numbering preview"})]})})});return e.jsx(V,{title:"Add Page Numbers",description:"Add customizable page numbers to PDF documents with various formats and positions",icon:e.jsx(f,{className:"w-6 h-6 text-red-600"}),settingsContent:I,previewContent:R})};export{ge as default};
