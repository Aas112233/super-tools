import{j as e}from"./index-425a4db3.js";import{r as l}from"./vendor-8a332d8f.js";import{P as w}from"./PDFButton-bafdfd11.js";import{P as W,a as U,F as $}from"./PdfProgress-f427ce92.js";import{P as A}from"./PdfToolWrapper-bef57729.js";import{l as b,aI as T,E as L}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const O=[{name:'Remove 0.5" margins',settings:{presetMode:"margin",marginSize:36,units:"points"}},{name:'Remove 1" margins',settings:{presetMode:"margin",marginSize:72,units:"points"}},{name:"Letter to A4",settings:{presetMode:"center",centerWidth:595,centerHeight:842,units:"points"}},{name:"A4 to Letter",settings:{presetMode:"center",centerWidth:612,centerHeight:792,units:"points"}}],X=()=>{const[i,P]=l.useState(null),[s,d]=l.useState({top:0,bottom:0,left:0,right:0,units:"points",presetMode:"custom",marginSize:36,centerWidth:612,centerHeight:792}),[y,h]=l.useState("idle"),[C,c]=l.useState(0),[F,o]=l.useState(""),[f,v]=l.useState(null),[u,S]=l.useState(0),[a,M]=l.useState(null),D=l.useCallback(async r=>{if(r.length>0){const t=r[0];P(t),h("idle"),c(0),o(""),v(null);try{const n=await t.arrayBuffer(),x=await w.load(n),p=x.getPageCount();if(S(p),p>0){const j=x.getPage(0),{width:m,height:k}=j.getSize();M({width:m,height:k}),o(`PDF loaded with ${p} pages (${Math.round(m)} × ${Math.round(k)} points)`)}}catch(n){console.error("Error loading PDF:",n),o("Failed to load PDF file")}}},[]),g=(r,t)=>{switch(t){case"inches":return r*72;case"mm":return r*2.83465;default:return r}},N=()=>{if(!a)return null;let r={x:g(s.left,s.units),y:g(s.bottom,s.units),width:a.width-g(s.left+s.right,s.units),height:a.height-g(s.top+s.bottom,s.units)};if(s.presetMode==="margin"){const t=g(s.marginSize,s.units);r={x:t,y:t,width:a.width-t*2,height:a.height-t*2}}else if(s.presetMode==="center"){const t=g(s.centerWidth,s.units),n=g(s.centerHeight,s.units);r={x:(a.width-t)/2,y:(a.height-n)/2,width:t,height:n}}return r},z=async()=>{if(!i||!a){h("error"),o("Please upload a PDF file first.");return}const r=N();if(!r||r.width<=0||r.height<=0){h("error"),o("Invalid crop dimensions. Please check your settings.");return}try{h("processing"),c(0),o("Loading PDF document...");const t=await i.arrayBuffer(),n=await w.load(t),x=n.getPages();c(20),o("Cropping pages...");for(let m=0;m<x.length;m++)x[m].setCropBox(r.x,r.y,r.width,r.height),c(20+(m+1)/x.length*60);c(80),o("Saving cropped PDF...");const p=await n.save();c(90),o("Finalizing PDF...");const j=new Blob([p],{type:"application/pdf"});v(j),c(100),h("success"),o(`Successfully cropped ${x.length} pages!`)}catch(t){console.error("Error cropping PDF:",t),h("error"),o("Failed to crop PDF. Please ensure the file is a valid PDF.")}},B=()=>{if(f){const r=`cropped-${(i==null?void 0:i.name)||"document.pdf"}`;$.saveAs(f,r)}},H=r=>{d(t=>({...t,...r.settings}))},E=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(b,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(W,{onFilesSelected:D,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:y==="processing"})]}),i&&a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(T,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Crop Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Original page size: ",Math.round(a.width)," × ",Math.round(a.height)," points (",(a.width/72).toFixed(2),'" × ',(a.height/72).toFixed(2),'")']})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Crop Mode"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"custom",checked:s.presetMode==="custom",onChange:r=>d(t=>({...t,presetMode:r.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Custom margins"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"margin",checked:s.presetMode==="margin",onChange:r=>d(t=>({...t,presetMode:r.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Remove equal margins"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:"center",checked:s.presetMode==="center",onChange:r=>d(t=>({...t,presetMode:r.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Crop to specific size"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Units"}),e.jsxs("select",{value:s.units,onChange:r=>d(t=>({...t,units:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"points",children:"Points"}),e.jsx("option",{value:"inches",children:"Inches"}),e.jsx("option",{value:"mm",children:"Millimeters"})]})]}),s.presetMode==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Margins to Remove"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Top"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:s.top,onChange:r=>d(t=>({...t,top:parseFloat(r.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Bottom"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:s.bottom,onChange:r=>d(t=>({...t,bottom:parseFloat(r.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Left"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:s.left,onChange:r=>d(t=>({...t,left:parseFloat(r.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Right"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:s.right,onChange:r=>d(t=>({...t,right:parseFloat(r.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})]}),s.presetMode==="margin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Margin Size"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:s.marginSize,onChange:r=>d(t=>({...t,marginSize:parseFloat(r.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),s.presetMode==="center"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Size"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Width"}),e.jsx("input",{type:"number",min:"1",step:"0.1",value:s.centerWidth,onChange:r=>d(t=>({...t,centerWidth:parseFloat(r.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Height"}),e.jsx("input",{type:"number",min:"1",step:"0.1",value:s.centerHeight,onChange:r=>d(t=>({...t,centerHeight:parseFloat(r.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quick Presets"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:O.map((r,t)=>e.jsx("button",{onClick:()=>H(r),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md transition-colors",children:r.name},t))})]}),e.jsxs("button",{onClick:z,disabled:!i||y==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Crop PDF"})]})]})]}),e.jsx(U,{status:y,progress:C,message:F,onDownload:B,downloadFileName:f?`cropped-${i==null?void 0:i.name}`:void 0}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Crop:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose a crop mode: custom margins, equal margins, or specific size"}),e.jsx("li",{children:"• Set the units and specify the crop dimensions"}),e.jsx("li",{children:"• Use quick presets for common cropping tasks"}),e.jsx("li",{children:'• Click "Crop PDF" to process all pages'}),e.jsx("li",{children:"• Download the cropped PDF when processing is complete"})]})]})]}),R=e.jsx("div",{className:"space-y-6",children:i&&a?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(L,{className:"w-5 h-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Crop Preview"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Original"}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-white",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 border border-blue-300 dark:border-blue-700 mx-auto",style:{width:"120px",height:`${120*a.height/a.width}px`,maxHeight:"160px"}}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[Math.round(a.width)," × ",Math.round(a.height)]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"After Crop"}),e.jsx("div",{className:"border-2 border-red-300 rounded-lg p-4 bg-white",children:(()=>{const r=N();return r?e.jsxs("div",{children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 mx-auto",style:{width:"120px",height:`${120*r.height/r.width}px`,maxHeight:"160px"}}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[Math.round(r.width)," × ",Math.round(r.height)]})]}):null})()})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Pages Preview (",u," pages will be cropped)"]}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:Array.from({length:Math.min(u,16)},(r,t)=>e.jsx("div",{className:"aspect-[3/4] bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-red-600",children:t+1})},t))}),u>16&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-2",children:["Showing first 16 pages of ",u," total pages"]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload a PDF to see crop preview"})]})})});return e.jsx(A,{title:"Crop PDF",description:"Remove margins and crop PDF pages to specific dimensions",icon:e.jsx(b,{className:"w-6 h-6 text-red-600"}),settingsContent:E,previewContent:R})};export{X as default};
