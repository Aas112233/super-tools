import{j as e}from"./index-425a4db3.js";import{r as o}from"./vendor-8a332d8f.js";import{P as C}from"./PDFButton-bafdfd11.js";import{P as O,a as R,F as E}from"./PdfProgress-f427ce92.js";import{P as H}from"./PdfToolWrapper-bef57729.js";import{J as g,N as L,ae as J,E as T,F as U}from"./ui-86c81d4e.js";import"./router-2c18f3be.js";import"./tslib.es6-1f0a9ae4.js";const k={low:{name:"Low",description:"Slight compression, best quality",quality:.9},medium:{name:"Medium",description:"Balanced compression and quality",quality:.7},high:{name:"High",description:"Good compression, acceptable quality",quality:.5},maximum:{name:"Maximum",description:"Maximum compression, lower quality",quality:.3}},ee=()=>{const[d,S]=o.useState(null),[t,x]=o.useState({level:"medium",removeMetadata:!1,optimizeImages:!0,removeAnnotations:!1,removeBookmarks:!1,removeJavaScript:!1}),[u,h]=o.useState("idle"),[j,m]=o.useState(0),[z,i]=o.useState(""),[f,w]=o.useState(null),[l,D]=o.useState(0),[p,P]=o.useState(0),[n,M]=o.useState(null),B=o.useCallback(async a=>{if(a.length>0){const s=a[0];S(s),D(s.size),h("idle"),m(0),i(""),w(null),P(0);try{const c=await s.arrayBuffer(),r=await C.load(c),y=r.getPageCount(),N=r.getTitle(),v=r.getAuthor();M({pageCount:y,hasImages:!0,hasAnnotations:!1,hasBookmarks:!1,hasJavaScript:!1,hasMetadata:!!(N||v)}),i(`PDF analyzed: ${y} pages, ${(s.size/1024/1024).toFixed(2)} MB`)}catch(c){console.error("Error analyzing PDF:",c),i("Failed to analyze PDF file")}}},[]),A=async()=>{if(!d){h("error"),i("Please upload a PDF file first.");return}try{h("processing"),m(0),i("Loading PDF document...");const a=await d.arrayBuffer(),s=await C.load(a);m(20),i("Analyzing document structure..."),t.removeMetadata&&(i("Removing metadata..."),s.setTitle(""),s.setAuthor(""),s.setSubject(""),s.setKeywords([]),s.setProducer(""),s.setCreator(""),m(30)),m(40),i("Optimizing document structure..."),m(60),i("Compressing PDF...");const c=await s.save({useObjectStreams:!0,addDefaultPage:!1,objectStreamsThreshold:t.level==="maximum"?10:50,updateFieldAppearances:!1});m(80),i("Finalizing compressed PDF...");const r=new Blob([c],{type:"application/pdf"});w(r),P(r.size),m(100),h("success");const y=l/1024/1024,N=r.size/1024/1024,v=(l-r.size)/l*100;i(`Compression complete! Reduced from ${y.toFixed(2)} MB to ${N.toFixed(2)} MB (${v.toFixed(1)}% reduction)`)}catch(a){console.error("Error compressing PDF:",a),h("error"),i("Failed to compress PDF. Please ensure the file is a valid PDF.")}},q=()=>{if(f){const a=`compressed-${(d==null?void 0:d.name)||"document.pdf"}`;E.saveAs(f,a)}},b=a=>{if(a===0)return"0 Bytes";const s=1024,c=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(a)/Math.log(s));return parseFloat((a/Math.pow(s,r)).toFixed(2))+" "+c[r]},F=()=>l===0||p===0?0:(l-p)/l*100,$=e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(g,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Upload PDF File"})]}),e.jsx(O,{onFilesSelected:B,multiple:!1,accept:{"application/pdf":[".pdf"]},disabled:u==="processing"})]}),n&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(L,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Document Analysis"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pages:"}),e.jsx("span",{className:"font-medium",children:n.pageCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"File size:"}),e.jsx("span",{className:"font-medium",children:b(l)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Has metadata:"}),e.jsx("span",{className:`font-medium ${n.hasMetadata?"text-orange-600":"text-green-600"}`,children:n.hasMetadata?"Yes":"No"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Has images:"}),e.jsx("span",{className:`font-medium ${n.hasImages?"text-orange-600":"text-green-600"}`,children:n.hasImages?"Likely":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Has annotations:"}),e.jsx("span",{className:`font-medium ${n.hasAnnotations?"text-orange-600":"text-green-600"}`,children:n.hasAnnotations?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Compression potential:"}),e.jsx("span",{className:"font-medium text-blue-600",children:l>5*1024*1024?"High":l>1024*1024?"Medium":"Low"})]})]})]})]}),d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(J,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Compression Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Compression Level"}),e.jsx("div",{className:"space-y-2",children:Object.entries(k).map(([a,s])=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"radio",value:a,checked:t.level===a,onChange:c=>x(r=>({...r,level:c.target.value})),className:"text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Quality: ",Math.round(s.quality*100),"%"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.description})]})]},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Optimization Options"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.optimizeImages,onChange:a=>x(s=>({...s,optimizeImages:a.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Optimize images (recommended)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.removeMetadata,onChange:a=>x(s=>({...s,removeMetadata:a.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Remove metadata"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.removeAnnotations,onChange:a=>x(s=>({...s,removeAnnotations:a.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Remove annotations"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.removeBookmarks,onChange:a=>x(s=>({...s,removeBookmarks:a.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Remove bookmarks"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.removeJavaScript,onChange:a=>x(s=>({...s,removeJavaScript:a.target.checked})),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Remove JavaScript"})]})]})]}),e.jsxs("button",{onClick:A,disabled:!d||u==="processing",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(g,{className:"w-5 h-5"}),e.jsx("span",{children:"Compress PDF"})]})]})]}),e.jsx(R,{status:u,progress:j,message:z,onDownload:q,downloadFileName:f?`compressed-${d==null?void 0:d.name}`:void 0}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 dark:text-red-100 mb-2",children:"How to use PDF Compress:"}),e.jsxs("ul",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[e.jsx("li",{children:"• Upload a PDF file using the upload area above"}),e.jsx("li",{children:"• Choose compression level based on your quality requirements"}),e.jsx("li",{children:"• Select optimization options to further reduce file size"}),e.jsx("li",{children:'• Click "Compress PDF" to process the document'}),e.jsx("li",{children:"• Download the compressed PDF when processing is complete"}),e.jsx("li",{children:"• Higher compression levels reduce file size but may affect quality"})]})]})]}),I=e.jsx("div",{className:"space-y-6",children:d&&n?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(T,{className:"w-5 h-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Compression Preview"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Original"}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-white",children:[e.jsx(U,{className:"w-16 h-16 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:b(l)}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.pageCount," pages"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"After Compression"}),e.jsxs("div",{className:"border-2 border-red-300 rounded-lg p-4 bg-white",children:[e.jsx(g,{className:"w-16 h-16 text-red-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p>0?b(p):"Processing..."}),e.jsx("p",{className:"text-xs text-gray-500",children:p>0&&F()>0?e.jsxs("span",{className:"text-green-600 font-medium",children:[F().toFixed(1),"% smaller"]}):"Size reduction pending"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Compression Settings"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Compression level:"}),e.jsx("span",{className:"font-medium text-red-600",children:k[t.level].name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Quality target:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(k[t.level].quality*100),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Optimize images:"}),e.jsx("span",{className:`font-medium ${t.optimizeImages?"text-green-600":"text-gray-500"}`,children:t.optimizeImages?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Remove metadata:"}),e.jsx("span",{className:`font-medium ${t.removeMetadata?"text-green-600":"text-gray-500"}`,children:t.removeMetadata?"Yes":"No"})]})]})]}),u==="processing"&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"w-5 h-5 text-blue-600 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Compressing..."}),e.jsxs("span",{className:"text-blue-600",children:[j,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Upload a PDF to see compression preview"})]})})});return e.jsx(H,{title:"Compress PDF",description:"Reduce PDF file size with customizable compression settings",icon:e.jsx(g,{className:"w-6 h-6 text-red-600"}),settingsContent:$,previewContent:I})};export{ee as default};
